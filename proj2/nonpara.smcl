{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\nonpara.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res} 8 Dec 2023, 03:27:08
{txt}
{com}. 
. ********************************/
. ********SECOND RUN TESTS********
. ********************************/
. 
. sort contest sessionid
{txt}
{com}. by contest: signrank x125=x175

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        33{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         3{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x175
{col 10}z = {res}{ralign 6:2.100}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0357}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0391}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x175
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. by contest: signrank x225=x275

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x225 = x275
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        13{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        23{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x225 = x275
{col 10}z = {res}{ralign 6:-0.700}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4838}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5469}
{txt}
{com}. by contest: signrank x1225=x1275

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1225 = x1275
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        14{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        22{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1225 = x1275
{col 10}z = {res}{ralign 6:-0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. by contest: signrank x110025=x110075

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}        11{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      5{col 26}        24{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.75

{txt}H0: x110025 = x110075
{col 10}z = {res}{ralign 6:-0.912}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3615}
{txt}{col 1}Exact prob = {res}{ralign 6:0.4219}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         7{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      5{col 26}        28{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.75

{txt}H0: x110025 = x110075
{col 10}z = {res}{ralign 6:-1.474}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1405}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1719}
{txt}
{com}. by contest: signrank x210025=x210075

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x210025 = x210075
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         9{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        27{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x210025 = x210075
{col 10}z = {res}{ralign 6:-1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}
{txt}
{com}. by contest: signrank x1210025=x1210075

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}       6.5{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}      29.5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: x1210025 = x1210075
{col 10}z = {res}{ralign 6:-1.612}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1069}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1172}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         9{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        27{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1210025 = x1210075
{col 10}z = {res}{ralign 6:-1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}
{txt}
{com}. 
. by contest: signrank x125=x225

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x225
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        19{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        17{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x225
{col 10}z = {res}{ralign 6:0.140}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.8886}
{txt}{col 1}Exact prob = {res}{ralign 6:0.9453}
{txt}
{com}. by contest: signrank x175=x275

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        11{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        25{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x175 = x275
{col 10}z = {res}{ralign 6:-0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        10{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        26{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x175 = x275
{col 10}z = {res}{ralign 6:-1.120}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2626}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3125}
{txt}
{com}. 
. by contest: signrank change25=change75

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: change25 = change75
{col 10}z = {res}{ralign 6:0.981}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3264}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3672}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         3{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        33{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: change25 = change75
{col 10}z = {res}{ralign 6:-2.103}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0355}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0313}
{txt}
{com}. *log close
. 
. *log using C:\purdue\nonpara, append
. 
. 
. 
. *********************************************************
. 
. 
. *******************
. ******TABLE 5******
. *******************
. clear 
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. 
. sort subjectid Period
{txt}
{com}. by subjectid: gen totaltypea=typea[1]
{txt}
{com}. by subjectid: replace totaltypea=typea[_n]+ totaltypea[_n-1] if _n>1
{txt}(4,879 real changes made)

{com}. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. 
. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. label var xjow "Joy of winning"
{txt}
{com}. label var alpha "$\alpha$"
{txt}
{com}. label var risk "Risk aversion"
{txt}
{com}. label var loss "Loss aversion"
{txt}
{com}. *label var LossLineSwitchToB "Loss aversion"
. label var inv "$1/Period$"
{txt}
{com}. 
. **********SUBJECT RE***********************************************************************
. *ALL PAY AUCTION
. xtreg x d75 inv first20 i.sessionid if Type==1 & contest=="All Pay Auction", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2037                                         {txt}min = {res}        10
{txt}     Between = {res}0.0951                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.1651                                         {txt}max = {res}        27

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}-21.62866{col 26}{space 2} 5.635731{col 37}{space 1}   -3.84{col 46}{space 3}0.000{col 54}{space 4}-32.67449{col 67}{space 3}-10.58283
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 12.60962{col 26}{space 2} 4.003287{col 37}{space 1}    3.15{col 46}{space 3}0.002{col 54}{space 4} 4.763325{col 67}{space 3} 20.45592
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} 9.848289{col 26}{space 2} 5.636506{col 37}{space 1}    1.75{col 46}{space 3}0.081{col 54}{space 4} -1.19906{col 67}{space 3} 20.89564
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}1  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}2  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}3  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}4  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}5  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}6  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}7  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}8  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}9  {c |}{col 14}{res}{space 2}-13.07432{col 26}{space 2}  .215295{col 37}{space 1}  -60.73{col 46}{space 3}0.000{col 54}{space 4}-13.49629{col 67}{space 3}-12.65235
{txt}{space 9}10  {c |}{col 14}{res}{space 2}-6.251099{col 26}{space 2} .2136798{col 37}{space 1}  -29.25{col 46}{space 3}0.000{col 54}{space 4}-6.669904{col 67}{space 3}-5.832294
{txt}{space 9}11  {c |}{col 14}{res}{space 2} .2194068{col 26}{space 2} .2167097{col 37}{space 1}    1.01{col 46}{space 3}0.311{col 54}{space 4}-.2053364{col 67}{space 3}   .64415
{txt}{space 9}12  {c |}{col 14}{res}{space 2}-14.51714{col 26}{space 2} .2189171{col 37}{space 1}  -66.31{col 46}{space 3}0.000{col 54}{space 4}-14.94621{col 67}{space 3}-14.08807
{txt}{space 9}13  {c |}{col 14}{res}{space 2} .0340119{col 26}{space 2} .2334322{col 37}{space 1}    0.15{col 46}{space 3}0.884{col 54}{space 4}-.4235068{col 67}{space 3} .4915305
{txt}{space 9}14  {c |}{col 14}{res}{space 2}-7.736819{col 26}{space 2} .2419127{col 37}{space 1}  -31.98{col 46}{space 3}0.000{col 54}{space 4}-8.210959{col 67}{space 3}-7.262678
{txt}{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 9}16  {c |}{col 14}{res}{space 2}-1.831103{col 26}{space 2}  .233923{col 37}{space 1}   -7.83{col 46}{space 3}0.000{col 54}{space 4}-2.289584{col 67}{space 3}-1.372623
{txt}{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2}  45.5148{col 26}{space 2} 5.654182{col 37}{space 1}    8.05{col 46}{space 3}0.000{col 54}{space 4} 34.43281{col 67}{space 3}  56.5968
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 17.531932
     {txt}sigma_e {c |} {res} 24.428128
         {txt}rho {c |} {res} .33997117{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store A
{txt}
{com}. xtreg x d75 inv first20 i.sessionid if Type==2 & contest=="All Pay Auction", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0310                                         {txt}min = {res}        13
{txt}     Between = {res}0.1809                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.0846                                         {txt}max = {res}        30

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}-8.823015{col 26}{space 2} 2.707373{col 37}{space 1}   -3.26{col 46}{space 3}0.001{col 54}{space 4}-14.12937{col 67}{space 3}-3.516661
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 15.64664{col 26}{space 2} 6.305487{col 37}{space 1}    2.48{col 46}{space 3}0.013{col 54}{space 4} 3.288109{col 67}{space 3} 28.00516
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} .7617391{col 26}{space 2} 2.707106{col 37}{space 1}    0.28{col 46}{space 3}0.778{col 54}{space 4}-4.544092{col 67}{space 3}  6.06757
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}1  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}2  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}3  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}4  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}5  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}6  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}7  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}8  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}9  {c |}{col 14}{res}{space 2} 17.37971{col 26}{space 2} .0574491{col 37}{space 1}  302.52{col 46}{space 3}0.000{col 54}{space 4} 17.26711{col 67}{space 3} 17.49231
{txt}{space 9}10  {c |}{col 14}{res}{space 2}-9.457426{col 26}{space 2} .0672525{col 37}{space 1} -140.63{col 46}{space 3}0.000{col 54}{space 4}-9.589238{col 67}{space 3}-9.325613
{txt}{space 9}11  {c |}{col 14}{res}{space 2} 7.052316{col 26}{space 2}   .05702{col 37}{space 1}  123.68{col 46}{space 3}0.000{col 54}{space 4} 6.940559{col 67}{space 3} 7.164074
{txt}{space 9}12  {c |}{col 14}{res}{space 2}-1.198003{col 26}{space 2} .0572216{col 37}{space 1}  -20.94{col 46}{space 3}0.000{col 54}{space 4}-1.310156{col 67}{space 3}-1.085851
{txt}{space 9}13  {c |}{col 14}{res}{space 2}-2.559409{col 26}{space 2} .0544918{col 37}{space 1}  -46.97{col 46}{space 3}0.000{col 54}{space 4}-2.666211{col 67}{space 3}-2.452607
{txt}{space 9}14  {c |}{col 14}{res}{space 2}-11.53917{col 26}{space 2} .0600383{col 37}{space 1} -192.20{col 46}{space 3}0.000{col 54}{space 4}-11.65684{col 67}{space 3} -11.4215
{txt}{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 9}16  {c |}{col 14}{res}{space 2} .8415434{col 26}{space 2} .0543048{col 37}{space 1}   15.50{col 46}{space 3}0.000{col 54}{space 4}  .735108{col 67}{space 3} .9479789
{txt}{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} 36.89935{col 26}{space 2} 2.515556{col 37}{space 1}   14.67{col 46}{space 3}0.000{col 54}{space 4} 31.96895{col 67}{space 3} 41.82975
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 17.820295
     {txt}sigma_e {c |} {res} 31.362447
         {txt}rho {c |} {res} .24406027{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store B
{txt}
{com}. *xtreg x12hat d75 inv f75 if Type==1 & validriskloss==1 & contest=="All Pay Auction", i(subjectid) vce(cluster sessionid)
. *est store C
. *LOTTERY
. xtreg x d75 inv first20 i.sessionid if Type==1 &  contest=="Lottery", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1223                                         {txt}min = {res}        13
{txt}     Between = {res}0.1529                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.1389                                         {txt}max = {res}        28

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}-5.882275{col 26}{space 2} 3.203799{col 37}{space 1}   -1.84{col 46}{space 3}0.066{col 54}{space 4} -12.1616{col 67}{space 3} .3970548
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 10.74005{col 26}{space 2} 5.453056{col 37}{space 1}    1.97{col 46}{space 3}0.049{col 54}{space 4} .0522542{col 67}{space 3} 21.42784
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} 15.58286{col 26}{space 2} 3.192418{col 37}{space 1}    4.88{col 46}{space 3}0.000{col 54}{space 4} 9.325839{col 67}{space 3} 21.83989
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2} 5.564767{col 26}{space 2} .0909531{col 37}{space 1}   61.18{col 46}{space 3}0.000{col 54}{space 4} 5.386502{col 67}{space 3} 5.743032
{txt}{space 10}3  {c |}{col 14}{res}{space 2} .7650709{col 26}{space 2} .0590974{col 37}{space 1}   12.95{col 46}{space 3}0.000{col 54}{space 4} .6492421{col 67}{space 3} .8808996
{txt}{space 10}4  {c |}{col 14}{res}{space 2}-7.437572{col 26}{space 2} .0175748{col 37}{space 1} -423.20{col 46}{space 3}0.000{col 54}{space 4}-7.472018{col 67}{space 3}-7.403126
{txt}{space 10}5  {c |}{col 14}{res}{space 2} 17.36228{col 26}{space 2} .0237691{col 37}{space 1}  730.45{col 46}{space 3}0.000{col 54}{space 4} 17.31569{col 67}{space 3} 17.40887
{txt}{space 10}6  {c |}{col 14}{res}{space 2} 4.723308{col 26}{space 2} .0177295{col 37}{space 1}  266.41{col 46}{space 3}0.000{col 54}{space 4} 4.688559{col 67}{space 3} 4.758057
{txt}{space 10}7  {c |}{col 14}{res}{space 2} 19.62122{col 26}{space 2} .0262991{col 37}{space 1}  746.08{col 46}{space 3}0.000{col 54}{space 4} 19.56967{col 67}{space 3} 19.67276
{txt}{space 10}8  {c |}{col 14}{res}{space 2} 12.94197{col 26}{space 2} .0224908{col 37}{space 1}  575.43{col 46}{space 3}0.000{col 54}{space 4} 12.89789{col 67}{space 3} 12.98606
{txt}{space 10}9  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}10  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}11  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}12  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}13  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}14  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}16  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} 29.78293{col 26}{space 2}  .953521{col 37}{space 1}   31.23{col 46}{space 3}0.000{col 54}{space 4} 27.91406{col 67}{space 3}  31.6518
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res}  20.48359
     {txt}sigma_e {c |} {res} 23.540113
         {txt}rho {c |} {res} .43090403{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store D
{txt}
{com}. xtreg x d75 inv first20 i.sessionid if Type==2 & contest=="Lottery", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0401                                         {txt}min = {res}        12
{txt}     Between = {res}0.1494                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.0842                                         {txt}max = {res}        27

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2} 1.737756{col 26}{space 2} 4.139132{col 37}{space 1}    0.42{col 46}{space 3}0.675{col 54}{space 4}-6.374793{col 67}{space 3} 9.850305
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 13.42103{col 26}{space 2} 7.400565{col 37}{space 1}    1.81{col 46}{space 3}0.070{col 54}{space 4}-1.083816{col 67}{space 3} 27.92587
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} 8.921215{col 26}{space 2} 4.128025{col 37}{space 1}    2.16{col 46}{space 3}0.031{col 54}{space 4} .8304354{col 67}{space 3} 17.01199
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2} 2.305278{col 26}{space 2}  .093803{col 37}{space 1}   24.58{col 46}{space 3}0.000{col 54}{space 4} 2.121428{col 67}{space 3} 2.489129
{txt}{space 10}3  {c |}{col 14}{res}{space 2}-16.83406{col 26}{space 2} .0728976{col 37}{space 1} -230.93{col 46}{space 3}0.000{col 54}{space 4}-16.97693{col 67}{space 3}-16.69118
{txt}{space 10}4  {c |}{col 14}{res}{space 2}-14.14342{col 26}{space 2} .0488577{col 37}{space 1} -289.48{col 46}{space 3}0.000{col 54}{space 4}-14.23918{col 67}{space 3}-14.04766
{txt}{space 10}5  {c |}{col 14}{res}{space 2} -2.74914{col 26}{space 2} .0235378{col 37}{space 1} -116.80{col 46}{space 3}0.000{col 54}{space 4}-2.795273{col 67}{space 3}-2.703007
{txt}{space 10}6  {c |}{col 14}{res}{space 2}-14.11689{col 26}{space 2} .0236555{col 37}{space 1} -596.77{col 46}{space 3}0.000{col 54}{space 4}-14.16325{col 67}{space 3}-14.07052
{txt}{space 10}7  {c |}{col 14}{res}{space 2}-2.829071{col 26}{space 2} .0416383{col 37}{space 1}  -67.94{col 46}{space 3}0.000{col 54}{space 4} -2.91068{col 67}{space 3}-2.747461
{txt}{space 10}8  {c |}{col 14}{res}{space 2} 7.493147{col 26}{space 2} .0326429{col 37}{space 1}  229.55{col 46}{space 3}0.000{col 54}{space 4} 7.429168{col 67}{space 3} 7.557126
{txt}{space 10}9  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}10  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}11  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}12  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}13  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}14  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}16  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} 42.49708{col 26}{space 2} 2.131756{col 37}{space 1}   19.94{col 46}{space 3}0.000{col 54}{space 4} 38.31891{col 67}{space 3} 46.67524
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 20.396695
     {txt}sigma_e {c |} {res} 26.882051
         {txt}rho {c |} {res} .36536066{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store E
{txt}
{com}. *reg x12 d75 inv f75 if Type==1  &  contest=="Lottery", vce(cluster subjectid)
. *est store F
. 
. esttab A B D E using table5.doc, se r2 keep(_cons d75 inv first20 _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) 
{res}{txt}(output written to {browse  `"table5.doc"'})

{com}. esttab A B D E using table5.doc, se r2 keep(_cons d75 inv first20 _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01)
{res}{txt}(output written to {browse  `"table5.doc"'})

{com}. 
. *******************
. ******TABLE 6******
. *******************
. 
. **********DISPERSION MEASURES****************************
. clear
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if periodt>10
{txt}(2,560 observations deleted)

{com}. 
. gen x_sd=x
{txt}
{com}. gen x_med=x
{txt}
{com}. 
. sort lottery Type alpha sessionid subjectid
{txt}
{com}. collapse (mean) x (sd) x_sd (p50) x_med, by(lottery Type alpha sessionid subjectid)
{res}{txt}
{com}. gen coeff_var=x_sd/x
{txt}(38 missing values generated)

{com}. 
. gen dalpha=0
{txt}
{com}. replace dalpha=1 if alpha==0.75
{txt}(255 real changes made)

{com}. 
. *H_s measure = SD of the median
. by lottery Type alpha sessionid: egen x_sd_med=sd(x_med)
{txt}
{com}. *D_s measure =  Median of the SD
. by lottery Type alpha sessionid: egen x_med_sd=median(x_sd)
{txt}
{com}. 
. sort lottery Type alpha sessionid
{txt}
{com}. collapse x_med_sd x_sd_med, by(lottery Type alpha sessionid)
{res}{txt}
{com}. 
. *Compare alpha's*
. save cv_tests, replace
{txt}{p 0 4 2}
file {bf}
cv_tests.dta{rm}
saved
{p_end}

{com}. 
. keep if alpha==0.25
{txt}(32 observations deleted)

{com}. rename x_sd_med x_med1
{res}{txt}
{com}. rename x_med_sd x_sd1
{res}{txt}
{com}. save cv_type1, replace
{txt}{p 0 4 2}
file {bf}
cv_type1.dta{rm}
saved
{p_end}

{com}. clear
{txt}
{com}. use cv_tests
{txt}
{com}. keep if alpha==0.75
{txt}(32 observations deleted)

{com}. rename x_med_sd x_sd2
{res}{txt}
{com}. rename x_sd_med x_med2
{res}{txt}
{com}. save cv_type2, replace
{txt}{p 0 4 2}
file {bf}
cv_type2.dta{rm}
saved
{p_end}

{com}. merge 1:1 Type sessionid using "cv_type1.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              32{txt}  (_merge==3)
{col 5}{hline 41}

{com}. 
. sort lottery Type
{txt}
{com}. *H_s measure = SD of the median
. by lottery Type: signrank x_med1=x_med2

{txt}{hline}
-> lottery = 0, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        30{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         6{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:1.680}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0929}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1094}

{txt}{hline}
-> lottery = 0, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        13{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        23{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-0.700}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4838}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5469}

{txt}{hline}
-> lottery = 1, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        20{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        16{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}

{txt}{hline}
-> lottery = 1, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}
{txt}
{com}. *D_s measure = Median of the SD
. by lottery Type: signrank x_sd1=x_sd2

{txt}{hline}
-> lottery = 0, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> lottery = 0, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        24{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        12{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.840}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4008}
{txt}{col 1}Exact prob = {res}{ralign 6:0.4609}

{txt}{hline}
-> lottery = 1, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        20{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        16{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}

{txt}{hline}
-> lottery = 1, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        16{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        20{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}
{txt}
{com}. 
. *Compare Types*
. save cv_tests, replace
{txt}{p 0 4 2}
file {bf}
cv_tests.dta{rm}
saved
{p_end}

{com}. 
. keep if Type==1
{txt}(16 observations deleted)

{com}. rename x_med_sd x_sd1
{res}{err}variable {bf}x_med_sd{sf} not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. clear

. use cv_tests

. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. keep if alpha==0.25
{txt}(32 observations deleted)

{com}. rename x_sd_med x_med1
{res}{err}variable {bf}x_sd_med{sf} not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. clear
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if periodt>10
{txt}(2,560 observations deleted)

{com}. 
. gen x_sd=x
{txt}
{com}. gen x_med=x
{txt}
{com}. 
. sort lottery Type alpha sessionid subjectid
{txt}
{com}. collapse (mean) x (sd) x_sd (p50) x_med, by(lottery Type alpha sessionid subjectid)
{res}{txt}
{com}. gen coeff_var=x_sd/x
{txt}(38 missing values generated)

{com}. 
. gen dalpha=0
{txt}
{com}. replace dalpha=1 if alpha==0.75
{txt}(255 real changes made)

{com}. 
. *H_s measure = SD of the median
. by lottery Type alpha sessionid: egen x_sd_med=sd(x_med)
{txt}
{com}. *D_s measure =  Median of the SD
. by lottery Type alpha sessionid: egen x_med_sd=median(x_sd)
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. sort lottery Type alpha sessionid
{txt}
{com}. collapse x_med_sd x_sd_med, by(lottery Type alpha sessionid)
{res}{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. keep if alpha==0.25
{txt}(32 observations deleted)

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. rename x_sd_med x_med1
{res}{txt}
{com}. rename x_med_sd x_sd1
{res}{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. clear
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if periodt>10
{txt}(2,560 observations deleted)

{com}. 
. gen x_sd=x
{txt}
{com}. gen x_med=x
{txt}
{com}. 
. sort lottery Type alpha sessionid subjectid
{txt}
{com}. collapse (mean) x (sd) x_sd (p50) x_med, by(lottery Type alpha sessionid subjectid)
{res}{txt}
{com}. gen coeff_var=x_sd/x
{txt}(38 missing values generated)

{com}. 
. gen dalpha=0
{txt}
{com}. replace dalpha=1 if alpha==0.75
{txt}(255 real changes made)

{com}. 
. *H_s measure = SD of the median
. by lottery Type alpha sessionid: egen x_sd_med=sd(x_med)
{txt}
{com}. *D_s measure =  Median of the SD
. by lottery Type alpha sessionid: egen x_med_sd=median(x_sd)
{txt}
{com}. 
. sort lottery Type alpha sessionid
{txt}
{com}. collapse x_med_sd x_sd_med, by(lottery Type alpha sessionid)
{res}{txt}
{com}. 
. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. save cv_tests, replace
{txt}{p 0 4 2}
file {bf}
cv_tests.dta{rm}
saved
{p_end}

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. keep if alpha==0.25
{txt}(32 observations deleted)

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. rename x_sd_med x_med1
{res}{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. rename x_med_sd x_sd1
{res}{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. save cv_type1, replace
{txt}{p 0 4 2}
file {bf}
cv_type1.dta{rm}
saved
{p_end}

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. clear
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. use cv_tests
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. keep if alpha==0.75
{txt}(32 observations deleted)

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. rename x_med_sd x_sd2
{res}{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. rename x_sd_med x_med2
{res}{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. save cv_type2, replace
{txt}{p 0 4 2}
file {bf}
cv_type2.dta{rm}
saved
{p_end}

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. merge 1:1 Type sessionid using "cv_type1.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              32{txt}  (_merge==3)
{col 5}{hline 41}

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. sort lottery Type
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. by lottery Type: signrank x_med1=x_med2

{txt}{hline}
-> lottery = 0, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        30{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         6{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:1.680}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0929}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1094}

{txt}{hline}
-> lottery = 0, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        13{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        23{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-0.700}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4838}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5469}

{txt}{hline}
-> lottery = 1, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        20{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        16{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}

{txt}{hline}
-> lottery = 1, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. by lottery Type: signrank x_sd1=x_sd2

{txt}{hline}
-> lottery = 0, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> lottery = 0, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        24{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        12{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.840}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4008}
{txt}{col 1}Exact prob = {res}{ralign 6:0.4609}

{txt}{hline}
-> lottery = 1, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        20{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        16{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}

{txt}{hline}
-> lottery = 1, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        16{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        20{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. save cv_tests, replace
{txt}{p 0 4 2}
file {bf}
cv_tests.dta{rm}
saved
{p_end}

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. keep if Type==1
{txt}(16 observations deleted)

{com}. rename x_med_sd x_sd1
{res}{err}variable {bf}x_med_sd{sf} not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. save cv_tests, replace
{txt}{p 0 4 2}
file {bf}
cv_tests.dta{rm}
saved
{p_end}

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. save cv_tests, replace
{txt}{p 0 4 2}
file {bf}
cv_tests.dta{rm}
saved
{p_end}

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. clear
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if periodt>10
{txt}(2,560 observations deleted)

{com}. 
. gen x_sd=x
{txt}
{com}. gen x_med=x
{txt}
{com}. 
. sort lottery Type alpha sessionid subjectid
{txt}
{com}. collapse (mean) x (sd) x_sd (p50) x_med, by(lottery Type alpha sessionid subjectid)
{res}{txt}
{com}. gen coeff_var=x_sd/x
{txt}(38 missing values generated)

{com}. 
. gen dalpha=0
{txt}
{com}. replace dalpha=1 if alpha==0.75
{txt}(255 real changes made)

{com}. 
. *H_s measure = SD of the median
. by lottery Type alpha sessionid: egen x_sd_med=sd(x_med)
{txt}
{com}. *D_s measure =  Median of the SD
. by lottery Type alpha sessionid: egen x_med_sd=median(x_sd)
{txt}
{com}. 
. sort lottery Type alpha sessionid
{txt}
{com}. collapse x_med_sd x_sd_med, by(lottery Type alpha sessionid)
{res}{txt}
{com}. 
. *Compare alpha's*
. save cv_tests, replace
{txt}{p 0 4 2}
file {bf}
cv_tests.dta{rm}
saved
{p_end}

{com}. 
. keep if alpha==0.25
{txt}(32 observations deleted)

{com}. rename x_sd_med x_med1
{res}{txt}
{com}. rename x_med_sd x_sd1
{res}{txt}
{com}. save cv_type1, replace
{txt}{p 0 4 2}
file {bf}
cv_type1.dta{rm}
saved
{p_end}

{com}. clear
{txt}
{com}. 
. use cv_tests
{txt}
{com}. keep if alpha==0.75
{txt}(32 observations deleted)

{com}. rename x_med_sd x_sd2
{res}{txt}
{com}. rename x_sd_med x_med2
{res}{txt}
{com}. save cv_type2, replace
{txt}{p 0 4 2}
file {bf}
cv_type2.dta{rm}
saved
{p_end}

{com}. merge 1:1 Type sessionid using "cv_type1.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              32{txt}  (_merge==3)
{col 5}{hline 41}

{com}. 
. sort lottery Type
{txt}
{com}. *H_s measure = SD of the median
. by lottery Type: signrank x_med1=x_med2

{txt}{hline}
-> lottery = 0, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        30{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         6{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:1.680}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0929}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1094}

{txt}{hline}
-> lottery = 0, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        13{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        23{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-0.700}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4838}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5469}

{txt}{hline}
-> lottery = 1, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        20{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        16{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}

{txt}{hline}
-> lottery = 1, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}
{txt}
{com}. *D_s measure = Median of the SD
. by lottery Type: signrank x_sd1=x_sd2

{txt}{hline}
-> lottery = 0, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> lottery = 0, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        24{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        12{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.840}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4008}
{txt}{col 1}Exact prob = {res}{ralign 6:0.4609}

{txt}{hline}
-> lottery = 1, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        20{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        16{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}

{txt}{hline}
-> lottery = 1, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        16{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        20{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}
{txt}
{com}. 
. *Compare Types*
. save cv_tests, replace
{txt}{p 0 4 2}
file {bf}
cv_tests.dta{rm}
saved
{p_end}

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. gen change=.
{txt}(5,120 missing values generated)

{com}. replace change=0 if Type==1 & x12==.
{txt}(530 real changes made)

{com}. replace change=1 if Type==1 & x12~=.
{txt}(2,030 real changes made)

{com}. 
. gen reduce=0
{txt}
{com}. replace reduce=1 if Type==1 & x12hat<x1hat
{txt}(1,065 real changes made)

{com}. 
. gen raise=0
{txt}
{com}. replace raise=1 if Type==1 & x12hat>x1hat
{txt}(965 real changes made)

{com}. 
. gen rationalrev=0
{txt}
{com}. replace rationalrev=1 if x1hat~=br1
{txt}(4,998 real changes made)

{com}. *replace rationalrev=1 if x2hat & lottery==1
. 
. gen overbid=1
{txt}
{com}. replace overbid=0 if x1hat<=br1  
{txt}(1,539 real changes made)

{com}. 
. gen underbid=0
{txt}
{com}. replace underbid=1 if x1hat<br1 
{txt}(1,417 real changes made)

{com}. 
. gen ahead=0
{txt}
{com}. replace ahead=1 if x1hat>x2hat
{txt}(2,544 real changes made)

{com}. 
. gen onedisttoother=x1hat-x2hat
{txt}
{com}. gen twodisttoother=x12hat-x2hat
{txt}
{com}. 
. gen irr_nochange=0 
{txt}
{com}. replace irr_nochange=1 if changehat==0 & rationalrev==1
{txt}(956 real changes made)

{com}. 
. gen irr_rev_dec=0
{txt}
{com}. replace irr_rev_dec=1 if irr_nochange==1
{txt}(956 real changes made)

{com}. replace irr_rev_dec=1 if changehat==1 & x1hat==br1
{txt}(18 real changes made)

{com}. 
. label var rationalrev "Revising is rational"
{txt}
{com}. label var changehat "Subject revised"
{txt}
{com}. label var irr_nochange "No change even though was rational"
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. xtprobit change d75 inv first20 i.sessionid if Type==1 &  contest=="Lottery", ///

{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. re i(subjectid) vce(cluster sessionid)
{err}command {bf}re{sf} is unrecognized
{txt}{search r(199), local:r(199);}

end of do-file

{search r(199), local:r(199);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. clear
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *keep if changehat==1
. 
. *Period >10 & <=20 & Period >30
. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. keep if lottery==1
{txt}(2,560 observations deleted)

{com}. keep if Type==1
{txt}(1,280 observations deleted)

{com}. sum match2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}match2 {c |}{res}      1,280     .046875    .2114537          0          1
{txt}
{com}. 
. *gen direction=0
. *replace direction=1 if diff_br_1>diff_br_2
. *replace direction=1 if  diff_br_1==diff_br_2 & diff_br_1==0
. 
. gen outspend2=0
{txt}
{com}. replace outspend2=1 if x12hat>=x2hat
{txt}(927 real changes made)

{com}. sum outspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}outspend2 {c |}{res}      1,280    .7242188    .4470818          0          1
{txt}
{com}. gen slightoutspend2=0
{txt}
{com}. replace slightoutspend2=1 if x12hat-x2hat>=0.01 
{txt}(796 real changes made)

{com}. replace slightoutspend2=0 if x12hat-x2hat>5
{txt}(551 real changes made)

{com}. sum slightoutspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
slightouts~2 {c |}{res}      1,280    .1914063    .3935618          0          1
{txt}
{com}. 
. gen sqrtx2hat=sqrt(x2hat)
{txt}
{com}. gen x2hatsq=x2hat*x2hat
{txt}
{com}. 
. egen xjowbar=mean(xjow)
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25, i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1541                                         {txt}min = {res}         5
{txt}     Between = {res}0.0050                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.0905                                         {txt}max = {res}        16

                                                {txt}Wald chi2({res}3{txt})      =  {res}    58.02
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.5496476{col 26}{space 2} .1381015{col 37}{space 1}   -3.98{col 46}{space 3}0.000{col 54}{space 4}-.8203214{col 67}{space 3}-.2789737
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 8.503715{col 26}{space 2} 1.432925{col 37}{space 1}    5.93{col 46}{space 3}0.000{col 54}{space 4} 5.695233{col 67}{space 3}  11.3122
{txt}{space 9}inv {c |}{col 14}{res}{space 2}  8.08702{col 26}{space 2} 6.851729{col 37}{space 1}    1.18{col 46}{space 3}0.238{col 54}{space 4}-5.342123{col 67}{space 3} 21.51616
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 16.23312{col 26}{space 2} 4.363813{col 37}{space 1}    3.72{col 46}{space 3}0.000{col 54}{space 4} 7.680207{col 67}{space 3} 24.78604
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.974798
     {txt}sigma_e {c |} {res} 26.665094
         {txt}rho {c |} {res} .35944634{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.25, vce(cluster subjectid)
. est store A
{txt}
{com}. *predict xbr25 if alpha==0.25
. gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. *alpha=0.75
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2254                                         {txt}min = {res}         4
{txt}     Between = {res}0.1085                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.1848                                         {txt}max = {res}        17

                                                {txt}Wald chi2({res}3{txt})      =  {res}   254.55
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.7994133{col 26}{space 2} .1344883{col 37}{space 1}   -5.94{col 46}{space 3}0.000{col 54}{space 4}-1.063005{col 67}{space 3}-.5358212
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2}  11.4271{col 26}{space 2} 1.245723{col 37}{space 1}    9.17{col 46}{space 3}0.000{col 54}{space 4} 8.985531{col 67}{space 3} 13.86867
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 17.98433{col 26}{space 2} 1.531107{col 37}{space 1}   11.75{col 46}{space 3}0.000{col 54}{space 4} 14.98342{col 67}{space 3} 20.98525
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 11.77709{col 26}{space 2} 4.983728{col 37}{space 1}    2.36{col 46}{space 3}0.018{col 54}{space 4} 2.009159{col 67}{space 3} 21.54501
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.466571
     {txt}sigma_e {c |} {res}  25.60477
         {txt}rho {c |} {res} .36629143{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store B
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       434
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        60

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2216                                         {txt}min = {res}         1
{txt}     Between = {res}0.2036                                         {txt}avg = {res}       7.2
{txt}     Overall = {res}0.1870                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}3{txt})      =  {res}   109.89
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6214736{col 26}{space 2} .2528202{col 37}{space 1}   -2.46{col 46}{space 3}0.014{col 54}{space 4}-1.116992{col 67}{space 3}-.1259551
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.16473{col 26}{space 2} 2.343644{col 37}{space 1}    4.34{col 46}{space 3}0.000{col 54}{space 4} 5.571275{col 67}{space 3} 14.75819
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 9.185786{col 26}{space 2} 8.942919{col 37}{space 1}    1.03{col 46}{space 3}0.304{col 54}{space 4}-8.342014{col 67}{space 3} 26.71359
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 8.094571{col 26}{space 2} 4.665199{col 37}{space 1}    1.74{col 46}{space 3}0.083{col 54}{space 4} -1.04905{col 67}{space 3} 17.23819
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 18.754565
     {txt}sigma_e {c |} {res} 26.827845
         {txt}rho {c |} {res} .32827302{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store C
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr25_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       476
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        63

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2665                                         {txt}min = {res}         1
{txt}     Between = {res}0.2733                                         {txt}avg = {res}       7.6
{txt}     Overall = {res}0.2384                                         {txt}max = {res}        13

                                                {txt}Wald chi2({res}3{txt})      =  {res}   219.70
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6550246{col 26}{space 2} .1310692{col 37}{space 1}   -5.00{col 46}{space 3}0.000{col 54}{space 4}-.9119155{col 67}{space 3}-.3981336
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.76415{col 26}{space 2} 1.085404{col 37}{space 1}    9.92{col 46}{space 3}0.000{col 54}{space 4} 8.636801{col 67}{space 3} 12.89151
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 11.99457{col 26}{space 2} 3.535731{col 37}{space 1}    3.39{col 46}{space 3}0.001{col 54}{space 4} 5.064662{col 67}{space 3} 18.92447
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 10.57784{col 26}{space 2} 5.153371{col 37}{space 1}    2.05{col 46}{space 3}0.040{col 54}{space 4} .4774191{col 67}{space 3} 20.67826
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res}  18.59713
     {txt}sigma_e {c |} {res} 24.950564
         {txt}rho {c |} {res} .35714479{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store D
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. 
. 
. esttab A B C D using table.tex, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}(output written to {browse  `"table.tex"'})

{com}. esttab A B C D using table.txt, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}(output written to {browse  `"table.txt"'})

{com}. *se keep(x2hat  x2hatsq inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
. 
. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. clear
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum won_contest1 if Type==1 & Round==1

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest1 {c |}{res}        566    .5936396    .4915878          0          1

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest1 {c |}{res}         94    .5638298    .4985681          0          1

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest1 {c |}{res}        549    .5282332    .4996575          0          1

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest1 {c |}{res}         94    .4893617    .5025672          0          1

{txt}
{com}. by contest alpha: sum won_contest2 if Type==1 & Round==2

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest2 {c |}{res}         74    .9594595    .1985695          0          1

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest2 {c |}{res}        546    .8882784    .3153125          0          1

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest2 {c |}{res}         91    .5824176    .4958928          0          1

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest2 {c |}{res}        546    .6043956    .4894285          0          1

{txt}
{com}. by contest alpha: sum Profit if Type==1

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    116.2366    46.01481          0        200

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    154.0672    48.08096          0        200

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    108.6882    46.52101          0     199.99

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    114.0094    52.76863          0     199.99

{txt}
{com}. by contest alpha: sum Profit if Type==2

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    96.46656    38.99498          0        200

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    88.59819     29.9387          0        200

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    101.6494    45.29766          0        200

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640     95.7552    46.02152          0        200

{txt}
{com}. by contest alpha: sum flexibility if Type==1

{txt}{hline}
-> contest = All Pay Auction, alpha = .25
{err}variable {bf}flexibility{sf} not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. clear
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum won_contest1 if Type==1 & Round==1

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest1 {c |}{res}        566    .5936396    .4915878          0          1

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest1 {c |}{res}         94    .5638298    .4985681          0          1

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest1 {c |}{res}        549    .5282332    .4996575          0          1

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest1 {c |}{res}         94    .4893617    .5025672          0          1

{txt}
{com}. by contest alpha: sum won_contest2 if Type==1 & Round==2

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest2 {c |}{res}         74    .9594595    .1985695          0          1

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest2 {c |}{res}        546    .8882784    .3153125          0          1

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest2 {c |}{res}         91    .5824176    .4958928          0          1

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
won_contest2 {c |}{res}        546    .6043956    .4894285          0          1

{txt}
{com}. by contest alpha: sum Profit if Type==1

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    116.2366    46.01481          0        200

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    154.0672    48.08096          0        200

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    108.6882    46.52101          0     199.99

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    114.0094    52.76863          0     199.99

{txt}
{com}. by contest alpha: sum Profit if Type==2

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    96.46656    38.99498          0        200

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    88.59819     29.9387          0        200

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640    101.6494    45.29766          0        200

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}Profit {c |}{res}        640     95.7552    46.02152          0        200

{txt}
{com}. by contest alpha: sum dissipation if Type==1

{txt}{hline}
-> contest = All Pay Auction, alpha = .25
{err}variable {bf}dissipation{sf} not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. clear all 
{res}{txt}
{com}. /*desktop directory
> cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
> */
. *laptop directory
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
. *school computer directory
. 
. *Start
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. ****************************************
. *************REPLICATION****************
. ****************************************
. 
. *******************
. ******FIGURE 1*****
. *******************
. 
. *****TREATMENTS***
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x1hat x1eq, by(contest alpha)
{res}{txt}
{com}. 
. gen time=1
{txt}
{com}. rename x1hat observed
{res}{txt}
{com}. rename x1eq equilibrium
{res}{txt}
{com}. 
. save d1, replace
{txt}{p 0 4 2}
file {bf}
d1.dta{rm}
saved
{p_end}

{com}. 
. **Step 2**
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x2hat x2eq, by(contest alpha)
{res}{txt}
{com}. 
. gen time=2
{txt}
{com}. rename x2hat observed
{res}{txt}
{com}. rename x2eq equilibrium
{res}{txt}
{com}. 
. save d2, replace
{txt}{p 0 4 2}
file {bf}
d2.dta{rm}
saved
{p_end}

{com}. 
. **Step 3**
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x12hat x12eq, by(contest alpha)
{res}{txt}
{com}. gen time=3
{txt}
{com}. rename x12hat observed
{res}{txt}
{com}. rename x12eq equilibrium
{res}{txt}
{com}. 
. save d12, replace
{txt}{p 0 4 2}
file {bf}
d12.dta{rm}
saved
{p_end}

{com}. 
. append using d1
{txt}
{com}. append using d2
{txt}
{com}. 
. gen a25=1 if alpha==0.25
{txt}(6 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(6 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(6 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(6 real changes made)

{com}. gen timeg=1 if time==1
{txt}(8 missing values generated)

{com}. replace timeg=2 if time==2
{txt}(4 real changes made)

{com}. replace timeg=3 if time==3
{txt}(4 real changes made)

{com}. 
. label var observed "Observed"
{txt}
{com}. label var equilibrium "Equilibrium"
{txt}
{com}. 
. save treatments, replace
{txt}{p 0 4 2}
file {bf}
treatments.dta{rm}
saved
{p_end}

{com}. 
. sort time
{txt}
{com}. *label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
. label define a25 0 " " 1 "alpha=0.25" 2 "0.75" 3 " "
{txt}
{com}. label define time 1 "Type A - Round 1" 2 "Type B - Round 1" 3 "Type A - Round 2"
{txt}
{com}. label val timeg time
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. format observed %9.2f
{txt}
{com}. format equilibrium %9.2f
{txt}
{com}. 
. *All Pay
. twoway scatter observed equilibrium alphag if contest=="All Pay Auction", ///
> by(timeg, cols(3) note("")) mlabel(observed equilibrium) mlabc(black black) mlabsize(medium medium) mlabposition(12 12) ///
> xlabel(0 1 2 3, valuelabel labs(medium)) connect(l l) lp(solid dash) lc(black black) mc(black black) ///
> legend(off) ylabel(0(25)50) ytitle("Expenditure") ///
> saving(fig1APA, replace)
{res}{txt}file {bf:fig1APA.gph} saved

{com}. graph use fig1APA
{res}{txt}
{com}. graph export fig1APA.pdf, replace
{txt}{p 0 4 2}
file {bf}
fig1APA.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *Lottery
. twoway scatter observed equilibrium alphag if contest=="Lottery", ///
> by(timeg , cols(3) note("")) mlabel(observed equilibrium) mlabc(black black) mlabsize(medium medium) mlabposition(12 12) ///
> xlabel(0 1 2 3, valuelabel labs(medium)) connect(l l) lp(solid dash) lc(black black) mc(black black) ///
> legend(off) ylabel(0(25)50) ytitle("Expenditure") ///
> saving(fig1Lott, replace)
{res}{txt}file {bf:fig1Lott.gph} saved

{com}. graph use fig1Lott
{res}{txt}
{com}. graph export fig1Lott.pdf, replace
{txt}{p 0 4 2}
file {bf}
fig1Lott.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 2*****
. *******************
. 
. *****HISTOGRAMS****
. clear 
{txt}
{com}. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. *Type A*
.    hist x1hat if Type==1 & lottery==0 & alpha==0.25, ///
>      xline(75) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.25") col(blue) lc(black) saving(1APA25, replace) 
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1APA25.gph} saved

{com}.    hist x1hat if Type==1 & lottery==0 & alpha==0.75, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.75") col(blue) lc(black) saving(1APA75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1APA75.gph} saved

{com}.    hist x1hat if Type==1 & lottery==1 & alpha==0.25, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.25") col(blue) lc(black) saving(1Lott25, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1Lott25.gph} saved

{com}.    hist x1hat if Type==1 & lottery==1 & alpha==0.75, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.75") col(blue) lc(black) saving(1Lott75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1Lott75.gph} saved

{com}. 
. gr combine 1APA25.gph 1APA75.gph 1Lott25.gph 1Lott75.gph, saving(1hist, replace)
{res}{txt}file {bf:1hist.gph} saved

{com}.           graph use 1hist
{res}{txt}
{com}.       graph export Fig21.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig21.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *Type B*
.    hist x2hat if Type==1 & lottery==0 & alpha==0.25, /// 
>      xline(75) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.25") col(blue) lc(black) saving(2APA25, replace) 
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2APA25.gph} saved

{com}.    hist x2hat if Type==1 & lottery==0 & alpha==0.75, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.75") col(blue) lc(black) saving(2APA75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2APA75.gph} saved

{com}.    hist x2hat if Type==1 & lottery==1 & alpha==0.25, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.25") col(blue) lc(black) saving(2Lott25, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2Lott25.gph} saved

{com}.    hist x2hat if Type==1 & lottery==1 & alpha==0.75, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.75") col(blue) lc(black) saving(2Lott75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2Lott75.gph} saved

{com}. 
. gr combine 2APA25.gph 2APA75.gph 2Lott25.gph 2Lott75.gph, saving(2hist, replace)
{res}{txt}file {bf:2hist.gph} saved

{com}.           graph use 2hist
{res}{txt}
{com}.       graph export Fig22.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig22.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 3*****
. *******************
. 
. *****BOX PLOTS*****
. clear 
{txt}
{com}.           
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. drop if periodt<11
{txt}(2,560 observations deleted)

{com}. 
. sort lottery Type alpha subjectid
{txt}
{com}. by lottery Type alpha subjectid: egen med_x=median(x)
{txt}
{com}. by lottery Type alpha subjectid: egen lqt_x = pctile(x), p(25)
{txt}
{com}. by lottery Type alpha subjectid: egen uqt_x = pctile(x), p(75)
{txt}
{com}. by lottery Type alpha subjectid: egen iqr_x = iqr(x)
{txt}
{com}. by lottery Type alpha subjectid: egen mean_x = mean(x)
{txt}
{com}. by lottery Type alpha subjectid: egen sd_x = sd(x)
{txt}(4 missing values generated)

{com}. 
. by lottery Type alpha subjectid: egen ls_x = min(max(x, lqt_x-1.5*iqr_x))
{txt}
{com}. by lottery Type alpha subjectid: egen us_x = max(min(x, uqt_x+1.5*iqr_x))
{txt}
{com}. gen coeff_var=sd_x/mean_x
{txt}(168 missing values generated)

{com}. 
. gen out_x = x if(x<=lqt_x-1.5*iqr_x | x>=uqt_x+1.5*iqr_x)
{txt}(1,594 missing values generated)

{com}. 
. sort lottery Type alpha mean_x subjectid
{txt}
{com}. egen mean_id=group(lottery Type alpha mean_x subjectid)
{txt}
{com}. 
. by lottery Type alpha: egen min_id=min(mean_id)
{txt}
{com}. gen mean_id_scale=mean_id-min_id+1
{txt}
{com}. 
. label var mean_id_scale "Subject rank (low to high mean)"
{txt}
{com}. label var x "Exp."
{txt}
{com}. 
. *LOTTERY*
. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.25 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.25", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure") ylabel(0(25)100) name(typeA_025_subj, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.25 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.25", si(medium)) yline(25, lc(blue)) ///        
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_025_subj, replace)
{res}{txt}
{com}. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.75 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeA_075_subj, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.75 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_075_subj, replace)
{res}{txt}
{com}. 
. graph combine typeA_025_subj typeA_075_subj typeB_025_subj typeB_075_subj, name(box_subj, replace)
{res}{txt}
{com}. graph export Fig3A.jpg, replace
{res}{txt}file {bf:Fig3A.jpg} written in JPEG format

{com}. 
. *ALL-PAY*
. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.25 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.25", si(medium)) yline(75, lc(blue)) ///
>                 ytitle("Expenditure") ylabel(0(25)100) name(typeA_025_subj_apa, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.25 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.25", si(medium)) yline(75, lc(blue)) ///        
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_025_subj_apa, replace)
{res}{txt}
{com}. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.75 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeA_075_subj_apa, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.75 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_075_subj_apa, replace)
{res}{txt}
{com}. 
. *graph combine typeA_025_subj typeA_075_subj typeB_025_subj typeB_075_subj, name(box_subj_apa, replace)
. *graph export box_subj_apa.jpg, replace
. 
. graph combine typeA_025_subj_apa typeA_025_subj typeA_075_subj_apa typeA_075_subj, name(box_typeA, replace)
{res}{txt}
{com}. graph export box_typeA.pdf, replace
{txt}{p 0 4 2}
file {bf}
box_typeA.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. graph combine typeB_025_subj_apa typeB_025_subj typeB_075_subj_apa typeB_075_subj, name(box_typeB, replace)
{res}{txt}
{com}. graph export Fig3B.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig3B.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 4*****
. *******************
. clear    
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. gen change=.
{txt}(5,120 missing values generated)

{com}. replace change=0 if Type==1 & x12==.
{txt}(530 real changes made)

{com}. replace change=1 if Type==1 & x12~=.
{txt}(2,030 real changes made)

{com}. 
. gen reduce=0
{txt}
{com}. replace reduce=1 if Type==1 & x12hat<x1hat
{txt}(1,065 real changes made)

{com}. 
. gen raise=0
{txt}
{com}. replace raise=1 if Type==1 & x12hat>x1hat
{txt}(965 real changes made)

{com}. 
. gen rationalrev=0
{txt}
{com}. replace rationalrev=1 if x1hat~=br1
{txt}(4,999 real changes made)

{com}. *replace rationalrev=1 if x2hat & lottery==1
. 
. gen overbid=1
{txt}
{com}. replace overbid=0 if x1hat<=br1  
{txt}(1,538 real changes made)

{com}. 
. gen underbid=0
{txt}
{com}. replace underbid=1 if x1hat<br1 
{txt}(1,417 real changes made)

{com}. 
. gen ahead=0
{txt}
{com}. replace ahead=1 if x1hat>x2hat
{txt}(2,544 real changes made)

{com}. 
. gen onedisttoother=x1hat-x2hat
{txt}
{com}. gen twodisttoother=x12hat-x2hat
{txt}
{com}. 
. gen irr_nochange=0 
{txt}
{com}. replace irr_nochange=1 if changehat==0 & rationalrev==1
{txt}(956 real changes made)

{com}. 
. gen irr_rev_dec=0
{txt}
{com}. replace irr_rev_dec=1 if irr_nochange==1
{txt}(956 real changes made)

{com}. replace irr_rev_dec=1 if changehat==1 & x1hat==br1
{txt}(17 real changes made)

{com}. 
. 
. label var rationalrev "Revising is rational"
{txt}
{com}. label var changehat "Subject revised"
{txt}
{com}. label var irr_nochange "No change even though was rational"
{txt}
{com}. 
. sort contest alpha
{txt}
{com}. collapse changehat rationalrev, by(contest alpha)
{res}{txt}
{com}. 
. sort contest
{txt}
{com}. gen low=1 if alpha==0.25
{txt}(2 missing values generated)

{com}. replace low=4 if alpha==0.75
{txt}(2 real changes made)

{com}. gen low1=2 if alpha==0.25
{txt}(2 missing values generated)

{com}. replace low1=5 if alpha==0.75
{txt}(2 real changes made)

{com}. 
. label var changehat "Actual revision"
{txt}
{com}. label var rationalrev "Rational revision"
{txt}
{com}. 
. twoway  (bar changehat low, barw(1) bcolor(blue)) ///
> (bar rationalrev low1, barw(1) bcolor(gray)), ///
> ytitle("Fraction") ylabel(0(0.2)1) xlabel(1.5 "alpha=0.25" 4.5 "alpha=0.75") by(contest, note(""))  ///
> saving(revision, replace)
{res}{txt}file {bf:revision.gph} saved

{com}. graph use revision
{res}{txt}
{com}. graph export Fig4.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig4.pdf{rm}
saved as
PDF
format
{p_end}

{com}.           
. *******************
. ******FIGURE 5*****
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. *Period >10 & <=20 & Period >30
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. keep if Type==1
{txt}(2,560 observations deleted)

{com}. keep if lottery==0
{txt}(1,280 observations deleted)

{com}. 
. *keep if changehat==1
. 
. *keep if validriskloss==1
. 
. gen a25=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(640 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(640 real changes made)

{com}. 
. label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. 
. 
. **************************
. ***(a) All observations***
. **************************
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. twoway (scatter br1 x2hat, legend(off) ms(X) mfc(none) mlc(red) msize(vlarge)) ///
> (scatter x12hat x2hat, legend(off) ms(circle) mfc(none) mlc(black) mlw(medium) ytitle("Type A - Round 2")) if lottery==0, ///
> by(alphag, note("")) saving("bra_brall", replace) 
{res}{txt}file {bf:bra_brall.gph} saved

{com}. graph use bra_brall
{res}{txt}
{com}. graph export Fig5b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig5b.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *****************************
. ***(b) Revised Expenditure***
. *****************************
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. twoway (scatter br1 x2hat if changehat==1, legend(off) ms(X) mfc(none) mlc(red) msize(vlarge)) ///
> (scatter x12hat x2hat if changehat==1, legend(off) ms(circle) mfc(none) mlc(black) mlw(medium) ytitle("Type A - Round 2")), ///
> by(alphag, note("")) saving("bra_brch", replace) 
{res}{txt}file {bf:bra_brch.gph} saved

{com}. graph use bra_brch
{res}{txt}
{com}. graph export Fig5b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig5b.pdf{rm}
saved as
PDF
format
{p_end}

{com}.   
. *******************
. ******FIGURE 6*****
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. *keep if changehat==1
. 
. *Period >10 & <=20 & Period >30
. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. keep if lottery==1
{txt}(2,560 observations deleted)

{com}. keep if Type==1
{txt}(1,280 observations deleted)

{com}. sum match2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}match2 {c |}{res}      1,280     .046875    .2114537          0          1
{txt}
{com}. 
. *gen direction=0
. *replace direction=1 if diff_br_1>diff_br_2
. *replace direction=1 if  diff_br_1==diff_br_2 & diff_br_1==0
. 
. gen outspend2=0
{txt}
{com}. replace outspend2=1 if x12hat>=x2hat
{txt}(927 real changes made)

{com}. sum outspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}outspend2 {c |}{res}      1,280    .7242188    .4470818          0          1
{txt}
{com}. gen slightoutspend2=0
{txt}
{com}. replace slightoutspend2=1 if x12hat-x2hat>=0.01 
{txt}(796 real changes made)

{com}. replace slightoutspend2=0 if x12hat-x2hat>5
{txt}(551 real changes made)

{com}. sum slightoutspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
slightouts~2 {c |}{res}      1,280    .1914063    .3935618          0          1
{txt}
{com}. 
. gen sqrtx2hat=sqrt(x2hat)
{txt}
{com}. gen x2hatsq=x2hat*x2hat
{txt}
{com}. 
. egen xjowbar=mean(xjow)
{txt}
{com}. 
. 
. *alpha=0.25
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25, i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1541                                         {txt}min = {res}         5
{txt}     Between = {res}0.0050                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.0905                                         {txt}max = {res}        16

                                                {txt}Wald chi2({res}3{txt})      =  {res}    58.02
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.5496476{col 26}{space 2} .1381015{col 37}{space 1}   -3.98{col 46}{space 3}0.000{col 54}{space 4}-.8203214{col 67}{space 3}-.2789737
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 8.503715{col 26}{space 2} 1.432925{col 37}{space 1}    5.93{col 46}{space 3}0.000{col 54}{space 4} 5.695233{col 67}{space 3}  11.3122
{txt}{space 9}inv {c |}{col 14}{res}{space 2}  8.08702{col 26}{space 2} 6.851729{col 37}{space 1}    1.18{col 46}{space 3}0.238{col 54}{space 4}-5.342123{col 67}{space 3} 21.51616
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 16.23312{col 26}{space 2} 4.363813{col 37}{space 1}    3.72{col 46}{space 3}0.000{col 54}{space 4} 7.680207{col 67}{space 3} 24.78604
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.974798
     {txt}sigma_e {c |} {res} 26.665094
         {txt}rho {c |} {res} .35944634{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.25, vce(cluster subjectid)
. est store A
{txt}
{com}. *predict xbr25 if alpha==0.25
. gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. *alpha=0.75
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2254                                         {txt}min = {res}         4
{txt}     Between = {res}0.1085                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.1848                                         {txt}max = {res}        17

                                                {txt}Wald chi2({res}3{txt})      =  {res}   254.55
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.7994133{col 26}{space 2} .1344883{col 37}{space 1}   -5.94{col 46}{space 3}0.000{col 54}{space 4}-1.063005{col 67}{space 3}-.5358212
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2}  11.4271{col 26}{space 2} 1.245723{col 37}{space 1}    9.17{col 46}{space 3}0.000{col 54}{space 4} 8.985531{col 67}{space 3} 13.86867
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 17.98433{col 26}{space 2} 1.531107{col 37}{space 1}   11.75{col 46}{space 3}0.000{col 54}{space 4} 14.98342{col 67}{space 3} 20.98525
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 11.77709{col 26}{space 2} 4.983728{col 37}{space 1}    2.36{col 46}{space 3}0.018{col 54}{space 4} 2.009159{col 67}{space 3} 21.54501
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.466571
     {txt}sigma_e {c |} {res}  25.60477
         {txt}rho {c |} {res} .36629143{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store B
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       434
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        60

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2216                                         {txt}min = {res}         1
{txt}     Between = {res}0.2036                                         {txt}avg = {res}       7.2
{txt}     Overall = {res}0.1870                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}3{txt})      =  {res}   109.89
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6214736{col 26}{space 2} .2528202{col 37}{space 1}   -2.46{col 46}{space 3}0.014{col 54}{space 4}-1.116992{col 67}{space 3}-.1259551
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.16473{col 26}{space 2} 2.343644{col 37}{space 1}    4.34{col 46}{space 3}0.000{col 54}{space 4} 5.571275{col 67}{space 3} 14.75819
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 9.185786{col 26}{space 2} 8.942919{col 37}{space 1}    1.03{col 46}{space 3}0.304{col 54}{space 4}-8.342014{col 67}{space 3} 26.71359
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 8.094571{col 26}{space 2} 4.665199{col 37}{space 1}    1.74{col 46}{space 3}0.083{col 54}{space 4} -1.04905{col 67}{space 3} 17.23819
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 18.754565
     {txt}sigma_e {c |} {res} 26.827845
         {txt}rho {c |} {res} .32827302{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store C
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr25_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       476
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        63

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2665                                         {txt}min = {res}         1
{txt}     Between = {res}0.2733                                         {txt}avg = {res}       7.6
{txt}     Overall = {res}0.2384                                         {txt}max = {res}        13

                                                {txt}Wald chi2({res}3{txt})      =  {res}   219.70
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6550246{col 26}{space 2} .1310692{col 37}{space 1}   -5.00{col 46}{space 3}0.000{col 54}{space 4}-.9119155{col 67}{space 3}-.3981336
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.76415{col 26}{space 2} 1.085404{col 37}{space 1}    9.92{col 46}{space 3}0.000{col 54}{space 4} 8.636801{col 67}{space 3} 12.89151
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 11.99457{col 26}{space 2} 3.535731{col 37}{space 1}    3.39{col 46}{space 3}0.001{col 54}{space 4} 5.064662{col 67}{space 3} 18.92447
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 10.57784{col 26}{space 2} 5.153371{col 37}{space 1}    2.05{col 46}{space 3}0.040{col 54}{space 4} .4774191{col 67}{space 3} 20.67826
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res}  18.59713
     {txt}sigma_e {c |} {res} 24.950564
         {txt}rho {c |} {res} .35714479{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store D
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. 
. 
. esttab A B C D using table.tex, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}(output written to {browse  `"table.tex"'})

{com}. esttab A B C D using table.txt, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}(output written to {browse  `"table.txt"'})

{com}. *se keep(x2hat  x2hatsq inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
. 
. gen a25=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(640 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(640 real changes made)

{com}. 
. label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. 
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. 
. sort x2hat
{txt}
{com}. *twoway (scatter x12hat x2hat) (line br1 x2hat) 
. *twoway (line xbr25 x2hat) (line xbr75 x2hat) (line br1 x2hat) 
. gen x1225=x12hat if alpha==0.25
{txt}(640 missing values generated)

{com}. gen x1275=x12hat if alpha==0.75
{txt}(640 missing values generated)

{com}. 
. **************************
. ***(a) All observations***
. **************************
. *****with the cloud of points and estimated BR****************
. twoway (line xbr25 x2hat, lwidth(thick) lp(longdash_dot) lc(black)) ///
> (line xbr75 x2hat, lwidth(thick) lp(dash) lc(black)) ///
> (line br1 x2hat, lwidth(medthick) legend(off) lc(red)) ///
> (scatter x12hat x2hat, ms(circle) mfc(none) mlc(black) mlw(medium)), /// *(line xbr25 x2hat, lwidth(thick) lp(longdash_dot)) /// *(line xbr75 x2hat, lwidth(thick) lp(dash)) ///
> text(35 80 "{c -(}bf:alpha=0.75{c )-}", color(blue)) text(52 90 "{c -(}bf:alpha=0.25{c )-}", color(blue)) text(20 70 "{c -(}bf:Risk Neutral BR{c )-}", color(blue)) ///
> ylabel(0(20)100) ytitle("Type A - Round 2") ///
> saving("brl_brall", replace)
{res}{txt}file {bf:brl_brall.gph} saved

{com}. graph use brl_brall
{res}{txt}
{com}. graph export Fig6a.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig6a.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *****************************
. ***(b) Revised Expenditure***
. *****************************
. twoway (line xbr25_rev x2hat if changehat==1, lwidth(thick) lp(longdash_dot) lc(black)) ///
> (line xbr75_rev x2hat if changehat==1, lwidth(thick) lp(dash) lc(black)) ///
> (line br1 x2hat if changehat==1, lwidth(medthick) legend(off) lc(red)) ///
> (scatter x12hat x2hat if changehat==1, ms(circle) mfc(none) mlc(black) mlw(medium)), /// *(line xbr25 x2hat, lwidth(thick) lp(longdash_dot)) /// *(line xbr75 x2hat, lwidth(thick) lp(dash)) ///
> ylabel(0(20)100) ytitle("Type A - Round 2") ///
> text(38 65 "{c -(}bf:alpha=0.75{c )-}", color(blue)) text(47 90 "{c -(}bf:alpha=0.25{c )-}", color(blue)) text(20 70 "{c -(}bf:Risk Neutral BR{c )-}", color(blue)) ///
> saving("brl_brch", replace)
{res}{txt}file {bf:brl_brch.gph} saved

{com}. graph use brl_brch
{res}{txt}
{com}. graph export Fig6b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig6b.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. 
. ***********************************************************
. ******************RESULT 1*********************************
. ***********************************************************
. 
. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat x1eq x2eq x12eq x12eq_expost changehat, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. 
. ***********************************************************
. ******************TABLES*********************************
. ***********************************************************
. 
. *******************
. ******TABLE 3******
. *******************
. 
. *******************
. ** Flexibility 1 **
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility1
{txt}(131 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    23.17737    39.56443    -71.625      99.99

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607    62.50624    31.00023     -21.75      99.99

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        610    18.78673     35.1769   -74.0925    99.2475

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        594    42.34407    31.72943     -24.75      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility , by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      1{col 26}         2{col 38}        18
    {txt}Negative {c |}{res}{col 17}      7{col 26}        34{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. 
. 
. *******************
. ** Flexibility 2 **
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility2
{txt}(66 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    32.59386    49.82583     -56.24     110.75

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607    83.22634    33.03715     -23.25        150

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        636    4.620407    30.21823        -99    99.2475

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        633     8.65904    33.57703        -80      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}         9{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        27{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         8{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        28{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.400}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1614}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1953}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. 
. 
. 
. *******************
. ** Flexibility 3 **
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility3
{txt}(66 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    32.48208    50.70538   -49.9925    99.9925

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607     77.9235    17.19528    50.0025    99.9975

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        636    3.060132    32.57224     -99.99         99

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        633    2.130161    36.65466     -99.99      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}         8{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        28{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.400}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1614}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1953}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. 
. 
. 
. *******************
. ******TABLE 4******
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. *Descriptive statistics
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat x12eq_expost changehat if Type==1

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}x12eq_expost {c |}{res}        640    34.16783    33.00237          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}x12eq_expost {c |}{res}        640     14.0663    22.95761          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}x12eq_expost {c |}{res}        640    13.29694    9.212994          0         25
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}x12eq_expost {c |}{res}        640    13.26608     9.64321          0         25
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1

{txt}
{com}. 
. ********************************************************
. ****WITHIN SESSION TYPE AND ROUND 1 & 2 COMPARISONS*****
. ********************************************************
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat x1eq x2eq x12eq x12eq_expost changehat, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x2hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        11{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        25{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:-0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        15{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        21{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:-0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        22{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        14{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. by alpha: signrank x1hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        15{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        21{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:-0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        22{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        14{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. *LOTTERY*
. by alpha: signrank x1hat=x2hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        19{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        17{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:0.140}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.8886}
{txt}{col 1}Exact prob = {res}{ralign 6:0.9453}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        10{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        26{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:-1.120}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2626}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3125}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        18{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        18{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.000}
{txt}{col 1}Prob > |z| = {res}{ralign 6:1.0000}
{txt}{col 1}Exact prob = {res}{ralign 6:1.0000}
{txt}
{com}. by alpha: signrank x1hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        27{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         9{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         3{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        33{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:-2.100}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0357}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0391}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        18{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        18{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.000}
{txt}{col 1}Prob > |z| = {res}{ralign 6:1.0000}
{txt}{col 1}Exact prob = {res}{ralign 6:1.0000}
{txt}
{com}. 
. ********************************************************
. ****WITHIN SESSION TREATMENT (25 VS. 75) COMPARISONS****
. ********************************************************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. ********************************************************
. ********FIRST CREATE PAIRED OBSERVATIONS DATASET********
. ********************************************************
. sort contest sessionid alpha
{txt}
{com}. collapse x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat, ///
> by(contest sessionid alpha)
{res}{txt}
{com}. save bid25.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25.dta
{txt}
{com}. 
. keep if alpha==0.25
{txt}(16 observations deleted)

{com}. gen x125=x1hat
{txt}
{com}. gen x225=x2hat
{txt}
{com}. gen x1225=x12hat
{txt}
{com}. gen x110025=x1100
{txt}
{com}. gen x210025=x2100
{txt}
{com}. gen x1210025=x12100
{txt}
{com}. gen x1025=x10
{txt}
{com}. gen x2025=x20
{txt}
{com}. gen x12025=x120
{txt}
{com}. gen change25=changehat
{txt}
{com}. drop  x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat
{txt}
{com}. *label var sp5 "SP Low cost"
. sort sessionid
{txt}
{com}. save bid25_1.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25_1.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25.dta
{txt}
{com}. 
. keep if alpha==0.75
{txt}(16 observations deleted)

{com}. gen x175=x1hat
{txt}
{com}. gen x275=x2hat
{txt}
{com}. gen x1275=x12hat
{txt}
{com}. gen x110075=x1100
{txt}
{com}. gen x210075=x2100
{txt}
{com}. gen x1210075=x12100
{txt}
{com}. gen x1075=x10
{txt}
{com}. gen x2075=x20
{txt}
{com}. gen x12075=x120
{txt}
{com}. gen change75=changehat
{txt}
{com}. drop  x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat
{txt}
{com}. *label var sp15 "SP High cost"
. sort sessionid
{txt}
{com}. save bid25_2.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25_2.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25_1.dta
{txt}
{com}. merge 1:1 sessionid using "bid25_2.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              16{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. save bid25.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25.dta{rm}
saved
{p_end}

{com}. 
. log using nonpara, replace
{err}log file already open
{txt}{search r(604), local:r(604);}

end of do-file

{search r(604), local:r(604);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. ********************************************************
. ********FIRST CREATE PAIRED OBSERVATIONS DATASET********
. ********************************************************
. 
. *******************
. ****alpha=0.25*****
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. 
. keep if alpha==0.25
{txt}(2,560 observations deleted)

{com}. 
. sort contest alpha sessionid Type
{txt}
{com}. collapse Profit payoff1 eq_flexibility dissipation eq_dissipation probwin1 probwin12, by(contest alpha sessionid Type)
{err}variable {bf}dissipation{sf} not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. *******************
. ******TABLE 9******
. *******************
. 
. ********************************************************
. ********FIRST CREATE PAIRED OBSERVATIONS DATASET********
. ********************************************************
. 
. *******************
. ****alpha=0.25*****
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. 
. keep if alpha==0.25
{txt}(2,560 observations deleted)

{com}. 
. sort contest alpha sessionid Type
{txt}
{com}. collapse Profit payoff1 eq_flexibility eq_dissipation probwin1 probwin12, by(contest alpha sessionid Type)
{err}variable {bf}eq_dissipation{sf} not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Soloproj.do"
{txt}
{com}. clear all 
{res}{txt}
{com}. /*desktop directory
> cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
> */
. *laptop directory
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
. *school computer directory
. 
. *Start
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. ****************************************
. *************REPLICATION****************
. ****************************************
. 
. *******************
. ******FIGURE 1*****
. *******************
. 
. *****TREATMENTS***
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x1hat x1eq, by(contest alpha)
{res}{txt}
{com}. 
. gen time=1
{txt}
{com}. rename x1hat observed
{res}{txt}
{com}. rename x1eq equilibrium
{res}{txt}
{com}. 
. save d1, replace
{txt}{p 0 4 2}
file {bf}
d1.dta{rm}
saved
{p_end}

{com}. 
. **Step 2**
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x2hat x2eq, by(contest alpha)
{res}{txt}
{com}. 
. gen time=2
{txt}
{com}. rename x2hat observed
{res}{txt}
{com}. rename x2eq equilibrium
{res}{txt}
{com}. 
. save d2, replace
{txt}{p 0 4 2}
file {bf}
d2.dta{rm}
saved
{p_end}

{com}. 
. **Step 3**
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x12hat x12eq, by(contest alpha)
{res}{txt}
{com}. gen time=3
{txt}
{com}. rename x12hat observed
{res}{txt}
{com}. rename x12eq equilibrium
{res}{txt}
{com}. 
. save d12, replace
{txt}{p 0 4 2}
file {bf}
d12.dta{rm}
saved
{p_end}

{com}. 
. append using d1
{txt}
{com}. append using d2
{txt}
{com}. 
. gen a25=1 if alpha==0.25
{txt}(6 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(6 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(6 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(6 real changes made)

{com}. gen timeg=1 if time==1
{txt}(8 missing values generated)

{com}. replace timeg=2 if time==2
{txt}(4 real changes made)

{com}. replace timeg=3 if time==3
{txt}(4 real changes made)

{com}. 
. label var observed "Observed"
{txt}
{com}. label var equilibrium "Equilibrium"
{txt}
{com}. 
. save treatments, replace
{txt}{p 0 4 2}
file {bf}
treatments.dta{rm}
saved
{p_end}

{com}. 
. sort time
{txt}
{com}. *label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
. label define a25 0 " " 1 "alpha=0.25" 2 "0.75" 3 " "
{txt}
{com}. label define time 1 "Type A - Round 1" 2 "Type B - Round 1" 3 "Type A - Round 2"
{txt}
{com}. label val timeg time
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. format observed %9.2f
{txt}
{com}. format equilibrium %9.2f
{txt}
{com}. 
. *All Pay
. twoway scatter observed equilibrium alphag if contest=="All Pay Auction", ///
> by(timeg, cols(3) note("")) mlabel(observed equilibrium) mlabc(black black) mlabsize(medium medium) mlabposition(12 12) ///
> xlabel(0 1 2 3, valuelabel labs(medium)) connect(l l) lp(solid dash) lc(black black) mc(black black) ///
> legend(off) ylabel(0(25)50) ytitle("Expenditure") ///
> saving(fig1APA, replace)
{res}{txt}file {bf:fig1APA.gph} saved

{com}. graph use fig1APA
{res}{txt}
{com}. graph export fig1APA.pdf, replace
{txt}{p 0 4 2}
file {bf}
fig1APA.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *Lottery
. twoway scatter observed equilibrium alphag if contest=="Lottery", ///
> by(timeg , cols(3) note("")) mlabel(observed equilibrium) mlabc(black black) mlabsize(medium medium) mlabposition(12 12) ///
> xlabel(0 1 2 3, valuelabel labs(medium)) connect(l l) lp(solid dash) lc(black black) mc(black black) ///
> legend(off) ylabel(0(25)50) ytitle("Expenditure") ///
> saving(fig1Lott, replace)
{res}{txt}file {bf:fig1Lott.gph} saved

{com}. graph use fig1Lott
{res}{txt}
{com}. graph export fig1Lott.pdf, replace
{txt}{p 0 4 2}
file {bf}
fig1Lott.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 2*****
. *******************
. 
. *****HISTOGRAMS****
. clear 
{txt}
{com}. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. *Type A*
.    hist x1hat if Type==1 & lottery==0 & alpha==0.25, ///
>      xline(75) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.25") col(blue) lc(black) saving(1APA25, replace) 
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1APA25.gph} saved

{com}.    hist x1hat if Type==1 & lottery==0 & alpha==0.75, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.75") col(blue) lc(black) saving(1APA75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1APA75.gph} saved

{com}.    hist x1hat if Type==1 & lottery==1 & alpha==0.25, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.25") col(blue) lc(black) saving(1Lott25, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1Lott25.gph} saved

{com}.    hist x1hat if Type==1 & lottery==1 & alpha==0.75, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.75") col(blue) lc(black) saving(1Lott75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1Lott75.gph} saved

{com}. 
. gr combine 1APA25.gph 1APA75.gph 1Lott25.gph 1Lott75.gph, saving(1hist, replace)
{res}{txt}file {bf:1hist.gph} saved

{com}.           graph use 1hist
{res}{txt}
{com}.       graph export Fig21.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig21.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *Type B*
.    hist x2hat if Type==1 & lottery==0 & alpha==0.25, /// 
>      xline(75) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.25") col(blue) lc(black) saving(2APA25, replace) 
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2APA25.gph} saved

{com}.    hist x2hat if Type==1 & lottery==0 & alpha==0.75, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.75") col(blue) lc(black) saving(2APA75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2APA75.gph} saved

{com}.    hist x2hat if Type==1 & lottery==1 & alpha==0.25, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.25") col(blue) lc(black) saving(2Lott25, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2Lott25.gph} saved

{com}.    hist x2hat if Type==1 & lottery==1 & alpha==0.75, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.75") col(blue) lc(black) saving(2Lott75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2Lott75.gph} saved

{com}. 
. gr combine 2APA25.gph 2APA75.gph 2Lott25.gph 2Lott75.gph, saving(2hist, replace)
{res}{txt}file {bf:2hist.gph} saved

{com}.           graph use 2hist
{res}{txt}
{com}.       graph export Fig22.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig22.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 3*****
. *******************
. 
. *****BOX PLOTS*****
. clear 
{txt}
{com}.           
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. drop if periodt<11
{txt}(2,560 observations deleted)

{com}. 
. sort lottery Type alpha subjectid
{txt}
{com}. by lottery Type alpha subjectid: egen med_x=median(x)
{txt}
{com}. by lottery Type alpha subjectid: egen lqt_x = pctile(x), p(25)
{txt}
{com}. by lottery Type alpha subjectid: egen uqt_x = pctile(x), p(75)
{txt}
{com}. by lottery Type alpha subjectid: egen iqr_x = iqr(x)
{txt}
{com}. by lottery Type alpha subjectid: egen mean_x = mean(x)
{txt}
{com}. by lottery Type alpha subjectid: egen sd_x = sd(x)
{txt}(4 missing values generated)

{com}. 
. by lottery Type alpha subjectid: egen ls_x = min(max(x, lqt_x-1.5*iqr_x))
{txt}
{com}. by lottery Type alpha subjectid: egen us_x = max(min(x, uqt_x+1.5*iqr_x))
{txt}
{com}. gen coeff_var=sd_x/mean_x
{txt}(168 missing values generated)

{com}. 
. gen out_x = x if(x<=lqt_x-1.5*iqr_x | x>=uqt_x+1.5*iqr_x)
{txt}(1,594 missing values generated)

{com}. 
. sort lottery Type alpha mean_x subjectid
{txt}
{com}. egen mean_id=group(lottery Type alpha mean_x subjectid)
{txt}
{com}. 
. by lottery Type alpha: egen min_id=min(mean_id)
{txt}
{com}. gen mean_id_scale=mean_id-min_id+1
{txt}
{com}. 
. label var mean_id_scale "Subject rank (low to high mean)"
{txt}
{com}. label var x "Exp."
{txt}
{com}. 
. *LOTTERY*
. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.25 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.25", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure") ylabel(0(25)100) name(typeA_025_subj, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.25 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.25", si(medium)) yline(25, lc(blue)) ///        
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_025_subj, replace)
{res}{txt}
{com}. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.75 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeA_075_subj, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.75 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_075_subj, replace)
{res}{txt}
{com}. 
. graph combine typeA_025_subj typeA_075_subj typeB_025_subj typeB_075_subj, name(box_subj, replace)
{res}{txt}
{com}. graph export Fig3A.jpg, replace
{res}{txt}file {bf:Fig3A.jpg} written in JPEG format

{com}. 
. *ALL-PAY*
. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.25 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.25", si(medium)) yline(75, lc(blue)) ///
>                 ytitle("Expenditure") ylabel(0(25)100) name(typeA_025_subj_apa, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.25 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.25", si(medium)) yline(75, lc(blue)) ///        
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_025_subj_apa, replace)
{res}{txt}
{com}. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.75 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeA_075_subj_apa, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.75 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_075_subj_apa, replace)
{res}{txt}
{com}. 
. *graph combine typeA_025_subj typeA_075_subj typeB_025_subj typeB_075_subj, name(box_subj_apa, replace)
. *graph export box_subj_apa.jpg, replace
. 
. graph combine typeA_025_subj_apa typeA_025_subj typeA_075_subj_apa typeA_075_subj, name(box_typeA, replace)
{res}{txt}
{com}. graph export box_typeA.pdf, replace
{txt}{p 0 4 2}
file {bf}
box_typeA.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. graph combine typeB_025_subj_apa typeB_025_subj typeB_075_subj_apa typeB_075_subj, name(box_typeB, replace)
{res}{txt}
{com}. graph export Fig3B.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig3B.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 4*****
. *******************
. clear    
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. gen change=.
{txt}(5,120 missing values generated)

{com}. replace change=0 if Type==1 & x12==.
{txt}(530 real changes made)

{com}. replace change=1 if Type==1 & x12~=.
{txt}(2,030 real changes made)

{com}. 
. gen reduce=0
{txt}
{com}. replace reduce=1 if Type==1 & x12hat<x1hat
{txt}(1,065 real changes made)

{com}. 
. gen raise=0
{txt}
{com}. replace raise=1 if Type==1 & x12hat>x1hat
{txt}(965 real changes made)

{com}. 
. gen rationalrev=0
{txt}
{com}. replace rationalrev=1 if x1hat~=br1
{txt}(4,999 real changes made)

{com}. *replace rationalrev=1 if x2hat & lottery==1
. 
. gen overbid=1
{txt}
{com}. replace overbid=0 if x1hat<=br1  
{txt}(1,539 real changes made)

{com}. 
. gen underbid=0
{txt}
{com}. replace underbid=1 if x1hat<br1 
{txt}(1,418 real changes made)

{com}. 
. gen ahead=0
{txt}
{com}. replace ahead=1 if x1hat>x2hat
{txt}(2,544 real changes made)

{com}. 
. gen onedisttoother=x1hat-x2hat
{txt}
{com}. gen twodisttoother=x12hat-x2hat
{txt}
{com}. 
. gen irr_nochange=0 
{txt}
{com}. replace irr_nochange=1 if changehat==0 & rationalrev==1
{txt}(956 real changes made)

{com}. 
. gen irr_rev_dec=0
{txt}
{com}. replace irr_rev_dec=1 if irr_nochange==1
{txt}(956 real changes made)

{com}. replace irr_rev_dec=1 if changehat==1 & x1hat==br1
{txt}(17 real changes made)

{com}. 
. 
. label var rationalrev "Revising is rational"
{txt}
{com}. label var changehat "Subject revised"
{txt}
{com}. label var irr_nochange "No change even though was rational"
{txt}
{com}. 
. sort contest alpha
{txt}
{com}. collapse changehat rationalrev, by(contest alpha)
{res}{txt}
{com}. 
. sort contest
{txt}
{com}. gen low=1 if alpha==0.25
{txt}(2 missing values generated)

{com}. replace low=4 if alpha==0.75
{txt}(2 real changes made)

{com}. gen low1=2 if alpha==0.25
{txt}(2 missing values generated)

{com}. replace low1=5 if alpha==0.75
{txt}(2 real changes made)

{com}. 
. label var changehat "Actual revision"
{txt}
{com}. label var rationalrev "Rational revision"
{txt}
{com}. 
. twoway  (bar changehat low, barw(1) bcolor(blue)) ///
> (bar rationalrev low1, barw(1) bcolor(gray)), ///
> ytitle("Fraction") ylabel(0(0.2)1) xlabel(1.5 "alpha=0.25" 4.5 "alpha=0.75") by(contest, note(""))  ///
> saving(revision, replace)
{res}{txt}file {bf:revision.gph} saved

{com}. graph use revision
{res}{txt}
{com}. graph export Fig4.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig4.pdf{rm}
saved as
PDF
format
{p_end}

{com}.           
. *******************
. ******FIGURE 5*****
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. *Period >10 & <=20 & Period >30
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. keep if Type==1
{txt}(2,560 observations deleted)

{com}. keep if lottery==0
{txt}(1,280 observations deleted)

{com}. 
. *keep if changehat==1
. 
. *keep if validriskloss==1
. 
. gen a25=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(640 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(640 real changes made)

{com}. 
. label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. 
. 
. **************************
. ***(a) All observations***
. **************************
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. twoway (scatter br1 x2hat, legend(off) ms(X) mfc(none) mlc(red) msize(vlarge)) ///
> (scatter x12hat x2hat, legend(off) ms(circle) mfc(none) mlc(black) mlw(medium) ytitle("Type A - Round 2")) if lottery==0, ///
> by(alphag, note("")) saving("bra_brall", replace) 
{res}{txt}file {bf:bra_brall.gph} saved

{com}. graph use bra_brall
{res}{txt}
{com}. graph export Fig5b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig5b.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *****************************
. ***(b) Revised Expenditure***
. *****************************
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. twoway (scatter br1 x2hat if changehat==1, legend(off) ms(X) mfc(none) mlc(red) msize(vlarge)) ///
> (scatter x12hat x2hat if changehat==1, legend(off) ms(circle) mfc(none) mlc(black) mlw(medium) ytitle("Type A - Round 2")), ///
> by(alphag, note("")) saving("bra_brch", replace) 
{res}{txt}file {bf:bra_brch.gph} saved

{com}. graph use bra_brch
{res}{txt}
{com}. graph export Fig5b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig5b.pdf{rm}
saved as
PDF
format
{p_end}

{com}.   
. *******************
. ******FIGURE 6*****
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. *keep if changehat==1
. 
. *Period >10 & <=20 & Period >30
. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. keep if lottery==1
{txt}(2,560 observations deleted)

{com}. keep if Type==1
{txt}(1,280 observations deleted)

{com}. sum match2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}match2 {c |}{res}      1,280     .046875    .2114537          0          1
{txt}
{com}. 
. *gen direction=0
. *replace direction=1 if diff_br_1>diff_br_2
. *replace direction=1 if  diff_br_1==diff_br_2 & diff_br_1==0
. 
. gen outspend2=0
{txt}
{com}. replace outspend2=1 if x12hat>=x2hat
{txt}(927 real changes made)

{com}. sum outspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}outspend2 {c |}{res}      1,280    .7242188    .4470818          0          1
{txt}
{com}. gen slightoutspend2=0
{txt}
{com}. replace slightoutspend2=1 if x12hat-x2hat>=0.01 
{txt}(796 real changes made)

{com}. replace slightoutspend2=0 if x12hat-x2hat>5
{txt}(551 real changes made)

{com}. sum slightoutspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
slightouts~2 {c |}{res}      1,280    .1914063    .3935618          0          1
{txt}
{com}. 
. gen sqrtx2hat=sqrt(x2hat)
{txt}
{com}. gen x2hatsq=x2hat*x2hat
{txt}
{com}. 
. egen xjowbar=mean(xjow)
{txt}
{com}. 
. 
. *alpha=0.25
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25, i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1541                                         {txt}min = {res}         5
{txt}     Between = {res}0.0050                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.0905                                         {txt}max = {res}        16

                                                {txt}Wald chi2({res}3{txt})      =  {res}    58.02
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.5496476{col 26}{space 2} .1381015{col 37}{space 1}   -3.98{col 46}{space 3}0.000{col 54}{space 4}-.8203214{col 67}{space 3}-.2789737
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 8.503715{col 26}{space 2} 1.432925{col 37}{space 1}    5.93{col 46}{space 3}0.000{col 54}{space 4} 5.695233{col 67}{space 3}  11.3122
{txt}{space 9}inv {c |}{col 14}{res}{space 2}  8.08702{col 26}{space 2} 6.851729{col 37}{space 1}    1.18{col 46}{space 3}0.238{col 54}{space 4}-5.342123{col 67}{space 3} 21.51616
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 16.23312{col 26}{space 2} 4.363813{col 37}{space 1}    3.72{col 46}{space 3}0.000{col 54}{space 4} 7.680207{col 67}{space 3} 24.78604
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.974798
     {txt}sigma_e {c |} {res} 26.665094
         {txt}rho {c |} {res} .35944634{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.25, vce(cluster subjectid)
. est store A
{txt}
{com}. *predict xbr25 if alpha==0.25
. gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. *alpha=0.75
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2254                                         {txt}min = {res}         4
{txt}     Between = {res}0.1085                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.1848                                         {txt}max = {res}        17

                                                {txt}Wald chi2({res}3{txt})      =  {res}   254.55
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.7994133{col 26}{space 2} .1344883{col 37}{space 1}   -5.94{col 46}{space 3}0.000{col 54}{space 4}-1.063005{col 67}{space 3}-.5358212
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2}  11.4271{col 26}{space 2} 1.245723{col 37}{space 1}    9.17{col 46}{space 3}0.000{col 54}{space 4} 8.985531{col 67}{space 3} 13.86867
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 17.98433{col 26}{space 2} 1.531107{col 37}{space 1}   11.75{col 46}{space 3}0.000{col 54}{space 4} 14.98342{col 67}{space 3} 20.98525
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 11.77709{col 26}{space 2} 4.983728{col 37}{space 1}    2.36{col 46}{space 3}0.018{col 54}{space 4} 2.009159{col 67}{space 3} 21.54501
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.466571
     {txt}sigma_e {c |} {res}  25.60477
         {txt}rho {c |} {res} .36629143{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store B
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       434
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        60

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2216                                         {txt}min = {res}         1
{txt}     Between = {res}0.2036                                         {txt}avg = {res}       7.2
{txt}     Overall = {res}0.1870                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}3{txt})      =  {res}   109.89
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6214736{col 26}{space 2} .2528202{col 37}{space 1}   -2.46{col 46}{space 3}0.014{col 54}{space 4}-1.116992{col 67}{space 3}-.1259551
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.16473{col 26}{space 2} 2.343644{col 37}{space 1}    4.34{col 46}{space 3}0.000{col 54}{space 4} 5.571275{col 67}{space 3} 14.75819
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 9.185786{col 26}{space 2} 8.942919{col 37}{space 1}    1.03{col 46}{space 3}0.304{col 54}{space 4}-8.342014{col 67}{space 3} 26.71359
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 8.094571{col 26}{space 2} 4.665199{col 37}{space 1}    1.74{col 46}{space 3}0.083{col 54}{space 4} -1.04905{col 67}{space 3} 17.23819
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 18.754565
     {txt}sigma_e {c |} {res} 26.827845
         {txt}rho {c |} {res} .32827302{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store C
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr25_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       476
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        63

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2665                                         {txt}min = {res}         1
{txt}     Between = {res}0.2733                                         {txt}avg = {res}       7.6
{txt}     Overall = {res}0.2384                                         {txt}max = {res}        13

                                                {txt}Wald chi2({res}3{txt})      =  {res}   219.70
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6550246{col 26}{space 2} .1310692{col 37}{space 1}   -5.00{col 46}{space 3}0.000{col 54}{space 4}-.9119155{col 67}{space 3}-.3981336
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.76415{col 26}{space 2} 1.085404{col 37}{space 1}    9.92{col 46}{space 3}0.000{col 54}{space 4} 8.636801{col 67}{space 3} 12.89151
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 11.99457{col 26}{space 2} 3.535731{col 37}{space 1}    3.39{col 46}{space 3}0.001{col 54}{space 4} 5.064662{col 67}{space 3} 18.92447
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 10.57784{col 26}{space 2} 5.153371{col 37}{space 1}    2.05{col 46}{space 3}0.040{col 54}{space 4} .4774191{col 67}{space 3} 20.67826
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res}  18.59713
     {txt}sigma_e {c |} {res} 24.950564
         {txt}rho {c |} {res} .35714479{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store D
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. 
. 
. esttab A B C D using table.tex, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}(output written to {browse  `"table.tex"'})

{com}. esttab A B C D using table.txt, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}(output written to {browse  `"table.txt"'})

{com}. *se keep(x2hat  x2hatsq inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
. 
. gen a25=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(640 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(640 real changes made)

{com}. 
. label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. 
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. 
. sort x2hat
{txt}
{com}. *twoway (scatter x12hat x2hat) (line br1 x2hat) 
. *twoway (line xbr25 x2hat) (line xbr75 x2hat) (line br1 x2hat) 
. gen x1225=x12hat if alpha==0.25
{txt}(640 missing values generated)

{com}. gen x1275=x12hat if alpha==0.75
{txt}(640 missing values generated)

{com}. 
. **************************
. ***(a) All observations***
. **************************
. *****with the cloud of points and estimated BR****************
. twoway (line xbr25 x2hat, lwidth(thick) lp(longdash_dot) lc(black)) ///
> (line xbr75 x2hat, lwidth(thick) lp(dash) lc(black)) ///
> (line br1 x2hat, lwidth(medthick) legend(off) lc(red)) ///
> (scatter x12hat x2hat, ms(circle) mfc(none) mlc(black) mlw(medium)), /// *(line xbr25 x2hat, lwidth(thick) lp(longdash_dot)) /// *(line xbr75 x2hat, lwidth(thick) lp(dash)) ///
> text(35 80 "{c -(}bf:alpha=0.75{c )-}", color(blue)) text(52 90 "{c -(}bf:alpha=0.25{c )-}", color(blue)) text(20 70 "{c -(}bf:Risk Neutral BR{c )-}", color(blue)) ///
> ylabel(0(20)100) ytitle("Type A - Round 2") ///
> saving("brl_brall", replace)
{res}{txt}file {bf:brl_brall.gph} saved

{com}. graph use brl_brall
{res}{txt}
{com}. graph export Fig6a.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig6a.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *****************************
. ***(b) Revised Expenditure***
. *****************************
. twoway (line xbr25_rev x2hat if changehat==1, lwidth(thick) lp(longdash_dot) lc(black)) ///
> (line xbr75_rev x2hat if changehat==1, lwidth(thick) lp(dash) lc(black)) ///
> (line br1 x2hat if changehat==1, lwidth(medthick) legend(off) lc(red)) ///
> (scatter x12hat x2hat if changehat==1, ms(circle) mfc(none) mlc(black) mlw(medium)), /// *(line xbr25 x2hat, lwidth(thick) lp(longdash_dot)) /// *(line xbr75 x2hat, lwidth(thick) lp(dash)) ///
> ylabel(0(20)100) ytitle("Type A - Round 2") ///
> text(38 65 "{c -(}bf:alpha=0.75{c )-}", color(blue)) text(47 90 "{c -(}bf:alpha=0.25{c )-}", color(blue)) text(20 70 "{c -(}bf:Risk Neutral BR{c )-}", color(blue)) ///
> saving("brl_brch", replace)
{res}{txt}file {bf:brl_brch.gph} saved

{com}. graph use brl_brch
{res}{txt}
{com}. graph export Fig6b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig6b.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. 
. ***********************************************************
. ******************RESULT 1*********************************
. ***********************************************************
. 
. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat x1eq x2eq x12eq x12eq_expost changehat, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. 
. ***********************************************************
. ******************TABLES*********************************
. ***********************************************************
. 
. *******************
. ******TABLE 3******
. *******************
. 
. *******************
. ** Flexibility 1 **
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility1
{txt}(131 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    23.17737    39.56443    -71.625      99.99

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607    62.50624    31.00023     -21.75      99.99

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        610    18.78673     35.1769   -74.0925    99.2475

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        594    42.34407    31.72943     -24.75      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility , by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      1{col 26}         2{col 38}        18
    {txt}Negative {c |}{res}{col 17}      7{col 26}        34{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. 
. 
. *******************
. ** Flexibility 2 **
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility2
{txt}(66 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    32.59386    49.82583     -56.24     110.75

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607    83.22634    33.03715     -23.25        150

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        636    4.620407    30.21823        -99    99.2475

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        633     8.65904    33.57703        -80      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        33{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         3{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.100}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0357}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0391}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}         9{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        27{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         8{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        28{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.400}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1614}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1953}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. 
. 
. 
. *******************
. ** Flexibility 3 **
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility3
{txt}(66 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    32.48208    50.70538   -49.9925    99.9925

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607     77.9235    17.19528    50.0025    99.9975

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        636    3.060132    32.57224     -99.99         99

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        633    2.130161    36.65466     -99.99      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}         8{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        28{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.400}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1614}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1953}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. 
. 
. 
. *******************
. ******TABLE 4******
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. *Descriptive statistics
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat x12eq_expost changehat if Type==1

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}x12eq_expost {c |}{res}        640    34.32408    33.07699          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}x12eq_expost {c |}{res}        640    13.91005     22.7108          0      99.01
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}x12eq_expost {c |}{res}        640    13.29694    9.212994          0         25
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}x12eq_expost {c |}{res}        640    13.26608     9.64321          0         25
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1

{txt}
{com}. 
. ********************************************************
. ****WITHIN SESSION TYPE AND ROUND 1 & 2 COMPARISONS*****
. ********************************************************
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat x1eq x2eq x12eq x12eq_expost changehat, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x2hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        11{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        25{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:-0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        15{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        21{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:-0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        22{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        14{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. by alpha: signrank x1hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        15{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        21{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:-0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        22{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        14{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. *LOTTERY*
. by alpha: signrank x1hat=x2hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        19{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        17{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:0.140}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.8886}
{txt}{col 1}Exact prob = {res}{ralign 6:0.9453}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        10{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        26{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:-1.120}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2626}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3125}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        18{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        18{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.000}
{txt}{col 1}Prob > |z| = {res}{ralign 6:1.0000}
{txt}{col 1}Exact prob = {res}{ralign 6:1.0000}
{txt}
{com}. by alpha: signrank x1hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        27{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         9{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         3{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        33{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:-2.100}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0357}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0391}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        18{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        18{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.000}
{txt}{col 1}Prob > |z| = {res}{ralign 6:1.0000}
{txt}{col 1}Exact prob = {res}{ralign 6:1.0000}
{txt}
{com}. 
. ********************************************************
. ****WITHIN SESSION TREATMENT (25 VS. 75) COMPARISONS****
. ********************************************************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. ********************************************************
. ********FIRST CREATE PAIRED OBSERVATIONS DATASET********
. ********************************************************
. sort contest sessionid alpha
{txt}
{com}. collapse x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat, ///
> by(contest sessionid alpha)
{res}{txt}
{com}. save bid25.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25.dta
{txt}
{com}. 
. keep if alpha==0.25
{txt}(16 observations deleted)

{com}. gen x125=x1hat
{txt}
{com}. gen x225=x2hat
{txt}
{com}. gen x1225=x12hat
{txt}
{com}. gen x110025=x1100
{txt}
{com}. gen x210025=x2100
{txt}
{com}. gen x1210025=x12100
{txt}
{com}. gen x1025=x10
{txt}
{com}. gen x2025=x20
{txt}
{com}. gen x12025=x120
{txt}
{com}. gen change25=changehat
{txt}
{com}. drop  x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat
{txt}
{com}. *label var sp5 "SP Low cost"
. sort sessionid
{txt}
{com}. save bid25_1.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25_1.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25.dta
{txt}
{com}. 
. keep if alpha==0.75
{txt}(16 observations deleted)

{com}. gen x175=x1hat
{txt}
{com}. gen x275=x2hat
{txt}
{com}. gen x1275=x12hat
{txt}
{com}. gen x110075=x1100
{txt}
{com}. gen x210075=x2100
{txt}
{com}. gen x1210075=x12100
{txt}
{com}. gen x1075=x10
{txt}
{com}. gen x2075=x20
{txt}
{com}. gen x12075=x120
{txt}
{com}. gen change75=changehat
{txt}
{com}. drop  x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat
{txt}
{com}. *label var sp15 "SP High cost"
. sort sessionid
{txt}
{com}. save bid25_2.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25_2.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25_1.dta
{txt}
{com}. merge 1:1 sessionid using "bid25_2.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              16{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. save bid25.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25.dta{rm}
saved
{p_end}

{com}. 
. log using nonpara, replace
{err}log file already open
{txt}{search r(604), local:r(604);}

end of do-file

{search r(604), local:r(604);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. do mergeriskpref.do
{txt}
{com}. 
. *session 1
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session1_Lottery_75_25_Friday_04_08_11_30.dta"
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(672 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session1.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session1.dta{rm}
saved
{p_end}

{com}. 
. *session2
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(1,008 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session2.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session2.dta{rm}
saved
{p_end}

{com}. 
. *session3
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(336 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session3.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session3.dta{rm}
saved
{p_end}

{com}. 
. *session4
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session4_Lottery_25_75_Saturday_04_09_1_15.dta" 
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(672 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session4.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session4.dta{rm}
saved
{p_end}

{com}. 
. *session5
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session5_Lottery_25_75_Saturday_04_09_3_30.dta" 
{txt}
{com}. 
. 
. drop if RiskLine1==.
{txt}(672 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session5.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session5.dta{rm}
saved
{p_end}

{com}. 
. *session6
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session6_Lottery_75_25_Sunday_04_10_11_30.dta"  
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(672 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session6.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session6.dta{rm}
saved
{p_end}

{com}. 
. *session7
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session7_AllPay_25_75_Sunday_04_10_1_45.dta" 
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(672 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session7.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session7.dta{rm}
saved
{p_end}

{com}. 
. *session8
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session8_AllPay_25_75_Sunday_04_10_4_00.dta"  
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(672 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session8.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session8.dta{rm}
saved
{p_end}

{com}. 
. **Merging with main Ds
. 
. *.do file that came with dataset
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas
{txt}
{com}. 
. merge m:1 session Subject using Session1.dta
{res}{err}{p 0 4 2}
variable{err}s{err} session
Subject
do not uniquely identify observations in the
using data
{p_end}
{txt}{search r(459), local:r(459);}

end of do-file
{search r(459), local:r(459);}

end of do-file

{search r(459), local:r(459);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{err}{p 0 4 2}
file {bf:{err}Contests with Revisions Replication files\Stata do files\var_definitions.do}
not found
{p_end}
{txt}{search r(601), local:r(601);}

end of do-file

{search r(601), local:r(601);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. clear 
{txt}
{com}. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{err}{p 0 4 2}
file {bf:{err}Contests with Revisions Replication files\Stata do files\var_definitions.do}
not found
{p_end}
{txt}{search r(601), local:r(601);}

end of do-file

{search r(601), local:r(601);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. clear 
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Soloproj.do"
{txt}
{com}. clear all 
{res}{txt}
{com}. /*desktop directory
> cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
> */
. *laptop directory
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
. *school computer directory
. 
. *Start
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. ****************************************
. *************REPLICATION****************
. ****************************************
. 
. *******************
. ******FIGURE 1*****
. *******************
. 
. *****TREATMENTS***
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x1hat x1eq, by(contest alpha)
{res}{txt}
{com}. 
. gen time=1
{txt}
{com}. rename x1hat observed
{res}{txt}
{com}. rename x1eq equilibrium
{res}{txt}
{com}. 
. save d1, replace
{txt}{p 0 4 2}
file {bf}
d1.dta{rm}
saved
{p_end}

{com}. 
. **Step 2**
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x2hat x2eq, by(contest alpha)
{res}{txt}
{com}. 
. gen time=2
{txt}
{com}. rename x2hat observed
{res}{txt}
{com}. rename x2eq equilibrium
{res}{txt}
{com}. 
. save d2, replace
{txt}{p 0 4 2}
file {bf}
d2.dta{rm}
saved
{p_end}

{com}. 
. **Step 3**
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(8 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(2 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x12hat x12eq, by(contest alpha)
{res}{txt}
{com}. gen time=3
{txt}
{com}. rename x12hat observed
{res}{txt}
{com}. rename x12eq equilibrium
{res}{txt}
{com}. 
. save d12, replace
{txt}{p 0 4 2}
file {bf}
d12.dta{rm}
saved
{p_end}

{com}. 
. append using d1
{txt}
{com}. append using d2
{txt}
{com}. 
. gen a25=1 if alpha==0.25
{txt}(6 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(6 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(6 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(6 real changes made)

{com}. gen timeg=1 if time==1
{txt}(8 missing values generated)

{com}. replace timeg=2 if time==2
{txt}(4 real changes made)

{com}. replace timeg=3 if time==3
{txt}(4 real changes made)

{com}. 
. label var observed "Observed"
{txt}
{com}. label var equilibrium "Equilibrium"
{txt}
{com}. 
. save treatments, replace
{txt}{p 0 4 2}
file {bf}
treatments.dta{rm}
saved
{p_end}

{com}. 
. sort time
{txt}
{com}. *label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
. label define a25 0 " " 1 "alpha=0.25" 2 "0.75" 3 " "
{txt}
{com}. label define time 1 "Type A - Round 1" 2 "Type B - Round 1" 3 "Type A - Round 2"
{txt}
{com}. label val timeg time
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. format observed %9.2f
{txt}
{com}. format equilibrium %9.2f
{txt}
{com}. 
. *All Pay
. twoway scatter observed equilibrium alphag if contest=="All Pay Auction", ///
> by(timeg, cols(3) note("")) mlabel(observed equilibrium) mlabc(black black) mlabsize(medium medium) mlabposition(12 12) ///
> xlabel(0 1 2 3, valuelabel labs(medium)) connect(l l) lp(solid dash) lc(black black) mc(black black) ///
> legend(off) ylabel(0(25)50) ytitle("Expenditure") ///
> saving(fig1APA, replace)
{res}{txt}file {bf:fig1APA.gph} saved

{com}. graph use fig1APA
{res}{txt}
{com}. graph export fig1APA.pdf, replace
{txt}{p 0 4 2}
file {bf}
fig1APA.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *Lottery
. twoway scatter observed equilibrium alphag if contest=="Lottery", ///
> by(timeg , cols(3) note("")) mlabel(observed equilibrium) mlabc(black black) mlabsize(medium medium) mlabposition(12 12) ///
> xlabel(0 1 2 3, valuelabel labs(medium)) connect(l l) lp(solid dash) lc(black black) mc(black black) ///
> legend(off) ylabel(0(25)50) ytitle("Expenditure") ///
> saving(fig1Lott, replace)
{res}{txt}file {bf:fig1Lott.gph} saved

{com}. graph use fig1Lott
{res}{txt}
{com}. graph export fig1Lott.pdf, replace
{txt}{p 0 4 2}
file {bf}
fig1Lott.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 2*****
. *******************
. 
. *****HISTOGRAMS****
. clear 
{txt}
{com}. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. *Type A*
.    hist x1hat if Type==1 & lottery==0 & alpha==0.25, ///
>      xline(75) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.25") col(blue) lc(black) saving(1APA25, replace) 
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1APA25.gph} saved

{com}.    hist x1hat if Type==1 & lottery==0 & alpha==0.75, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.75") col(blue) lc(black) saving(1APA75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1APA75.gph} saved

{com}.    hist x1hat if Type==1 & lottery==1 & alpha==0.25, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.25") col(blue) lc(black) saving(1Lott25, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1Lott25.gph} saved

{com}.    hist x1hat if Type==1 & lottery==1 & alpha==0.75, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.75") col(blue) lc(black) saving(1Lott75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1Lott75.gph} saved

{com}. 
. gr combine 1APA25.gph 1APA75.gph 1Lott25.gph 1Lott75.gph, saving(1hist, replace)
{res}{txt}file {bf:1hist.gph} saved

{com}.           graph use 1hist
{res}{txt}
{com}.       graph export Fig21.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig21.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *Type B*
.    hist x2hat if Type==1 & lottery==0 & alpha==0.25, /// 
>      xline(75) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.25") col(blue) lc(black) saving(2APA25, replace) 
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2APA25.gph} saved

{com}.    hist x2hat if Type==1 & lottery==0 & alpha==0.75, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.75") col(blue) lc(black) saving(2APA75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2APA75.gph} saved

{com}.    hist x2hat if Type==1 & lottery==1 & alpha==0.25, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.25") col(blue) lc(black) saving(2Lott25, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2Lott25.gph} saved

{com}.    hist x2hat if Type==1 & lottery==1 & alpha==0.75, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.75") col(blue) lc(black) saving(2Lott75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2Lott75.gph} saved

{com}. 
. gr combine 2APA25.gph 2APA75.gph 2Lott25.gph 2Lott75.gph, saving(2hist, replace)
{res}{txt}file {bf:2hist.gph} saved

{com}.           graph use 2hist
{res}{txt}
{com}.       graph export Fig22.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig22.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 3*****
. *******************
. 
. *****BOX PLOTS*****
. clear 
{txt}
{com}.           
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. drop if periodt<11
{txt}(2,560 observations deleted)

{com}. 
. sort lottery Type alpha subjectid
{txt}
{com}. by lottery Type alpha subjectid: egen med_x=median(x)
{txt}
{com}. by lottery Type alpha subjectid: egen lqt_x = pctile(x), p(25)
{txt}
{com}. by lottery Type alpha subjectid: egen uqt_x = pctile(x), p(75)
{txt}
{com}. by lottery Type alpha subjectid: egen iqr_x = iqr(x)
{txt}
{com}. by lottery Type alpha subjectid: egen mean_x = mean(x)
{txt}
{com}. by lottery Type alpha subjectid: egen sd_x = sd(x)
{txt}(4 missing values generated)

{com}. 
. by lottery Type alpha subjectid: egen ls_x = min(max(x, lqt_x-1.5*iqr_x))
{txt}
{com}. by lottery Type alpha subjectid: egen us_x = max(min(x, uqt_x+1.5*iqr_x))
{txt}
{com}. gen coeff_var=sd_x/mean_x
{txt}(168 missing values generated)

{com}. 
. gen out_x = x if(x<=lqt_x-1.5*iqr_x | x>=uqt_x+1.5*iqr_x)
{txt}(1,594 missing values generated)

{com}. 
. sort lottery Type alpha mean_x subjectid
{txt}
{com}. egen mean_id=group(lottery Type alpha mean_x subjectid)
{txt}
{com}. 
. by lottery Type alpha: egen min_id=min(mean_id)
{txt}
{com}. gen mean_id_scale=mean_id-min_id+1
{txt}
{com}. 
. label var mean_id_scale "Subject rank (low to high mean)"
{txt}
{com}. label var x "Exp."
{txt}
{com}. 
. *LOTTERY*
. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.25 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.25", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure") ylabel(0(25)100) name(typeA_025_subj, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.25 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.25", si(medium)) yline(25, lc(blue)) ///        
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_025_subj, replace)
{res}{txt}
{com}. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.75 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeA_075_subj, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.75 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_075_subj, replace)
{res}{txt}
{com}. 
. graph combine typeA_025_subj typeA_075_subj typeB_025_subj typeB_075_subj, name(box_subj, replace)
{res}{txt}
{com}. graph export Fig3A.jpg, replace
{res}{txt}file {bf:Fig3A.jpg} written in JPEG format

{com}. 
. *ALL-PAY*
. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.25 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.25", si(medium)) yline(75, lc(blue)) ///
>                 ytitle("Expenditure") ylabel(0(25)100) name(typeA_025_subj_apa, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.25 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.25", si(medium)) yline(75, lc(blue)) ///        
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_025_subj_apa, replace)
{res}{txt}
{com}. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.75 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeA_075_subj_apa, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.75 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_075_subj_apa, replace)
{res}{txt}
{com}. 
. *graph combine typeA_025_subj typeA_075_subj typeB_025_subj typeB_075_subj, name(box_subj_apa, replace)
. *graph export box_subj_apa.jpg, replace
. 
. graph combine typeA_025_subj_apa typeA_025_subj typeA_075_subj_apa typeA_075_subj, name(box_typeA, replace)
{res}{txt}
{com}. graph export box_typeA.pdf, replace
{txt}{p 0 4 2}
file {bf}
box_typeA.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. graph combine typeB_025_subj_apa typeB_025_subj typeB_075_subj_apa typeB_075_subj, name(box_typeB, replace)
{res}{txt}
{com}. graph export Fig3B.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig3B.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 4*****
. *******************
. clear    
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. gen change=.
{txt}(5,120 missing values generated)

{com}. replace change=0 if Type==1 & x12==.
{txt}(530 real changes made)

{com}. replace change=1 if Type==1 & x12~=.
{txt}(2,030 real changes made)

{com}. 
. gen reduce=0
{txt}
{com}. replace reduce=1 if Type==1 & x12hat<x1hat
{txt}(1,065 real changes made)

{com}. 
. gen raise=0
{txt}
{com}. replace raise=1 if Type==1 & x12hat>x1hat
{txt}(965 real changes made)

{com}. 
. gen rationalrev=0
{txt}
{com}. replace rationalrev=1 if x1hat~=br1
{txt}(4,998 real changes made)

{com}. *replace rationalrev=1 if x2hat & lottery==1
. 
. gen overbid=1
{txt}
{com}. replace overbid=0 if x1hat<=br1  
{txt}(1,542 real changes made)

{com}. 
. gen underbid=0
{txt}
{com}. replace underbid=1 if x1hat<br1 
{txt}(1,420 real changes made)

{com}. 
. gen ahead=0
{txt}
{com}. replace ahead=1 if x1hat>x2hat
{txt}(2,544 real changes made)

{com}. 
. gen onedisttoother=x1hat-x2hat
{txt}
{com}. gen twodisttoother=x12hat-x2hat
{txt}
{com}. 
. gen irr_nochange=0 
{txt}
{com}. replace irr_nochange=1 if changehat==0 & rationalrev==1
{txt}(956 real changes made)

{com}. 
. gen irr_rev_dec=0
{txt}
{com}. replace irr_rev_dec=1 if irr_nochange==1
{txt}(956 real changes made)

{com}. replace irr_rev_dec=1 if changehat==1 & x1hat==br1
{txt}(18 real changes made)

{com}. 
. 
. label var rationalrev "Revising is rational"
{txt}
{com}. label var changehat "Subject revised"
{txt}
{com}. label var irr_nochange "No change even though was rational"
{txt}
{com}. 
. sort contest alpha
{txt}
{com}. collapse changehat rationalrev, by(contest alpha)
{res}{txt}
{com}. 
. sort contest
{txt}
{com}. gen low=1 if alpha==0.25
{txt}(2 missing values generated)

{com}. replace low=4 if alpha==0.75
{txt}(2 real changes made)

{com}. gen low1=2 if alpha==0.25
{txt}(2 missing values generated)

{com}. replace low1=5 if alpha==0.75
{txt}(2 real changes made)

{com}. 
. label var changehat "Actual revision"
{txt}
{com}. label var rationalrev "Rational revision"
{txt}
{com}. 
. twoway  (bar changehat low, barw(1) bcolor(blue)) ///
> (bar rationalrev low1, barw(1) bcolor(gray)), ///
> ytitle("Fraction") ylabel(0(0.2)1) xlabel(1.5 "alpha=0.25" 4.5 "alpha=0.75") by(contest, note(""))  ///
> saving(revision, replace)
{res}{txt}file {bf:revision.gph} saved

{com}. graph use revision
{res}{txt}
{com}. graph export Fig4.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig4.pdf{rm}
saved as
PDF
format
{p_end}

{com}.           
. *******************
. ******FIGURE 5*****
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. *Period >10 & <=20 & Period >30
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. keep if Type==1
{txt}(2,560 observations deleted)

{com}. keep if lottery==0
{txt}(1,280 observations deleted)

{com}. 
. *keep if changehat==1
. 
. *keep if validriskloss==1
. 
. gen a25=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(640 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(640 real changes made)

{com}. 
. label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. 
. 
. **************************
. ***(a) All observations***
. **************************
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. twoway (scatter br1 x2hat, legend(off) ms(X) mfc(none) mlc(red) msize(vlarge)) ///
> (scatter x12hat x2hat, legend(off) ms(circle) mfc(none) mlc(black) mlw(medium) ytitle("Type A - Round 2")) if lottery==0, ///
> by(alphag, note("")) saving("bra_brall", replace) 
{res}{txt}file {bf:bra_brall.gph} saved

{com}. graph use bra_brall
{res}{txt}
{com}. graph export Fig5b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig5b.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *****************************
. ***(b) Revised Expenditure***
. *****************************
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. twoway (scatter br1 x2hat if changehat==1, legend(off) ms(X) mfc(none) mlc(red) msize(vlarge)) ///
> (scatter x12hat x2hat if changehat==1, legend(off) ms(circle) mfc(none) mlc(black) mlw(medium) ytitle("Type A - Round 2")), ///
> by(alphag, note("")) saving("bra_brch", replace) 
{res}{txt}file {bf:bra_brch.gph} saved

{com}. graph use bra_brch
{res}{txt}
{com}. graph export Fig5b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig5b.pdf{rm}
saved as
PDF
format
{p_end}

{com}.   
. *******************
. ******FIGURE 6*****
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(8 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(2 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. *keep if changehat==1
. 
. *Period >10 & <=20 & Period >30
. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. keep if lottery==1
{txt}(2,560 observations deleted)

{com}. keep if Type==1
{txt}(1,280 observations deleted)

{com}. sum match2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}match2 {c |}{res}      1,280     .046875    .2114537          0          1
{txt}
{com}. 
. *gen direction=0
. *replace direction=1 if diff_br_1>diff_br_2
. *replace direction=1 if  diff_br_1==diff_br_2 & diff_br_1==0
. 
. gen outspend2=0
{txt}
{com}. replace outspend2=1 if x12hat>=x2hat
{txt}(927 real changes made)

{com}. sum outspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}outspend2 {c |}{res}      1,280    .7242188    .4470818          0          1
{txt}
{com}. gen slightoutspend2=0
{txt}
{com}. replace slightoutspend2=1 if x12hat-x2hat>=0.01 
{txt}(796 real changes made)

{com}. replace slightoutspend2=0 if x12hat-x2hat>5
{txt}(551 real changes made)

{com}. sum slightoutspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
slightouts~2 {c |}{res}      1,280    .1914063    .3935618          0          1
{txt}
{com}. 
. gen sqrtx2hat=sqrt(x2hat)
{txt}
{com}. gen x2hatsq=x2hat*x2hat
{txt}
{com}. 
. egen xjowbar=mean(xjow)
{txt}
{com}. 
. 
. *alpha=0.25
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25, i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1541                                         {txt}min = {res}         5
{txt}     Between = {res}0.0050                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.0905                                         {txt}max = {res}        16

                                                {txt}Wald chi2({res}3{txt})      =  {res}    58.02
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.5496476{col 26}{space 2} .1381015{col 37}{space 1}   -3.98{col 46}{space 3}0.000{col 54}{space 4}-.8203214{col 67}{space 3}-.2789737
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 8.503715{col 26}{space 2} 1.432925{col 37}{space 1}    5.93{col 46}{space 3}0.000{col 54}{space 4} 5.695233{col 67}{space 3}  11.3122
{txt}{space 9}inv {c |}{col 14}{res}{space 2}  8.08702{col 26}{space 2} 6.851729{col 37}{space 1}    1.18{col 46}{space 3}0.238{col 54}{space 4}-5.342123{col 67}{space 3} 21.51616
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 16.23312{col 26}{space 2} 4.363813{col 37}{space 1}    3.72{col 46}{space 3}0.000{col 54}{space 4} 7.680207{col 67}{space 3} 24.78604
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.974798
     {txt}sigma_e {c |} {res} 26.665094
         {txt}rho {c |} {res} .35944634{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.25, vce(cluster subjectid)
. est store A
{txt}
{com}. *predict xbr25 if alpha==0.25
. gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. *alpha=0.75
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2254                                         {txt}min = {res}         4
{txt}     Between = {res}0.1085                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.1848                                         {txt}max = {res}        17

                                                {txt}Wald chi2({res}3{txt})      =  {res}   254.55
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.7994133{col 26}{space 2} .1344883{col 37}{space 1}   -5.94{col 46}{space 3}0.000{col 54}{space 4}-1.063005{col 67}{space 3}-.5358212
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2}  11.4271{col 26}{space 2} 1.245723{col 37}{space 1}    9.17{col 46}{space 3}0.000{col 54}{space 4} 8.985531{col 67}{space 3} 13.86867
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 17.98433{col 26}{space 2} 1.531107{col 37}{space 1}   11.75{col 46}{space 3}0.000{col 54}{space 4} 14.98342{col 67}{space 3} 20.98525
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 11.77709{col 26}{space 2} 4.983728{col 37}{space 1}    2.36{col 46}{space 3}0.018{col 54}{space 4} 2.009159{col 67}{space 3} 21.54501
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.466571
     {txt}sigma_e {c |} {res}  25.60477
         {txt}rho {c |} {res} .36629143{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store B
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       434
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        60

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2216                                         {txt}min = {res}         1
{txt}     Between = {res}0.2036                                         {txt}avg = {res}       7.2
{txt}     Overall = {res}0.1870                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}3{txt})      =  {res}   109.89
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6214736{col 26}{space 2} .2528202{col 37}{space 1}   -2.46{col 46}{space 3}0.014{col 54}{space 4}-1.116992{col 67}{space 3}-.1259551
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.16473{col 26}{space 2} 2.343644{col 37}{space 1}    4.34{col 46}{space 3}0.000{col 54}{space 4} 5.571275{col 67}{space 3} 14.75819
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 9.185786{col 26}{space 2} 8.942919{col 37}{space 1}    1.03{col 46}{space 3}0.304{col 54}{space 4}-8.342014{col 67}{space 3} 26.71359
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 8.094571{col 26}{space 2} 4.665199{col 37}{space 1}    1.74{col 46}{space 3}0.083{col 54}{space 4} -1.04905{col 67}{space 3} 17.23819
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 18.754565
     {txt}sigma_e {c |} {res} 26.827845
         {txt}rho {c |} {res} .32827302{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store C
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr25_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       476
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        63

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2665                                         {txt}min = {res}         1
{txt}     Between = {res}0.2733                                         {txt}avg = {res}       7.6
{txt}     Overall = {res}0.2384                                         {txt}max = {res}        13

                                                {txt}Wald chi2({res}3{txt})      =  {res}   219.70
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6550246{col 26}{space 2} .1310692{col 37}{space 1}   -5.00{col 46}{space 3}0.000{col 54}{space 4}-.9119155{col 67}{space 3}-.3981336
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.76415{col 26}{space 2} 1.085404{col 37}{space 1}    9.92{col 46}{space 3}0.000{col 54}{space 4} 8.636801{col 67}{space 3} 12.89151
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 11.99457{col 26}{space 2} 3.535731{col 37}{space 1}    3.39{col 46}{space 3}0.001{col 54}{space 4} 5.064662{col 67}{space 3} 18.92447
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 10.57784{col 26}{space 2} 5.153371{col 37}{space 1}    2.05{col 46}{space 3}0.040{col 54}{space 4} .4774191{col 67}{space 3} 20.67826
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res}  18.59713
     {txt}sigma_e {c |} {res} 24.950564
         {txt}rho {c |} {res} .35714479{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store D
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. 
. 
. esttab A B C D using table.tex, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}(output written to {browse  `"table.tex"'})

{com}. esttab A B C D using table.txt, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}(output written to {browse  `"table.txt"'})

{com}. *se keep(x2hat  x2hatsq inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
. 
. gen a25=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(640 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(640 real changes made)

{com}. 
. label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. 
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. 
. sort x2hat
{txt}
{com}. *twoway (scatter x12hat x2hat) (line br1 x2hat) 
. *twoway (line xbr25 x2hat) (line xbr75 x2hat) (line br1 x2hat) 
. gen x1225=x12hat if alpha==0.25
{txt}(640 missing values generated)

{com}. gen x1275=x12hat if alpha==0.75
{txt}(640 missing values generated)

{com}. 
. **************************
. ***(a) All observations***
. **************************
. *****with the cloud of points and estimated BR****************
. twoway (line xbr25 x2hat, lwidth(thick) lp(longdash_dot) lc(black)) ///
> (line xbr75 x2hat, lwidth(thick) lp(dash) lc(black)) ///
> (line br1 x2hat, lwidth(medthick) legend(off) lc(red)) ///
> (scatter x12hat x2hat, ms(circle) mfc(none) mlc(black) mlw(medium)), /// *(line xbr25 x2hat, lwidth(thick) lp(longdash_dot)) /// *(line xbr75 x2hat, lwidth(thick) lp(dash)) ///
> text(35 80 "{c -(}bf:alpha=0.75{c )-}", color(blue)) text(52 90 "{c -(}bf:alpha=0.25{c )-}", color(blue)) text(20 70 "{c -(}bf:Risk Neutral BR{c )-}", color(blue)) ///
> ylabel(0(20)100) ytitle("Type A - Round 2") ///
> saving("brl_brall", replace)
{res}{txt}file {bf:brl_brall.gph} saved

{com}. graph use brl_brall
{res}{txt}
{com}. graph export Fig6a.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig6a.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *****************************
. ***(b) Revised Expenditure***
. *****************************
. twoway (line xbr25_rev x2hat if changehat==1, lwidth(thick) lp(longdash_dot) lc(black)) ///
> (line xbr75_rev x2hat if changehat==1, lwidth(thick) lp(dash) lc(black)) ///
> (line br1 x2hat if changehat==1, lwidth(medthick) legend(off) lc(red)) ///
> (scatter x12hat x2hat if changehat==1, ms(circle) mfc(none) mlc(black) mlw(medium)), /// *(line xbr25 x2hat, lwidth(thick) lp(longdash_dot)) /// *(line xbr75 x2hat, lwidth(thick) lp(dash)) ///
> ylabel(0(20)100) ytitle("Type A - Round 2") ///
> text(38 65 "{c -(}bf:alpha=0.75{c )-}", color(blue)) text(47 90 "{c -(}bf:alpha=0.25{c )-}", color(blue)) text(20 70 "{c -(}bf:Risk Neutral BR{c )-}", color(blue)) ///
> saving("brl_brch", replace)
{res}{txt}file {bf:brl_brch.gph} saved

{com}. graph use brl_brch
{res}{txt}
{com}. graph export Fig6b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig6b.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. 
. ***********************************************************
. ******************RESULT 1*********************************
. ***********************************************************
. 
. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat x1eq x2eq x12eq x12eq_expost changehat, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. 
. ***********************************************************
. ******************TABLES*********************************
. ***********************************************************
. 
. *******************
. ******TABLE 3******
. *******************
. 
. *******************
. ** Flexibility 1 **
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility1
{txt}(131 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    23.17737    39.56443    -71.625      99.99

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607    62.50624    31.00023     -21.75      99.99

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        610    18.78673     35.1769   -74.0925    99.2475

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        594    42.34407    31.72943     -24.75      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility , by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      1{col 26}         2{col 38}        18
    {txt}Negative {c |}{res}{col 17}      7{col 26}        34{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. 
. 
. *******************
. ** Flexibility 2 **
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility2
{txt}(66 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    32.59386    49.82583     -56.24     110.75

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607    83.22634    33.03715     -23.25        150

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        636    4.620407    30.21823        -99    99.2475

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        633     8.65904    33.57703        -80      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}         9{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        27{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         8{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        28{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.400}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1614}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1953}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. 
. 
. 
. *******************
. ** Flexibility 3 **
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility3
{txt}(66 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    32.48208    50.70538   -49.9925    99.9925

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607     77.9235    17.19528    50.0025    99.9975

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        636    3.060132    32.57224     -99.99         99

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        633    2.130161    36.65466     -99.99      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}         8{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        28{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.400}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1614}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1953}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. 
. 
. 
. *******************
. ******TABLE 4******
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. *Descriptive statistics
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat x12eq_expost changehat if Type==1

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}x12eq_expost {c |}{res}        640    34.16783    33.00237          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}x12eq_expost {c |}{res}        640     14.0663    22.95761          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}x12eq_expost {c |}{res}        640    13.29694    9.212994          0         25
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}x12eq_expost {c |}{res}        640    13.26608     9.64321          0         25
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1

{txt}
{com}. 
. ********************************************************
. ****WITHIN SESSION TYPE AND ROUND 1 & 2 COMPARISONS*****
. ********************************************************
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat x1eq x2eq x12eq x12eq_expost changehat, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x2hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        11{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        25{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:-0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        15{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        21{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:-0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        22{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        14{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. by alpha: signrank x1hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        15{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        21{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:-0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        22{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        14{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. *LOTTERY*
. by alpha: signrank x1hat=x2hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        19{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        17{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:0.140}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.8886}
{txt}{col 1}Exact prob = {res}{ralign 6:0.9453}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        10{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        26{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:-1.120}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2626}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3125}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        18{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        18{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.000}
{txt}{col 1}Prob > |z| = {res}{ralign 6:1.0000}
{txt}{col 1}Exact prob = {res}{ralign 6:1.0000}
{txt}
{com}. by alpha: signrank x1hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        27{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         9{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         3{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        33{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:-2.100}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0357}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0391}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        18{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        18{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.000}
{txt}{col 1}Prob > |z| = {res}{ralign 6:1.0000}
{txt}{col 1}Exact prob = {res}{ralign 6:1.0000}
{txt}
{com}. 
. ********************************************************
. ****WITHIN SESSION TREATMENT (25 VS. 75) COMPARISONS****
. ********************************************************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. ********************************************************
. ********FIRST CREATE PAIRED OBSERVATIONS DATASET********
. ********************************************************
. sort contest sessionid alpha
{txt}
{com}. collapse x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat, ///
> by(contest sessionid alpha)
{res}{txt}
{com}. save bid25.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25.dta
{txt}
{com}. 
. keep if alpha==0.25
{txt}(16 observations deleted)

{com}. gen x125=x1hat
{txt}
{com}. gen x225=x2hat
{txt}
{com}. gen x1225=x12hat
{txt}
{com}. gen x110025=x1100
{txt}
{com}. gen x210025=x2100
{txt}
{com}. gen x1210025=x12100
{txt}
{com}. gen x1025=x10
{txt}
{com}. gen x2025=x20
{txt}
{com}. gen x12025=x120
{txt}
{com}. gen change25=changehat
{txt}
{com}. drop  x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat
{txt}
{com}. *label var sp5 "SP Low cost"
. sort sessionid
{txt}
{com}. save bid25_1.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25_1.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25.dta
{txt}
{com}. 
. keep if alpha==0.75
{txt}(16 observations deleted)

{com}. gen x175=x1hat
{txt}
{com}. gen x275=x2hat
{txt}
{com}. gen x1275=x12hat
{txt}
{com}. gen x110075=x1100
{txt}
{com}. gen x210075=x2100
{txt}
{com}. gen x1210075=x12100
{txt}
{com}. gen x1075=x10
{txt}
{com}. gen x2075=x20
{txt}
{com}. gen x12075=x120
{txt}
{com}. gen change75=changehat
{txt}
{com}. drop  x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat
{txt}
{com}. *label var sp15 "SP High cost"
. sort sessionid
{txt}
{com}. save bid25_2.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25_2.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25_1.dta
{txt}
{com}. merge 1:1 sessionid using "bid25_2.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              16{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. save bid25.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25.dta{rm}
saved
{p_end}

{com}. 
. 
. ********************************/
. ********SECOND RUN TESTS********
. ********************************/
. 
. sort contest sessionid
{txt}
{com}. by contest: signrank x125=x175

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        33{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         3{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x175
{col 10}z = {res}{ralign 6:2.100}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0357}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0391}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x175
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. by contest: signrank x225=x275

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x225 = x275
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        13{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        23{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x225 = x275
{col 10}z = {res}{ralign 6:-0.700}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4838}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5469}
{txt}
{com}. by contest: signrank x1225=x1275

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1225 = x1275
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        14{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        22{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1225 = x1275
{col 10}z = {res}{ralign 6:-0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. by contest: signrank x110025=x110075

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}        11{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      5{col 26}        24{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.75

{txt}H0: x110025 = x110075
{col 10}z = {res}{ralign 6:-0.912}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3615}
{txt}{col 1}Exact prob = {res}{ralign 6:0.4219}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         7{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      5{col 26}        28{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.75

{txt}H0: x110025 = x110075
{col 10}z = {res}{ralign 6:-1.474}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1405}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1719}
{txt}
{com}. by contest: signrank x210025=x210075

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x210025 = x210075
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         9{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        27{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x210025 = x210075
{col 10}z = {res}{ralign 6:-1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}
{txt}
{com}. by contest: signrank x1210025=x1210075

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}       6.5{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}      29.5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: x1210025 = x1210075
{col 10}z = {res}{ralign 6:-1.612}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1069}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1172}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         9{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        27{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1210025 = x1210075
{col 10}z = {res}{ralign 6:-1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}
{txt}
{com}. 
. by contest: signrank x125=x225

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x225
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        19{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        17{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x225
{col 10}z = {res}{ralign 6:0.140}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.8886}
{txt}{col 1}Exact prob = {res}{ralign 6:0.9453}
{txt}
{com}. by contest: signrank x175=x275

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        11{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        25{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x175 = x275
{col 10}z = {res}{ralign 6:-0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        10{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        26{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x175 = x275
{col 10}z = {res}{ralign 6:-1.120}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2626}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3125}
{txt}
{com}. 
. by contest: signrank change25=change75

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: change25 = change75
{col 10}z = {res}{ralign 6:0.981}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3264}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3672}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         3{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        33{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: change25 = change75
{col 10}z = {res}{ralign 6:-2.103}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0355}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0313}
{txt}
{com}. *log close
. 
. *log using C:\purdue\nonpara, append
. 
. 
. 
. *********************************************************
. 
. 
. *******************
. ******TABLE 5******
. *******************
. clear 
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. 
. sort subjectid Period
{txt}
{com}. by subjectid: gen totaltypea=typea[1]
{txt}
{com}. by subjectid: replace totaltypea=typea[_n]+ totaltypea[_n-1] if _n>1
{txt}(4,879 real changes made)

{com}. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. 
. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. label var xjow "Joy of winning"
{txt}
{com}. label var alpha "$\alpha$"
{txt}
{com}. label var risk "Risk aversion"
{txt}
{com}. label var loss "Loss aversion"
{txt}
{com}. *label var LossLineSwitchToB "Loss aversion"
. label var inv "$1/Period$"
{txt}
{com}. 
. **********SUBJECT RE***********************************************************************
. *ALL PAY AUCTION
. xtreg x d75 inv first20 i.sessionid if Type==1 & contest=="All Pay Auction", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2037                                         {txt}min = {res}        10
{txt}     Between = {res}0.0951                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.1651                                         {txt}max = {res}        27

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}-21.62866{col 26}{space 2} 5.635731{col 37}{space 1}   -3.84{col 46}{space 3}0.000{col 54}{space 4}-32.67449{col 67}{space 3}-10.58283
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 12.60962{col 26}{space 2} 4.003287{col 37}{space 1}    3.15{col 46}{space 3}0.002{col 54}{space 4} 4.763325{col 67}{space 3} 20.45592
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} 9.848289{col 26}{space 2} 5.636506{col 37}{space 1}    1.75{col 46}{space 3}0.081{col 54}{space 4} -1.19906{col 67}{space 3} 20.89564
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}1  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}2  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}3  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}4  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}5  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}6  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}7  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}8  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}9  {c |}{col 14}{res}{space 2}-13.07432{col 26}{space 2}  .215295{col 37}{space 1}  -60.73{col 46}{space 3}0.000{col 54}{space 4}-13.49629{col 67}{space 3}-12.65235
{txt}{space 9}10  {c |}{col 14}{res}{space 2}-6.251099{col 26}{space 2} .2136798{col 37}{space 1}  -29.25{col 46}{space 3}0.000{col 54}{space 4}-6.669904{col 67}{space 3}-5.832294
{txt}{space 9}11  {c |}{col 14}{res}{space 2} .2194068{col 26}{space 2} .2167097{col 37}{space 1}    1.01{col 46}{space 3}0.311{col 54}{space 4}-.2053364{col 67}{space 3}   .64415
{txt}{space 9}12  {c |}{col 14}{res}{space 2}-14.51714{col 26}{space 2} .2189171{col 37}{space 1}  -66.31{col 46}{space 3}0.000{col 54}{space 4}-14.94621{col 67}{space 3}-14.08807
{txt}{space 9}13  {c |}{col 14}{res}{space 2} .0340119{col 26}{space 2} .2334322{col 37}{space 1}    0.15{col 46}{space 3}0.884{col 54}{space 4}-.4235068{col 67}{space 3} .4915305
{txt}{space 9}14  {c |}{col 14}{res}{space 2}-7.736819{col 26}{space 2} .2419127{col 37}{space 1}  -31.98{col 46}{space 3}0.000{col 54}{space 4}-8.210959{col 67}{space 3}-7.262678
{txt}{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 9}16  {c |}{col 14}{res}{space 2}-1.831103{col 26}{space 2}  .233923{col 37}{space 1}   -7.83{col 46}{space 3}0.000{col 54}{space 4}-2.289584{col 67}{space 3}-1.372623
{txt}{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2}  45.5148{col 26}{space 2} 5.654182{col 37}{space 1}    8.05{col 46}{space 3}0.000{col 54}{space 4} 34.43281{col 67}{space 3}  56.5968
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 17.531932
     {txt}sigma_e {c |} {res} 24.428128
         {txt}rho {c |} {res} .33997117{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store A
{txt}
{com}. xtreg x d75 inv first20 i.sessionid if Type==2 & contest=="All Pay Auction", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0310                                         {txt}min = {res}        13
{txt}     Between = {res}0.1809                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.0846                                         {txt}max = {res}        30

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}-8.823015{col 26}{space 2} 2.707373{col 37}{space 1}   -3.26{col 46}{space 3}0.001{col 54}{space 4}-14.12937{col 67}{space 3}-3.516661
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 15.64664{col 26}{space 2} 6.305487{col 37}{space 1}    2.48{col 46}{space 3}0.013{col 54}{space 4} 3.288109{col 67}{space 3} 28.00516
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} .7617391{col 26}{space 2} 2.707106{col 37}{space 1}    0.28{col 46}{space 3}0.778{col 54}{space 4}-4.544092{col 67}{space 3}  6.06757
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}1  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}2  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}3  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}4  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}5  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}6  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}7  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}8  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}9  {c |}{col 14}{res}{space 2} 17.37971{col 26}{space 2} .0574491{col 37}{space 1}  302.52{col 46}{space 3}0.000{col 54}{space 4} 17.26711{col 67}{space 3} 17.49231
{txt}{space 9}10  {c |}{col 14}{res}{space 2}-9.457426{col 26}{space 2} .0672525{col 37}{space 1} -140.63{col 46}{space 3}0.000{col 54}{space 4}-9.589238{col 67}{space 3}-9.325613
{txt}{space 9}11  {c |}{col 14}{res}{space 2} 7.052316{col 26}{space 2}   .05702{col 37}{space 1}  123.68{col 46}{space 3}0.000{col 54}{space 4} 6.940559{col 67}{space 3} 7.164074
{txt}{space 9}12  {c |}{col 14}{res}{space 2}-1.198003{col 26}{space 2} .0572216{col 37}{space 1}  -20.94{col 46}{space 3}0.000{col 54}{space 4}-1.310156{col 67}{space 3}-1.085851
{txt}{space 9}13  {c |}{col 14}{res}{space 2}-2.559409{col 26}{space 2} .0544918{col 37}{space 1}  -46.97{col 46}{space 3}0.000{col 54}{space 4}-2.666211{col 67}{space 3}-2.452607
{txt}{space 9}14  {c |}{col 14}{res}{space 2}-11.53917{col 26}{space 2} .0600383{col 37}{space 1} -192.20{col 46}{space 3}0.000{col 54}{space 4}-11.65684{col 67}{space 3} -11.4215
{txt}{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 9}16  {c |}{col 14}{res}{space 2} .8415434{col 26}{space 2} .0543048{col 37}{space 1}   15.50{col 46}{space 3}0.000{col 54}{space 4}  .735108{col 67}{space 3} .9479789
{txt}{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} 36.89935{col 26}{space 2} 2.515556{col 37}{space 1}   14.67{col 46}{space 3}0.000{col 54}{space 4} 31.96895{col 67}{space 3} 41.82975
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 17.820295
     {txt}sigma_e {c |} {res} 31.362447
         {txt}rho {c |} {res} .24406027{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store B
{txt}
{com}. *xtreg x12hat d75 inv f75 if Type==1 & validriskloss==1 & contest=="All Pay Auction", i(subjectid) vce(cluster sessionid)
. *est store C
. *LOTTERY
. xtreg x d75 inv first20 i.sessionid if Type==1 &  contest=="Lottery", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1223                                         {txt}min = {res}        13
{txt}     Between = {res}0.1529                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.1389                                         {txt}max = {res}        28

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}-5.882275{col 26}{space 2} 3.203799{col 37}{space 1}   -1.84{col 46}{space 3}0.066{col 54}{space 4} -12.1616{col 67}{space 3} .3970548
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 10.74005{col 26}{space 2} 5.453056{col 37}{space 1}    1.97{col 46}{space 3}0.049{col 54}{space 4} .0522542{col 67}{space 3} 21.42784
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} 15.58286{col 26}{space 2} 3.192418{col 37}{space 1}    4.88{col 46}{space 3}0.000{col 54}{space 4} 9.325839{col 67}{space 3} 21.83989
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2} 5.564767{col 26}{space 2} .0909531{col 37}{space 1}   61.18{col 46}{space 3}0.000{col 54}{space 4} 5.386502{col 67}{space 3} 5.743032
{txt}{space 10}3  {c |}{col 14}{res}{space 2} .7650709{col 26}{space 2} .0590974{col 37}{space 1}   12.95{col 46}{space 3}0.000{col 54}{space 4} .6492421{col 67}{space 3} .8808996
{txt}{space 10}4  {c |}{col 14}{res}{space 2}-7.437572{col 26}{space 2} .0175748{col 37}{space 1} -423.20{col 46}{space 3}0.000{col 54}{space 4}-7.472018{col 67}{space 3}-7.403126
{txt}{space 10}5  {c |}{col 14}{res}{space 2} 17.36228{col 26}{space 2} .0237691{col 37}{space 1}  730.45{col 46}{space 3}0.000{col 54}{space 4} 17.31569{col 67}{space 3} 17.40887
{txt}{space 10}6  {c |}{col 14}{res}{space 2} 4.723308{col 26}{space 2} .0177295{col 37}{space 1}  266.41{col 46}{space 3}0.000{col 54}{space 4} 4.688559{col 67}{space 3} 4.758057
{txt}{space 10}7  {c |}{col 14}{res}{space 2} 19.62122{col 26}{space 2} .0262991{col 37}{space 1}  746.08{col 46}{space 3}0.000{col 54}{space 4} 19.56967{col 67}{space 3} 19.67276
{txt}{space 10}8  {c |}{col 14}{res}{space 2} 12.94197{col 26}{space 2} .0224908{col 37}{space 1}  575.43{col 46}{space 3}0.000{col 54}{space 4} 12.89789{col 67}{space 3} 12.98606
{txt}{space 10}9  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}10  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}11  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}12  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}13  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}14  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}16  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} 29.78293{col 26}{space 2}  .953521{col 37}{space 1}   31.23{col 46}{space 3}0.000{col 54}{space 4} 27.91406{col 67}{space 3}  31.6518
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res}  20.48359
     {txt}sigma_e {c |} {res} 23.540113
         {txt}rho {c |} {res} .43090403{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store D
{txt}
{com}. xtreg x d75 inv first20 i.sessionid if Type==2 & contest=="Lottery", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0401                                         {txt}min = {res}        12
{txt}     Between = {res}0.1494                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.0842                                         {txt}max = {res}        27

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2} 1.737756{col 26}{space 2} 4.139132{col 37}{space 1}    0.42{col 46}{space 3}0.675{col 54}{space 4}-6.374793{col 67}{space 3} 9.850305
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 13.42103{col 26}{space 2} 7.400565{col 37}{space 1}    1.81{col 46}{space 3}0.070{col 54}{space 4}-1.083816{col 67}{space 3} 27.92587
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} 8.921215{col 26}{space 2} 4.128025{col 37}{space 1}    2.16{col 46}{space 3}0.031{col 54}{space 4} .8304354{col 67}{space 3} 17.01199
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2} 2.305278{col 26}{space 2}  .093803{col 37}{space 1}   24.58{col 46}{space 3}0.000{col 54}{space 4} 2.121428{col 67}{space 3} 2.489129
{txt}{space 10}3  {c |}{col 14}{res}{space 2}-16.83406{col 26}{space 2} .0728976{col 37}{space 1} -230.93{col 46}{space 3}0.000{col 54}{space 4}-16.97693{col 67}{space 3}-16.69118
{txt}{space 10}4  {c |}{col 14}{res}{space 2}-14.14342{col 26}{space 2} .0488577{col 37}{space 1} -289.48{col 46}{space 3}0.000{col 54}{space 4}-14.23918{col 67}{space 3}-14.04766
{txt}{space 10}5  {c |}{col 14}{res}{space 2} -2.74914{col 26}{space 2} .0235378{col 37}{space 1} -116.80{col 46}{space 3}0.000{col 54}{space 4}-2.795273{col 67}{space 3}-2.703007
{txt}{space 10}6  {c |}{col 14}{res}{space 2}-14.11689{col 26}{space 2} .0236555{col 37}{space 1} -596.77{col 46}{space 3}0.000{col 54}{space 4}-14.16325{col 67}{space 3}-14.07052
{txt}{space 10}7  {c |}{col 14}{res}{space 2}-2.829071{col 26}{space 2} .0416383{col 37}{space 1}  -67.94{col 46}{space 3}0.000{col 54}{space 4} -2.91068{col 67}{space 3}-2.747461
{txt}{space 10}8  {c |}{col 14}{res}{space 2} 7.493147{col 26}{space 2} .0326429{col 37}{space 1}  229.55{col 46}{space 3}0.000{col 54}{space 4} 7.429168{col 67}{space 3} 7.557126
{txt}{space 10}9  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}10  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}11  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}12  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}13  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}14  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}16  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} 42.49708{col 26}{space 2} 2.131756{col 37}{space 1}   19.94{col 46}{space 3}0.000{col 54}{space 4} 38.31891{col 67}{space 3} 46.67524
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 20.396695
     {txt}sigma_e {c |} {res} 26.882051
         {txt}rho {c |} {res} .36536066{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store E
{txt}
{com}. *reg x12 d75 inv f75 if Type==1  &  contest=="Lottery", vce(cluster subjectid)
. *est store F
. 
. esttab A B D E using table5.doc, se r2 keep(_cons d75 inv first20 _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) 
{res}{txt}(output written to {browse  `"table5.doc"'})

{com}. esttab A B D E using table5.doc, se r2 keep(_cons d75 inv first20 _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01)
{res}{txt}(output written to {browse  `"table5.doc"'})

{com}. 
. *******************
. ******TABLE 6******
. *******************
. 
. **********DISPERSION MEASURES****************************
. clear
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(8 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(2 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if periodt>10
{txt}(2,560 observations deleted)

{com}. 
. gen x_sd=x
{txt}
{com}. gen x_med=x
{txt}
{com}. 
. sort lottery Type alpha sessionid subjectid
{txt}
{com}. collapse (mean) x (sd) x_sd (p50) x_med, by(lottery Type alpha sessionid subjectid)
{res}{txt}
{com}. gen coeff_var=x_sd/x
{txt}(38 missing values generated)

{com}. 
. gen dalpha=0
{txt}
{com}. replace dalpha=1 if alpha==0.75
{txt}(255 real changes made)

{com}. 
. *H_s measure = SD of the median
. by lottery Type alpha sessionid: egen x_sd_med=sd(x_med)
{txt}
{com}. *D_s measure =  Median of the SD
. by lottery Type alpha sessionid: egen x_med_sd=median(x_sd)
{txt}
{com}. 
. sort lottery Type alpha sessionid
{txt}
{com}. collapse x_med_sd x_sd_med, by(lottery Type alpha sessionid)
{res}{txt}
{com}. 
. *Compare alpha's*
. save cv_tests, replace
{txt}{p 0 4 2}
file {bf}
cv_tests.dta{rm}
saved
{p_end}

{com}. 
. keep if alpha==0.25
{txt}(32 observations deleted)

{com}. rename x_sd_med x_med1
{res}{txt}
{com}. rename x_med_sd x_sd1
{res}{txt}
{com}. save cv_type1, replace
{txt}{p 0 4 2}
file {bf}
cv_type1.dta{rm}
saved
{p_end}

{com}. clear
{txt}
{com}. 
. use cv_tests
{txt}
{com}. keep if alpha==0.75
{txt}(32 observations deleted)

{com}. rename x_med_sd x_sd2
{res}{txt}
{com}. rename x_sd_med x_med2
{res}{txt}
{com}. save cv_type2, replace
{txt}{p 0 4 2}
file {bf}
cv_type2.dta{rm}
saved
{p_end}

{com}. merge 1:1 Type sessionid using "cv_type1.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              32{txt}  (_merge==3)
{col 5}{hline 41}

{com}. 
. sort lottery Type
{txt}
{com}. *H_s measure = SD of the median
. by lottery Type: signrank x_med1=x_med2

{txt}{hline}
-> lottery = 0, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        30{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         6{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:1.680}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0929}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1094}

{txt}{hline}
-> lottery = 0, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        13{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        23{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-0.700}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4838}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5469}

{txt}{hline}
-> lottery = 1, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        20{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        16{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}

{txt}{hline}
-> lottery = 1, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}
{txt}
{com}. *D_s measure = Median of the SD
. by lottery Type: signrank x_sd1=x_sd2

{txt}{hline}
-> lottery = 0, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> lottery = 0, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        24{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        12{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.840}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4008}
{txt}{col 1}Exact prob = {res}{ralign 6:0.4609}

{txt}{hline}
-> lottery = 1, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        20{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        16{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}

{txt}{hline}
-> lottery = 1, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        16{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        20{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}
{txt}
{com}. 
. *Compare Types*
. clear
{txt}
{com}. use cv_tests
{txt}
{com}. 
. keep if Type==1
{txt}(32 observations deleted)

{com}. rename x_med_sd x_sd1
{res}{txt}
{com}. rename x_sd_med x_med1
{res}{txt}
{com}. save cv_type1, replace
{txt}{p 0 4 2}
file {bf}
cv_type1.dta{rm}
saved
{p_end}

{com}. clear
{txt}
{com}. use cv_tests
{txt}
{com}. keep if Type==2
{txt}(32 observations deleted)

{com}. rename x_med_sd x_sd2
{res}{txt}
{com}. rename x_sd_med x_med2
{res}{txt}
{com}. save cv_type2, replace
{txt}{p 0 4 2}
file {bf}
cv_type2.dta{rm}
saved
{p_end}

{com}. merge 1:1 alpha sessionid using "cv_type1.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              32{txt}  (_merge==3)
{col 5}{hline 41}

{com}. 
. sort lottery alpha
{txt}
{com}. *H_s measure = SD of the median
. by lottery alpha: signrank x_med1=x_med2

{txt}{hline}
-> lottery = 0, alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}        11{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        25{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> lottery = 0, alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         5{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        31{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> lottery = 1, alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      1{col 26}         3{col 38}        18
    {txt}Negative {c |}{res}{col 17}      7{col 26}        33{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-2.100}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0357}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0391}

{txt}{hline}
-> lottery = 1, alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        15{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        21{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. *D_s measure =  Median of the SD
. by lottery alpha: signrank x_sd1=x_sd2

{txt}{hline}
-> lottery = 0, alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      1{col 26}         4{col 38}        18
    {txt}Negative {c |}{res}{col 17}      7{col 26}        32{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> lottery = 0, alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         4{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        32{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> lottery = 1, alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}

{txt}{hline}
-> lottery = 1, alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}         7{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        29{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}
{txt}
{com}. 
. *Compare Contests*
. 
. sort alpha Type lottery
{txt}
{com}. *H_s measure = SD of the median
. by alpha Type: ranksum x_sd_med, by(lottery)

{txt}{hline}
-> alpha = .25, Type = 2
{err}variable {bf}x_sd_med{sf} not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Soloproj.do"
{txt}
{com}. clear all 
{res}{txt}
{com}. /*desktop directory
> cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
> */
. *laptop directory
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
. *school computer directory
. 
. *Start
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. ****************************************
. *************REPLICATION****************
. ****************************************
. 
. *******************
. ******FIGURE 1*****
. *******************
. 
. *****TREATMENTS***
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x1hat x1eq, by(contest alpha)
{res}{txt}
{com}. 
. gen time=1
{txt}
{com}. rename x1hat observed
{res}{txt}
{com}. rename x1eq equilibrium
{res}{txt}
{com}. 
. save d1, replace
{txt}{p 0 4 2}
file {bf}
d1.dta{rm}
saved
{p_end}

{com}. 
. **Step 2**
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x2hat x2eq, by(contest alpha)
{res}{txt}
{com}. 
. gen time=2
{txt}
{com}. rename x2hat observed
{res}{txt}
{com}. rename x2eq equilibrium
{res}{txt}
{com}. 
. save d2, replace
{txt}{p 0 4 2}
file {bf}
d2.dta{rm}
saved
{p_end}

{com}. 
. **Step 3**
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x12hat x12eq, by(contest alpha)
{res}{txt}
{com}. gen time=3
{txt}
{com}. rename x12hat observed
{res}{txt}
{com}. rename x12eq equilibrium
{res}{txt}
{com}. 
. save d12, replace
{txt}{p 0 4 2}
file {bf}
d12.dta{rm}
saved
{p_end}

{com}. 
. append using d1
{txt}
{com}. append using d2
{txt}
{com}. 
. gen a25=1 if alpha==0.25
{txt}(6 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(6 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(6 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(6 real changes made)

{com}. gen timeg=1 if time==1
{txt}(8 missing values generated)

{com}. replace timeg=2 if time==2
{txt}(4 real changes made)

{com}. replace timeg=3 if time==3
{txt}(4 real changes made)

{com}. 
. label var observed "Observed"
{txt}
{com}. label var equilibrium "Equilibrium"
{txt}
{com}. 
. save treatments, replace
{txt}{p 0 4 2}
file {bf}
treatments.dta{rm}
saved
{p_end}

{com}. 
. sort time
{txt}
{com}. *label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
. label define a25 0 " " 1 "alpha=0.25" 2 "0.75" 3 " "
{txt}
{com}. label define time 1 "Type A - Round 1" 2 "Type B - Round 1" 3 "Type A - Round 2"
{txt}
{com}. label val timeg time
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. format observed %9.2f
{txt}
{com}. format equilibrium %9.2f
{txt}
{com}. 
. *All Pay
. twoway scatter observed equilibrium alphag if contest=="All Pay Auction", ///
> by(timeg, cols(3) note("")) mlabel(observed equilibrium) mlabc(black black) mlabsize(medium medium) mlabposition(12 12) ///
> xlabel(0 1 2 3, valuelabel labs(medium)) connect(l l) lp(solid dash) lc(black black) mc(black black) ///
> legend(off) ylabel(0(25)50) ytitle("Expenditure") ///
> saving(fig1APA, replace)
{res}{txt}file {bf:fig1APA.gph} saved

{com}. graph use fig1APA
{res}{txt}
{com}. graph export fig1APA.pdf, replace
{txt}{p 0 4 2}
file {bf}
fig1APA.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *Lottery
. twoway scatter observed equilibrium alphag if contest=="Lottery", ///
> by(timeg , cols(3) note("")) mlabel(observed equilibrium) mlabc(black black) mlabsize(medium medium) mlabposition(12 12) ///
> xlabel(0 1 2 3, valuelabel labs(medium)) connect(l l) lp(solid dash) lc(black black) mc(black black) ///
> legend(off) ylabel(0(25)50) ytitle("Expenditure") ///
> saving(fig1Lott, replace)
{res}{txt}file {bf:fig1Lott.gph} saved

{com}. graph use fig1Lott
{res}{txt}
{com}. graph export fig1Lott.pdf, replace
{txt}{p 0 4 2}
file {bf}
fig1Lott.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 2*****
. *******************
. 
. *****HISTOGRAMS****
. clear 
{txt}
{com}. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. *Type A*
.    hist x1hat if Type==1 & lottery==0 & alpha==0.25, ///
>      xline(75) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.25") col(blue) lc(black) saving(1APA25, replace) 
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1APA25.gph} saved

{com}.    hist x1hat if Type==1 & lottery==0 & alpha==0.75, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.75") col(blue) lc(black) saving(1APA75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1APA75.gph} saved

{com}.    hist x1hat if Type==1 & lottery==1 & alpha==0.25, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.25") col(blue) lc(black) saving(1Lott25, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1Lott25.gph} saved

{com}.    hist x1hat if Type==1 & lottery==1 & alpha==0.75, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.75") col(blue) lc(black) saving(1Lott75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1Lott75.gph} saved

{com}. 
. gr combine 1APA25.gph 1APA75.gph 1Lott25.gph 1Lott75.gph, saving(1hist, replace)
{res}{txt}file {bf:1hist.gph} saved

{com}.           graph use 1hist
{res}{txt}
{com}.       graph export Fig21.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig21.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *Type B*
.    hist x2hat if Type==1 & lottery==0 & alpha==0.25, /// 
>      xline(75) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.25") col(blue) lc(black) saving(2APA25, replace) 
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2APA25.gph} saved

{com}.    hist x2hat if Type==1 & lottery==0 & alpha==0.75, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.75") col(blue) lc(black) saving(2APA75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2APA75.gph} saved

{com}.    hist x2hat if Type==1 & lottery==1 & alpha==0.25, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.25") col(blue) lc(black) saving(2Lott25, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2Lott25.gph} saved

{com}.    hist x2hat if Type==1 & lottery==1 & alpha==0.75, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.75") col(blue) lc(black) saving(2Lott75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2Lott75.gph} saved

{com}. 
. gr combine 2APA25.gph 2APA75.gph 2Lott25.gph 2Lott75.gph, saving(2hist, replace)
{res}{txt}file {bf:2hist.gph} saved

{com}.           graph use 2hist
{res}{txt}
{com}.       graph export Fig22.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig22.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 3*****
. *******************
. 
. *****BOX PLOTS*****
. clear 
{txt}
{com}.           
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. drop if periodt<11
{txt}(2,560 observations deleted)

{com}. 
. sort lottery Type alpha subjectid
{txt}
{com}. by lottery Type alpha subjectid: egen med_x=median(x)
{txt}
{com}. by lottery Type alpha subjectid: egen lqt_x = pctile(x), p(25)
{txt}
{com}. by lottery Type alpha subjectid: egen uqt_x = pctile(x), p(75)
{txt}
{com}. by lottery Type alpha subjectid: egen iqr_x = iqr(x)
{txt}
{com}. by lottery Type alpha subjectid: egen mean_x = mean(x)
{txt}
{com}. by lottery Type alpha subjectid: egen sd_x = sd(x)
{txt}(4 missing values generated)

{com}. 
. by lottery Type alpha subjectid: egen ls_x = min(max(x, lqt_x-1.5*iqr_x))
{txt}
{com}. by lottery Type alpha subjectid: egen us_x = max(min(x, uqt_x+1.5*iqr_x))
{txt}
{com}. gen coeff_var=sd_x/mean_x
{txt}(168 missing values generated)

{com}. 
. gen out_x = x if(x<=lqt_x-1.5*iqr_x | x>=uqt_x+1.5*iqr_x)
{txt}(1,594 missing values generated)

{com}. 
. sort lottery Type alpha mean_x subjectid
{txt}
{com}. egen mean_id=group(lottery Type alpha mean_x subjectid)
{txt}
{com}. 
. by lottery Type alpha: egen min_id=min(mean_id)
{txt}
{com}. gen mean_id_scale=mean_id-min_id+1
{txt}
{com}. 
. label var mean_id_scale "Subject rank (low to high mean)"
{txt}
{com}. label var x "Exp."
{txt}
{com}. 
. *LOTTERY*
. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.25 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.25", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure") ylabel(0(25)100) name(typeA_025_subj, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.25 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.25", si(medium)) yline(25, lc(blue)) ///        
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_025_subj, replace)
{res}{txt}
{com}. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.75 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeA_075_subj, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.75 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_075_subj, replace)
{res}{txt}
{com}. 
. graph combine typeA_025_subj typeA_075_subj typeB_025_subj typeB_075_subj, name(box_subj, replace)
{res}{txt}
{com}. graph export Fig3A.jpg, replace
{res}{txt}file {bf:Fig3A.jpg} written in JPEG format

{com}. 
. *ALL-PAY*
. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.25 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.25", si(medium)) yline(75, lc(blue)) ///
>                 ytitle("Expenditure") ylabel(0(25)100) name(typeA_025_subj_apa, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.25 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.25", si(medium)) yline(75, lc(blue)) ///        
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_025_subj_apa, replace)
{res}{txt}
{com}. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.75 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeA_075_subj_apa, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.75 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_075_subj_apa, replace)
{res}{txt}
{com}. 
. *graph combine typeA_025_subj typeA_075_subj typeB_025_subj typeB_075_subj, name(box_subj_apa, replace)
. *graph export box_subj_apa.jpg, replace
. 
. graph combine typeA_025_subj_apa typeA_025_subj typeA_075_subj_apa typeA_075_subj, name(box_typeA, replace)
{res}{txt}
{com}. graph export box_typeA.pdf, replace
{txt}{p 0 4 2}
file {bf}
box_typeA.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. graph combine typeB_025_subj_apa typeB_025_subj typeB_075_subj_apa typeB_075_subj, name(box_typeB, replace)
{res}{txt}
{com}. graph export Fig3B.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig3B.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 4*****
. *******************
. clear    
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. gen change=.
{txt}(5,120 missing values generated)

{com}. replace change=0 if Type==1 & x12==.
{txt}(530 real changes made)

{com}. replace change=1 if Type==1 & x12~=.
{txt}(2,030 real changes made)

{com}. 
. gen reduce=0
{txt}
{com}. replace reduce=1 if Type==1 & x12hat<x1hat
{txt}(1,065 real changes made)

{com}. 
. gen raise=0
{txt}
{com}. replace raise=1 if Type==1 & x12hat>x1hat
{txt}(965 real changes made)

{com}. 
. gen rationalrev=0
{txt}
{com}. replace rationalrev=1 if x1hat~=br1
{txt}(4,999 real changes made)

{com}. *replace rationalrev=1 if x2hat & lottery==1
. 
. gen overbid=1
{txt}
{com}. replace overbid=0 if x1hat<=br1  
{txt}(1,540 real changes made)

{com}. 
. gen underbid=0
{txt}
{com}. replace underbid=1 if x1hat<br1 
{txt}(1,419 real changes made)

{com}. 
. gen ahead=0
{txt}
{com}. replace ahead=1 if x1hat>x2hat
{txt}(2,544 real changes made)

{com}. 
. gen onedisttoother=x1hat-x2hat
{txt}
{com}. gen twodisttoother=x12hat-x2hat
{txt}
{com}. 
. gen irr_nochange=0 
{txt}
{com}. replace irr_nochange=1 if changehat==0 & rationalrev==1
{txt}(956 real changes made)

{com}. 
. gen irr_rev_dec=0
{txt}
{com}. replace irr_rev_dec=1 if irr_nochange==1
{txt}(956 real changes made)

{com}. replace irr_rev_dec=1 if changehat==1 & x1hat==br1
{txt}(17 real changes made)

{com}. 
. 
. label var rationalrev "Revising is rational"
{txt}
{com}. label var changehat "Subject revised"
{txt}
{com}. label var irr_nochange "No change even though was rational"
{txt}
{com}. 
. sort contest alpha
{txt}
{com}. collapse changehat rationalrev, by(contest alpha)
{res}{txt}
{com}. 
. sort contest
{txt}
{com}. gen low=1 if alpha==0.25
{txt}(2 missing values generated)

{com}. replace low=4 if alpha==0.75
{txt}(2 real changes made)

{com}. gen low1=2 if alpha==0.25
{txt}(2 missing values generated)

{com}. replace low1=5 if alpha==0.75
{txt}(2 real changes made)

{com}. 
. label var changehat "Actual revision"
{txt}
{com}. label var rationalrev "Rational revision"
{txt}
{com}. 
. twoway  (bar changehat low, barw(1) bcolor(blue)) ///
> (bar rationalrev low1, barw(1) bcolor(gray)), ///
> ytitle("Fraction") ylabel(0(0.2)1) xlabel(1.5 "alpha=0.25" 4.5 "alpha=0.75") by(contest, note(""))  ///
> saving(revision, replace)
{res}{txt}file {bf:revision.gph} saved

{com}. graph use revision
{res}{txt}
{com}. graph export Fig4.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig4.pdf{rm}
saved as
PDF
format
{p_end}

{com}.           
. *******************
. ******FIGURE 5*****
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. *Period >10 & <=20 & Period >30
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. keep if Type==1
{txt}(2,560 observations deleted)

{com}. keep if lottery==0
{txt}(1,280 observations deleted)

{com}. 
. *keep if changehat==1
. 
. *keep if validriskloss==1
. 
. gen a25=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(640 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(640 real changes made)

{com}. 
. label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. 
. 
. **************************
. ***(a) All observations***
. **************************
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. twoway (scatter br1 x2hat, legend(off) ms(X) mfc(none) mlc(red) msize(vlarge)) ///
> (scatter x12hat x2hat, legend(off) ms(circle) mfc(none) mlc(black) mlw(medium) ytitle("Type A - Round 2")) if lottery==0, ///
> by(alphag, note("")) saving("bra_brall", replace) 
{res}{txt}file {bf:bra_brall.gph} saved

{com}. graph use bra_brall
{res}{txt}
{com}. graph export Fig5b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig5b.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *****************************
. ***(b) Revised Expenditure***
. *****************************
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. twoway (scatter br1 x2hat if changehat==1, legend(off) ms(X) mfc(none) mlc(red) msize(vlarge)) ///
> (scatter x12hat x2hat if changehat==1, legend(off) ms(circle) mfc(none) mlc(black) mlw(medium) ytitle("Type A - Round 2")), ///
> by(alphag, note("")) saving("bra_brch", replace) 
{res}{txt}file {bf:bra_brch.gph} saved

{com}. graph use bra_brch
{res}{txt}
{com}. graph export Fig5b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig5b.pdf{rm}
saved as
PDF
format
{p_end}

{com}.   
. *******************
. ******FIGURE 6*****
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. *keep if changehat==1
. 
. *Period >10 & <=20 & Period >30
. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. keep if lottery==1
{txt}(2,560 observations deleted)

{com}. keep if Type==1
{txt}(1,280 observations deleted)

{com}. sum match2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}match2 {c |}{res}      1,280     .046875    .2114537          0          1
{txt}
{com}. 
. *gen direction=0
. *replace direction=1 if diff_br_1>diff_br_2
. *replace direction=1 if  diff_br_1==diff_br_2 & diff_br_1==0
. 
. gen outspend2=0
{txt}
{com}. replace outspend2=1 if x12hat>=x2hat
{txt}(927 real changes made)

{com}. sum outspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}outspend2 {c |}{res}      1,280    .7242188    .4470818          0          1
{txt}
{com}. gen slightoutspend2=0
{txt}
{com}. replace slightoutspend2=1 if x12hat-x2hat>=0.01 
{txt}(796 real changes made)

{com}. replace slightoutspend2=0 if x12hat-x2hat>5
{txt}(551 real changes made)

{com}. sum slightoutspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
slightouts~2 {c |}{res}      1,280    .1914063    .3935618          0          1
{txt}
{com}. 
. gen sqrtx2hat=sqrt(x2hat)
{txt}
{com}. gen x2hatsq=x2hat*x2hat
{txt}
{com}. 
. egen xjowbar=mean(xjow)
{txt}
{com}. 
. 
. *alpha=0.25
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25, i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1541                                         {txt}min = {res}         5
{txt}     Between = {res}0.0050                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.0905                                         {txt}max = {res}        16

                                                {txt}Wald chi2({res}3{txt})      =  {res}    58.02
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.5496476{col 26}{space 2} .1381015{col 37}{space 1}   -3.98{col 46}{space 3}0.000{col 54}{space 4}-.8203214{col 67}{space 3}-.2789737
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 8.503715{col 26}{space 2} 1.432925{col 37}{space 1}    5.93{col 46}{space 3}0.000{col 54}{space 4} 5.695233{col 67}{space 3}  11.3122
{txt}{space 9}inv {c |}{col 14}{res}{space 2}  8.08702{col 26}{space 2} 6.851729{col 37}{space 1}    1.18{col 46}{space 3}0.238{col 54}{space 4}-5.342123{col 67}{space 3} 21.51616
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 16.23312{col 26}{space 2} 4.363813{col 37}{space 1}    3.72{col 46}{space 3}0.000{col 54}{space 4} 7.680207{col 67}{space 3} 24.78604
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.974798
     {txt}sigma_e {c |} {res} 26.665094
         {txt}rho {c |} {res} .35944634{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.25, vce(cluster subjectid)
. est store A
{txt}
{com}. *predict xbr25 if alpha==0.25
. gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. *alpha=0.75
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2254                                         {txt}min = {res}         4
{txt}     Between = {res}0.1085                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.1848                                         {txt}max = {res}        17

                                                {txt}Wald chi2({res}3{txt})      =  {res}   254.55
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.7994133{col 26}{space 2} .1344883{col 37}{space 1}   -5.94{col 46}{space 3}0.000{col 54}{space 4}-1.063005{col 67}{space 3}-.5358212
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2}  11.4271{col 26}{space 2} 1.245723{col 37}{space 1}    9.17{col 46}{space 3}0.000{col 54}{space 4} 8.985531{col 67}{space 3} 13.86867
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 17.98433{col 26}{space 2} 1.531107{col 37}{space 1}   11.75{col 46}{space 3}0.000{col 54}{space 4} 14.98342{col 67}{space 3} 20.98525
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 11.77709{col 26}{space 2} 4.983728{col 37}{space 1}    2.36{col 46}{space 3}0.018{col 54}{space 4} 2.009159{col 67}{space 3} 21.54501
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.466571
     {txt}sigma_e {c |} {res}  25.60477
         {txt}rho {c |} {res} .36629143{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store B
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       434
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        60

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2216                                         {txt}min = {res}         1
{txt}     Between = {res}0.2036                                         {txt}avg = {res}       7.2
{txt}     Overall = {res}0.1870                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}3{txt})      =  {res}   109.89
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6214736{col 26}{space 2} .2528202{col 37}{space 1}   -2.46{col 46}{space 3}0.014{col 54}{space 4}-1.116992{col 67}{space 3}-.1259551
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.16473{col 26}{space 2} 2.343644{col 37}{space 1}    4.34{col 46}{space 3}0.000{col 54}{space 4} 5.571275{col 67}{space 3} 14.75819
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 9.185786{col 26}{space 2} 8.942919{col 37}{space 1}    1.03{col 46}{space 3}0.304{col 54}{space 4}-8.342014{col 67}{space 3} 26.71359
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 8.094571{col 26}{space 2} 4.665199{col 37}{space 1}    1.74{col 46}{space 3}0.083{col 54}{space 4} -1.04905{col 67}{space 3} 17.23819
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 18.754565
     {txt}sigma_e {c |} {res} 26.827845
         {txt}rho {c |} {res} .32827302{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store C
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr25_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       476
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        63

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2665                                         {txt}min = {res}         1
{txt}     Between = {res}0.2733                                         {txt}avg = {res}       7.6
{txt}     Overall = {res}0.2384                                         {txt}max = {res}        13

                                                {txt}Wald chi2({res}3{txt})      =  {res}   219.70
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6550246{col 26}{space 2} .1310692{col 37}{space 1}   -5.00{col 46}{space 3}0.000{col 54}{space 4}-.9119155{col 67}{space 3}-.3981336
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.76415{col 26}{space 2} 1.085404{col 37}{space 1}    9.92{col 46}{space 3}0.000{col 54}{space 4} 8.636801{col 67}{space 3} 12.89151
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 11.99457{col 26}{space 2} 3.535731{col 37}{space 1}    3.39{col 46}{space 3}0.001{col 54}{space 4} 5.064662{col 67}{space 3} 18.92447
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 10.57784{col 26}{space 2} 5.153371{col 37}{space 1}    2.05{col 46}{space 3}0.040{col 54}{space 4} .4774191{col 67}{space 3} 20.67826
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res}  18.59713
     {txt}sigma_e {c |} {res} 24.950564
         {txt}rho {c |} {res} .35714479{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store D
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. 
. 
. esttab A B C D using table.tex, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}(output written to {browse  `"table.tex"'})

{com}. esttab A B C D using table.txt, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}(output written to {browse  `"table.txt"'})

{com}. *se keep(x2hat  x2hatsq inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
. 
. gen a25=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(640 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(640 real changes made)

{com}. 
. label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. 
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. 
. sort x2hat
{txt}
{com}. *twoway (scatter x12hat x2hat) (line br1 x2hat) 
. *twoway (line xbr25 x2hat) (line xbr75 x2hat) (line br1 x2hat) 
. gen x1225=x12hat if alpha==0.25
{txt}(640 missing values generated)

{com}. gen x1275=x12hat if alpha==0.75
{txt}(640 missing values generated)

{com}. 
. **************************
. ***(a) All observations***
. **************************
. *****with the cloud of points and estimated BR****************
. twoway (line xbr25 x2hat, lwidth(thick) lp(longdash_dot) lc(black)) ///
> (line xbr75 x2hat, lwidth(thick) lp(dash) lc(black)) ///
> (line br1 x2hat, lwidth(medthick) legend(off) lc(red)) ///
> (scatter x12hat x2hat, ms(circle) mfc(none) mlc(black) mlw(medium)), /// *(line xbr25 x2hat, lwidth(thick) lp(longdash_dot)) /// *(line xbr75 x2hat, lwidth(thick) lp(dash)) ///
> text(35 80 "{c -(}bf:alpha=0.75{c )-}", color(blue)) text(52 90 "{c -(}bf:alpha=0.25{c )-}", color(blue)) text(20 70 "{c -(}bf:Risk Neutral BR{c )-}", color(blue)) ///
> ylabel(0(20)100) ytitle("Type A - Round 2") ///
> saving("brl_brall", replace)
{res}{txt}file {bf:brl_brall.gph} saved

{com}. graph use brl_brall
{res}{txt}
{com}. graph export Fig6a.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig6a.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *****************************
. ***(b) Revised Expenditure***
. *****************************
. twoway (line xbr25_rev x2hat if changehat==1, lwidth(thick) lp(longdash_dot) lc(black)) ///
> (line xbr75_rev x2hat if changehat==1, lwidth(thick) lp(dash) lc(black)) ///
> (line br1 x2hat if changehat==1, lwidth(medthick) legend(off) lc(red)) ///
> (scatter x12hat x2hat if changehat==1, ms(circle) mfc(none) mlc(black) mlw(medium)), /// *(line xbr25 x2hat, lwidth(thick) lp(longdash_dot)) /// *(line xbr75 x2hat, lwidth(thick) lp(dash)) ///
> ylabel(0(20)100) ytitle("Type A - Round 2") ///
> text(38 65 "{c -(}bf:alpha=0.75{c )-}", color(blue)) text(47 90 "{c -(}bf:alpha=0.25{c )-}", color(blue)) text(20 70 "{c -(}bf:Risk Neutral BR{c )-}", color(blue)) ///
> saving("brl_brch", replace)
{res}{txt}file {bf:brl_brch.gph} saved

{com}. graph use brl_brch
{res}{txt}
{com}. graph export Fig6b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig6b.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. 
. ***********************************************************
. ******************RESULT 1*********************************
. ***********************************************************
. 
. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat x1eq x2eq x12eq x12eq_expost changehat, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. 
. ***********************************************************
. ******************TABLES*********************************
. ***********************************************************
. 
. *******************
. ******TABLE 3******
. *******************
. 
. *******************
. ** Flexibility 1 **
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility1
{txt}(131 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    23.17737    39.56443    -71.625      99.99

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607    62.50624    31.00023     -21.75      99.99

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        610    18.78673     35.1769   -74.0925    99.2475

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        594    42.34407    31.72943     -24.75      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility , by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      1{col 26}         2{col 38}        18
    {txt}Negative {c |}{res}{col 17}      7{col 26}        34{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. 
. 
. *******************
. ** Flexibility 2 **
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility2
{txt}(66 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    32.59386    49.82583     -56.24     110.75

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607    83.22634    33.03715     -23.25        150

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        636    4.620407    30.21823        -99    99.2475

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        633     8.65904    33.57703        -80      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}         9{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        27{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         8{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        28{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.400}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1614}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1953}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. 
. 
. 
. *******************
. ** Flexibility 3 **
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility3
{txt}(66 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    32.48208    50.70538   -49.9925    99.9925

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607     77.9235    17.19528    50.0025    99.9975

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        636    3.060132    32.57224     -99.99         99

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        633    2.130161    36.65466     -99.99      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}         8{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        28{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.400}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1614}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1953}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. 
. 
. 
. *******************
. ******TABLE 4******
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. *Descriptive statistics
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat x12eq_expost changehat if Type==1

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}x12eq_expost {c |}{res}        640    34.16783    33.00237          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}x12eq_expost {c |}{res}        640    13.91005     22.7108          0      99.01
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}x12eq_expost {c |}{res}        640    13.29694    9.212994          0         25
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}x12eq_expost {c |}{res}        640    13.26608     9.64321          0         25
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1

{txt}
{com}. 
. ********************************************************
. ****WITHIN SESSION TYPE AND ROUND 1 & 2 COMPARISONS*****
. ********************************************************
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat x1eq x2eq x12eq x12eq_expost changehat, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x2hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        11{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        25{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:-0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        15{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        21{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:-0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        22{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        14{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. by alpha: signrank x1hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        15{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        21{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:-0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        22{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        14{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. *LOTTERY*
. by alpha: signrank x1hat=x2hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        19{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        17{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:0.140}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.8886}
{txt}{col 1}Exact prob = {res}{ralign 6:0.9453}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        10{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        26{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:-1.120}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2626}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3125}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        18{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        18{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.000}
{txt}{col 1}Prob > |z| = {res}{ralign 6:1.0000}
{txt}{col 1}Exact prob = {res}{ralign 6:1.0000}
{txt}
{com}. by alpha: signrank x1hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        27{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         9{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         3{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        33{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:-2.100}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0357}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0391}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        18{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        18{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.000}
{txt}{col 1}Prob > |z| = {res}{ralign 6:1.0000}
{txt}{col 1}Exact prob = {res}{ralign 6:1.0000}
{txt}
{com}. 
. ********************************************************
. ****WITHIN SESSION TREATMENT (25 VS. 75) COMPARISONS****
. ********************************************************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. ********************************************************
. ********FIRST CREATE PAIRED OBSERVATIONS DATASET********
. ********************************************************
. sort contest sessionid alpha
{txt}
{com}. collapse x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat, ///
> by(contest sessionid alpha)
{res}{txt}
{com}. save bid25.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25.dta
{txt}
{com}. 
. keep if alpha==0.25
{txt}(16 observations deleted)

{com}. gen x125=x1hat
{txt}
{com}. gen x225=x2hat
{txt}
{com}. gen x1225=x12hat
{txt}
{com}. gen x110025=x1100
{txt}
{com}. gen x210025=x2100
{txt}
{com}. gen x1210025=x12100
{txt}
{com}. gen x1025=x10
{txt}
{com}. gen x2025=x20
{txt}
{com}. gen x12025=x120
{txt}
{com}. gen change25=changehat
{txt}
{com}. drop  x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat
{txt}
{com}. *label var sp5 "SP Low cost"
. sort sessionid
{txt}
{com}. save bid25_1.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25_1.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25.dta
{txt}
{com}. 
. keep if alpha==0.75
{txt}(16 observations deleted)

{com}. gen x175=x1hat
{txt}
{com}. gen x275=x2hat
{txt}
{com}. gen x1275=x12hat
{txt}
{com}. gen x110075=x1100
{txt}
{com}. gen x210075=x2100
{txt}
{com}. gen x1210075=x12100
{txt}
{com}. gen x1075=x10
{txt}
{com}. gen x2075=x20
{txt}
{com}. gen x12075=x120
{txt}
{com}. gen change75=changehat
{txt}
{com}. drop  x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat
{txt}
{com}. *label var sp15 "SP High cost"
. sort sessionid
{txt}
{com}. save bid25_2.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25_2.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25_1.dta
{txt}
{com}. merge 1:1 sessionid using "bid25_2.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              16{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. save bid25.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25.dta{rm}
saved
{p_end}

{com}. 
. 
. ********************************/
. ********SECOND RUN TESTS********
. ********************************/
. 
. sort contest sessionid
{txt}
{com}. by contest: signrank x125=x175

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        33{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         3{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x175
{col 10}z = {res}{ralign 6:2.100}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0357}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0391}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x175
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. by contest: signrank x225=x275

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x225 = x275
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        13{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        23{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x225 = x275
{col 10}z = {res}{ralign 6:-0.700}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4838}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5469}
{txt}
{com}. by contest: signrank x1225=x1275

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1225 = x1275
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        14{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        22{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1225 = x1275
{col 10}z = {res}{ralign 6:-0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. by contest: signrank x110025=x110075

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}        11{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      5{col 26}        24{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.75

{txt}H0: x110025 = x110075
{col 10}z = {res}{ralign 6:-0.912}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3615}
{txt}{col 1}Exact prob = {res}{ralign 6:0.4219}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         7{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      5{col 26}        28{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.75

{txt}H0: x110025 = x110075
{col 10}z = {res}{ralign 6:-1.474}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1405}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1719}
{txt}
{com}. by contest: signrank x210025=x210075

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x210025 = x210075
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         9{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        27{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x210025 = x210075
{col 10}z = {res}{ralign 6:-1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}
{txt}
{com}. by contest: signrank x1210025=x1210075

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}       6.5{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}      29.5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: x1210025 = x1210075
{col 10}z = {res}{ralign 6:-1.612}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1069}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1172}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         9{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        27{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1210025 = x1210075
{col 10}z = {res}{ralign 6:-1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}
{txt}
{com}. 
. by contest: signrank x125=x225

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x225
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        19{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        17{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x225
{col 10}z = {res}{ralign 6:0.140}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.8886}
{txt}{col 1}Exact prob = {res}{ralign 6:0.9453}
{txt}
{com}. by contest: signrank x175=x275

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        11{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        25{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x175 = x275
{col 10}z = {res}{ralign 6:-0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        10{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        26{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x175 = x275
{col 10}z = {res}{ralign 6:-1.120}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2626}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3125}
{txt}
{com}. 
. by contest: signrank change25=change75

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: change25 = change75
{col 10}z = {res}{ralign 6:0.981}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3264}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3672}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         3{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        33{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: change25 = change75
{col 10}z = {res}{ralign 6:-2.103}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0355}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0313}
{txt}
{com}. *log close
. 
. *log using C:\purdue\nonpara, append
. 
. 
. 
. *********************************************************
. 
. 
. *******************
. ******TABLE 5******
. *******************
. clear 
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. 
. sort subjectid Period
{txt}
{com}. by subjectid: gen totaltypea=typea[1]
{txt}
{com}. by subjectid: replace totaltypea=typea[_n]+ totaltypea[_n-1] if _n>1
{txt}(4,879 real changes made)

{com}. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. 
. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. label var xjow "Joy of winning"
{txt}
{com}. label var alpha "$\alpha$"
{txt}
{com}. label var risk "Risk aversion"
{txt}
{com}. label var loss "Loss aversion"
{txt}
{com}. *label var LossLineSwitchToB "Loss aversion"
. label var inv "$1/Period$"
{txt}
{com}. 
. **********SUBJECT RE***********************************************************************
. *ALL PAY AUCTION
. xtreg x d75 inv first20 i.sessionid if Type==1 & contest=="All Pay Auction", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2037                                         {txt}min = {res}        10
{txt}     Between = {res}0.0951                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.1651                                         {txt}max = {res}        27

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}-21.62866{col 26}{space 2} 5.635731{col 37}{space 1}   -3.84{col 46}{space 3}0.000{col 54}{space 4}-32.67449{col 67}{space 3}-10.58283
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 12.60962{col 26}{space 2} 4.003287{col 37}{space 1}    3.15{col 46}{space 3}0.002{col 54}{space 4} 4.763325{col 67}{space 3} 20.45592
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} 9.848289{col 26}{space 2} 5.636506{col 37}{space 1}    1.75{col 46}{space 3}0.081{col 54}{space 4} -1.19906{col 67}{space 3} 20.89564
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}1  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}2  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}3  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}4  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}5  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}6  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}7  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}8  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}9  {c |}{col 14}{res}{space 2}-13.07432{col 26}{space 2}  .215295{col 37}{space 1}  -60.73{col 46}{space 3}0.000{col 54}{space 4}-13.49629{col 67}{space 3}-12.65235
{txt}{space 9}10  {c |}{col 14}{res}{space 2}-6.251099{col 26}{space 2} .2136798{col 37}{space 1}  -29.25{col 46}{space 3}0.000{col 54}{space 4}-6.669904{col 67}{space 3}-5.832294
{txt}{space 9}11  {c |}{col 14}{res}{space 2} .2194068{col 26}{space 2} .2167097{col 37}{space 1}    1.01{col 46}{space 3}0.311{col 54}{space 4}-.2053364{col 67}{space 3}   .64415
{txt}{space 9}12  {c |}{col 14}{res}{space 2}-14.51714{col 26}{space 2} .2189171{col 37}{space 1}  -66.31{col 46}{space 3}0.000{col 54}{space 4}-14.94621{col 67}{space 3}-14.08807
{txt}{space 9}13  {c |}{col 14}{res}{space 2} .0340119{col 26}{space 2} .2334322{col 37}{space 1}    0.15{col 46}{space 3}0.884{col 54}{space 4}-.4235068{col 67}{space 3} .4915305
{txt}{space 9}14  {c |}{col 14}{res}{space 2}-7.736819{col 26}{space 2} .2419127{col 37}{space 1}  -31.98{col 46}{space 3}0.000{col 54}{space 4}-8.210959{col 67}{space 3}-7.262678
{txt}{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 9}16  {c |}{col 14}{res}{space 2}-1.831103{col 26}{space 2}  .233923{col 37}{space 1}   -7.83{col 46}{space 3}0.000{col 54}{space 4}-2.289584{col 67}{space 3}-1.372623
{txt}{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2}  45.5148{col 26}{space 2} 5.654182{col 37}{space 1}    8.05{col 46}{space 3}0.000{col 54}{space 4} 34.43281{col 67}{space 3}  56.5968
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 17.531932
     {txt}sigma_e {c |} {res} 24.428128
         {txt}rho {c |} {res} .33997117{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store A
{txt}
{com}. xtreg x d75 inv first20 i.sessionid if Type==2 & contest=="All Pay Auction", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0310                                         {txt}min = {res}        13
{txt}     Between = {res}0.1809                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.0846                                         {txt}max = {res}        30

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}-8.823015{col 26}{space 2} 2.707373{col 37}{space 1}   -3.26{col 46}{space 3}0.001{col 54}{space 4}-14.12937{col 67}{space 3}-3.516661
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 15.64664{col 26}{space 2} 6.305487{col 37}{space 1}    2.48{col 46}{space 3}0.013{col 54}{space 4} 3.288109{col 67}{space 3} 28.00516
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} .7617391{col 26}{space 2} 2.707106{col 37}{space 1}    0.28{col 46}{space 3}0.778{col 54}{space 4}-4.544092{col 67}{space 3}  6.06757
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}1  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}2  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}3  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}4  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}5  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}6  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}7  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}8  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}9  {c |}{col 14}{res}{space 2} 17.37971{col 26}{space 2} .0574491{col 37}{space 1}  302.52{col 46}{space 3}0.000{col 54}{space 4} 17.26711{col 67}{space 3} 17.49231
{txt}{space 9}10  {c |}{col 14}{res}{space 2}-9.457426{col 26}{space 2} .0672525{col 37}{space 1} -140.63{col 46}{space 3}0.000{col 54}{space 4}-9.589238{col 67}{space 3}-9.325613
{txt}{space 9}11  {c |}{col 14}{res}{space 2} 7.052316{col 26}{space 2}   .05702{col 37}{space 1}  123.68{col 46}{space 3}0.000{col 54}{space 4} 6.940559{col 67}{space 3} 7.164074
{txt}{space 9}12  {c |}{col 14}{res}{space 2}-1.198003{col 26}{space 2} .0572216{col 37}{space 1}  -20.94{col 46}{space 3}0.000{col 54}{space 4}-1.310156{col 67}{space 3}-1.085851
{txt}{space 9}13  {c |}{col 14}{res}{space 2}-2.559409{col 26}{space 2} .0544918{col 37}{space 1}  -46.97{col 46}{space 3}0.000{col 54}{space 4}-2.666211{col 67}{space 3}-2.452607
{txt}{space 9}14  {c |}{col 14}{res}{space 2}-11.53917{col 26}{space 2} .0600383{col 37}{space 1} -192.20{col 46}{space 3}0.000{col 54}{space 4}-11.65684{col 67}{space 3} -11.4215
{txt}{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 9}16  {c |}{col 14}{res}{space 2} .8415434{col 26}{space 2} .0543048{col 37}{space 1}   15.50{col 46}{space 3}0.000{col 54}{space 4}  .735108{col 67}{space 3} .9479789
{txt}{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} 36.89935{col 26}{space 2} 2.515556{col 37}{space 1}   14.67{col 46}{space 3}0.000{col 54}{space 4} 31.96895{col 67}{space 3} 41.82975
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 17.820295
     {txt}sigma_e {c |} {res} 31.362447
         {txt}rho {c |} {res} .24406027{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store B
{txt}
{com}. *xtreg x12hat d75 inv f75 if Type==1 & validriskloss==1 & contest=="All Pay Auction", i(subjectid) vce(cluster sessionid)
. *est store C
. *LOTTERY
. xtreg x d75 inv first20 i.sessionid if Type==1 &  contest=="Lottery", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1223                                         {txt}min = {res}        13
{txt}     Between = {res}0.1529                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.1389                                         {txt}max = {res}        28

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}-5.882275{col 26}{space 2} 3.203799{col 37}{space 1}   -1.84{col 46}{space 3}0.066{col 54}{space 4} -12.1616{col 67}{space 3} .3970548
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 10.74005{col 26}{space 2} 5.453056{col 37}{space 1}    1.97{col 46}{space 3}0.049{col 54}{space 4} .0522542{col 67}{space 3} 21.42784
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} 15.58286{col 26}{space 2} 3.192418{col 37}{space 1}    4.88{col 46}{space 3}0.000{col 54}{space 4} 9.325839{col 67}{space 3} 21.83989
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2} 5.564767{col 26}{space 2} .0909531{col 37}{space 1}   61.18{col 46}{space 3}0.000{col 54}{space 4} 5.386502{col 67}{space 3} 5.743032
{txt}{space 10}3  {c |}{col 14}{res}{space 2} .7650709{col 26}{space 2} .0590974{col 37}{space 1}   12.95{col 46}{space 3}0.000{col 54}{space 4} .6492421{col 67}{space 3} .8808996
{txt}{space 10}4  {c |}{col 14}{res}{space 2}-7.437572{col 26}{space 2} .0175748{col 37}{space 1} -423.20{col 46}{space 3}0.000{col 54}{space 4}-7.472018{col 67}{space 3}-7.403126
{txt}{space 10}5  {c |}{col 14}{res}{space 2} 17.36228{col 26}{space 2} .0237691{col 37}{space 1}  730.45{col 46}{space 3}0.000{col 54}{space 4} 17.31569{col 67}{space 3} 17.40887
{txt}{space 10}6  {c |}{col 14}{res}{space 2} 4.723308{col 26}{space 2} .0177295{col 37}{space 1}  266.41{col 46}{space 3}0.000{col 54}{space 4} 4.688559{col 67}{space 3} 4.758057
{txt}{space 10}7  {c |}{col 14}{res}{space 2} 19.62122{col 26}{space 2} .0262991{col 37}{space 1}  746.08{col 46}{space 3}0.000{col 54}{space 4} 19.56967{col 67}{space 3} 19.67276
{txt}{space 10}8  {c |}{col 14}{res}{space 2} 12.94197{col 26}{space 2} .0224908{col 37}{space 1}  575.43{col 46}{space 3}0.000{col 54}{space 4} 12.89789{col 67}{space 3} 12.98606
{txt}{space 10}9  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}10  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}11  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}12  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}13  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}14  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}16  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} 29.78293{col 26}{space 2}  .953521{col 37}{space 1}   31.23{col 46}{space 3}0.000{col 54}{space 4} 27.91406{col 67}{space 3}  31.6518
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res}  20.48359
     {txt}sigma_e {c |} {res} 23.540113
         {txt}rho {c |} {res} .43090403{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store D
{txt}
{com}. xtreg x d75 inv first20 i.sessionid if Type==2 & contest=="Lottery", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0401                                         {txt}min = {res}        12
{txt}     Between = {res}0.1494                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.0842                                         {txt}max = {res}        27

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2} 1.737756{col 26}{space 2} 4.139132{col 37}{space 1}    0.42{col 46}{space 3}0.675{col 54}{space 4}-6.374793{col 67}{space 3} 9.850305
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 13.42103{col 26}{space 2} 7.400565{col 37}{space 1}    1.81{col 46}{space 3}0.070{col 54}{space 4}-1.083816{col 67}{space 3} 27.92587
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} 8.921215{col 26}{space 2} 4.128025{col 37}{space 1}    2.16{col 46}{space 3}0.031{col 54}{space 4} .8304354{col 67}{space 3} 17.01199
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2} 2.305278{col 26}{space 2}  .093803{col 37}{space 1}   24.58{col 46}{space 3}0.000{col 54}{space 4} 2.121428{col 67}{space 3} 2.489129
{txt}{space 10}3  {c |}{col 14}{res}{space 2}-16.83406{col 26}{space 2} .0728976{col 37}{space 1} -230.93{col 46}{space 3}0.000{col 54}{space 4}-16.97693{col 67}{space 3}-16.69118
{txt}{space 10}4  {c |}{col 14}{res}{space 2}-14.14342{col 26}{space 2} .0488577{col 37}{space 1} -289.48{col 46}{space 3}0.000{col 54}{space 4}-14.23918{col 67}{space 3}-14.04766
{txt}{space 10}5  {c |}{col 14}{res}{space 2} -2.74914{col 26}{space 2} .0235378{col 37}{space 1} -116.80{col 46}{space 3}0.000{col 54}{space 4}-2.795273{col 67}{space 3}-2.703007
{txt}{space 10}6  {c |}{col 14}{res}{space 2}-14.11689{col 26}{space 2} .0236555{col 37}{space 1} -596.77{col 46}{space 3}0.000{col 54}{space 4}-14.16325{col 67}{space 3}-14.07052
{txt}{space 10}7  {c |}{col 14}{res}{space 2}-2.829071{col 26}{space 2} .0416383{col 37}{space 1}  -67.94{col 46}{space 3}0.000{col 54}{space 4} -2.91068{col 67}{space 3}-2.747461
{txt}{space 10}8  {c |}{col 14}{res}{space 2} 7.493147{col 26}{space 2} .0326429{col 37}{space 1}  229.55{col 46}{space 3}0.000{col 54}{space 4} 7.429168{col 67}{space 3} 7.557126
{txt}{space 10}9  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}10  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}11  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}12  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}13  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}14  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}16  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} 42.49708{col 26}{space 2} 2.131756{col 37}{space 1}   19.94{col 46}{space 3}0.000{col 54}{space 4} 38.31891{col 67}{space 3} 46.67524
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 20.396695
     {txt}sigma_e {c |} {res} 26.882051
         {txt}rho {c |} {res} .36536066{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store E
{txt}
{com}. *reg x12 d75 inv f75 if Type==1  &  contest=="Lottery", vce(cluster subjectid)
. *est store F
. 
. esttab A B D E using table5.doc, se r2 keep(_cons d75 inv first20 _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) 
{res}{txt}(output written to {browse  `"table5.doc"'})

{com}. esttab A B D E using table5.doc, se r2 keep(_cons d75 inv first20 _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01)
{res}{txt}(output written to {browse  `"table5.doc"'})

{com}. 
. *******************
. ******TABLE 6******
. *******************
. 
. **********DISPERSION MEASURES****************************
. clear
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if periodt>10
{txt}(2,560 observations deleted)

{com}. 
. gen x_sd=x
{txt}
{com}. gen x_med=x
{txt}
{com}. 
. sort lottery Type alpha sessionid subjectid
{txt}
{com}. collapse (mean) x (sd) x_sd (p50) x_med, by(lottery Type alpha sessionid subjectid)
{res}{txt}
{com}. gen coeff_var=x_sd/x
{txt}(38 missing values generated)

{com}. 
. gen dalpha=0
{txt}
{com}. replace dalpha=1 if alpha==0.75
{txt}(255 real changes made)

{com}. 
. *H_s measure = SD of the median
. by lottery Type alpha sessionid: egen x_sd_med=sd(x_med)
{txt}
{com}. *D_s measure =  Median of the SD
. by lottery Type alpha sessionid: egen x_med_sd=median(x_sd)
{txt}
{com}. 
. sort lottery Type alpha sessionid
{txt}
{com}. collapse x_med_sd x_sd_med, by(lottery Type alpha sessionid)
{res}{txt}
{com}. 
. *Compare alpha's*
. save cv_tests, replace
{txt}{p 0 4 2}
file {bf}
cv_tests.dta{rm}
saved
{p_end}

{com}. 
. keep if alpha==0.25
{txt}(32 observations deleted)

{com}. rename x_sd_med x_med1
{res}{txt}
{com}. rename x_med_sd x_sd1
{res}{txt}
{com}. save cv_type1, replace
{txt}{p 0 4 2}
file {bf}
cv_type1.dta{rm}
saved
{p_end}

{com}. clear
{txt}
{com}. 
. use cv_tests
{txt}
{com}. keep if alpha==0.75
{txt}(32 observations deleted)

{com}. rename x_med_sd x_sd2
{res}{txt}
{com}. rename x_sd_med x_med2
{res}{txt}
{com}. save cv_type2, replace
{txt}{p 0 4 2}
file {bf}
cv_type2.dta{rm}
saved
{p_end}

{com}. merge 1:1 Type sessionid using "cv_type1.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              32{txt}  (_merge==3)
{col 5}{hline 41}

{com}. 
. sort lottery Type
{txt}
{com}. *H_s measure = SD of the median
. by lottery Type: signrank x_med1=x_med2

{txt}{hline}
-> lottery = 0, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        30{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         6{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:1.680}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0929}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1094}

{txt}{hline}
-> lottery = 0, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        13{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        23{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-0.700}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4838}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5469}

{txt}{hline}
-> lottery = 1, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        20{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        16{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}

{txt}{hline}
-> lottery = 1, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}
{txt}
{com}. *D_s measure = Median of the SD
. by lottery Type: signrank x_sd1=x_sd2

{txt}{hline}
-> lottery = 0, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> lottery = 0, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        24{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        12{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.840}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4008}
{txt}{col 1}Exact prob = {res}{ralign 6:0.4609}

{txt}{hline}
-> lottery = 1, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        20{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        16{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}

{txt}{hline}
-> lottery = 1, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        16{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        20{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}
{txt}
{com}. 
. *Compare Types*
. clear
{txt}
{com}. use cv_tests
{txt}
{com}. 
. keep if Type==1
{txt}(32 observations deleted)

{com}. rename x_med_sd x_sd1
{res}{txt}
{com}. rename x_sd_med x_med1
{res}{txt}
{com}. save cv_type1, replace
{txt}{p 0 4 2}
file {bf}
cv_type1.dta{rm}
saved
{p_end}

{com}. clear
{txt}
{com}. use cv_tests
{txt}
{com}. keep if Type==2
{txt}(32 observations deleted)

{com}. rename x_med_sd x_sd2
{res}{txt}
{com}. rename x_sd_med x_med2
{res}{txt}
{com}. save cv_type2, replace
{txt}{p 0 4 2}
file {bf}
cv_type2.dta{rm}
saved
{p_end}

{com}. merge 1:1 alpha sessionid using "cv_type1.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              32{txt}  (_merge==3)
{col 5}{hline 41}

{com}. 
. sort lottery alpha
{txt}
{com}. *H_s measure = SD of the median
. by lottery alpha: signrank x_med1=x_med2

{txt}{hline}
-> lottery = 0, alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}        11{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        25{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> lottery = 0, alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         5{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        31{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> lottery = 1, alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      1{col 26}         3{col 38}        18
    {txt}Negative {c |}{res}{col 17}      7{col 26}        33{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-2.100}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0357}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0391}

{txt}{hline}
-> lottery = 1, alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        15{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        21{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. *D_s measure =  Median of the SD
. by lottery alpha: signrank x_sd1=x_sd2

{txt}{hline}
-> lottery = 0, alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      1{col 26}         4{col 38}        18
    {txt}Negative {c |}{res}{col 17}      7{col 26}        32{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> lottery = 0, alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         4{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        32{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> lottery = 1, alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}

{txt}{hline}
-> lottery = 1, alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}         7{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        29{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}
{txt}
{com}. 
. *Compare Contests*
. clear
{txt}
{com}. use cv_tests
{txt}
{com}. sort alpha Type lottery
{txt}
{com}. *H_s measure = SD of the median
. by alpha Type: ranksum x_sd_med, by(lottery)

{txt}{hline}
-> alpha = .25, Type = 1

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        66{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        70{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_sd_med(lottery==0) = x_sd_med(lottery==1)
{col 10}z = {res}{ralign 6:-0.210}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.8336}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8785}

{txt}{hline}
-> alpha = .25, Type = 2

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        54{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        82{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_sd_med(lottery==0) = x_sd_med(lottery==1)
{col 10}z = {res}{ralign 6:-1.470}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1415}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1605}

{txt}{hline}
-> alpha = .75, Type = 1

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        61{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        75{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_sd_med(lottery==0) = x_sd_med(lottery==1)
{col 10}z = {res}{ralign 6:-0.735}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4622}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5054}

{txt}{hline}
-> alpha = .75, Type = 2

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        73{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        63{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_sd_med(lottery==0) = x_sd_med(lottery==1)
{col 10}z = {res}{ralign 6:0.525}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5995}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6454}
{txt}
{com}. *D_s measure =  Median of the SD
. by alpha Type: ranksum x_med_sd, by(lottery)

{txt}{hline}
-> alpha = .25, Type = 1

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        85{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        51{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_med_sd(lottery==0) = x_med_sd(lottery==1)
{col 10}z = {res}{ralign 6:1.785}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0742}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0830}

{txt}{hline}
-> alpha = .25, Type = 2

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        85{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        51{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.53

{txt}H0: x_med_sd(lottery==0) = x_med_sd(lottery==1)
{col 10}z = {res}{ralign 6:1.787}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0740}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0799}

{txt}{hline}
-> alpha = .75, Type = 1

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        62{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        74{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_med_sd(lottery==0) = x_med_sd(lottery==1)
{col 10}z = {res}{ralign 6:-0.630}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5286}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5737}

{txt}{hline}
-> alpha = .75, Type = 2

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        73{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        63{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_med_sd(lottery==0) = x_med_sd(lottery==1)
{col 10}z = {res}{ralign 6:0.525}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5995}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6454}
{txt}
{com}. 
. *******************
. ******TABLE 7******
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. gen change=.
{txt}(5,120 missing values generated)

{com}. replace change=0 if Type==1 & x12==.
{txt}(530 real changes made)

{com}. replace change=1 if Type==1 & x12~=.
{txt}(2,030 real changes made)

{com}. 
. gen reduce=0
{txt}
{com}. replace reduce=1 if Type==1 & x12hat<x1hat
{txt}(1,065 real changes made)

{com}. 
. gen raise=0
{txt}
{com}. replace raise=1 if Type==1 & x12hat>x1hat
{txt}(965 real changes made)

{com}. 
. gen rationalrev=0
{txt}
{com}. replace rationalrev=1 if x1hat~=br1
{txt}(4,999 real changes made)

{com}. *replace rationalrev=1 if x2hat & lottery==1
. 
. gen overbid=1
{txt}
{com}. replace overbid=0 if x1hat<=br1  
{txt}(1,538 real changes made)

{com}. 
. gen underbid=0
{txt}
{com}. replace underbid=1 if x1hat<br1 
{txt}(1,417 real changes made)

{com}. 
. gen ahead=0
{txt}
{com}. replace ahead=1 if x1hat>x2hat
{txt}(2,544 real changes made)

{com}. 
. gen onedisttoother=x1hat-x2hat
{txt}
{com}. gen twodisttoother=x12hat-x2hat
{txt}
{com}. 
. gen irr_nochange=0 
{txt}
{com}. replace irr_nochange=1 if changehat==0 & rationalrev==1
{txt}(956 real changes made)

{com}. 
. gen irr_rev_dec=0
{txt}
{com}. replace irr_rev_dec=1 if irr_nochange==1
{txt}(956 real changes made)

{com}. replace irr_rev_dec=1 if changehat==1 & x1hat==br1
{txt}(17 real changes made)

{com}. 
. label var rationalrev "Revising is rational"
{txt}
{com}. label var changehat "Subject revised"
{txt}
{com}. label var irr_nochange "No change even though was rational"
{txt}
{com}. 
. *******LOTTERY***************************************************
. xtprobit change d75 inv first20 i.sessionid if Type==1 &  contest=="Lottery", ///
> re i(subjectid) vce(cluster sessionid)

{txt}Fitting comparison model:

{res}{txt}Iteration 0:{space 3}log pseudolikelihood = {res:-769.67696}  
Iteration 1:{space 3}log pseudolikelihood = {res:-737.66994}  
Iteration 2:{space 3}log pseudolikelihood = {res: -737.5654}  
Iteration 3:{space 3}log pseudolikelihood = {res:-737.56539}  
{res}
{txt}Fitting full model:

rho = {res} 0.0     {txt}log pseudolikelihood = {res}-737.56539
{txt}rho = {res} 0.1     {txt}log pseudolikelihood = {res}-674.88078
{txt}rho = {res} 0.2     {txt}log pseudolikelihood = {res}-658.98942
{txt}rho = {res} 0.3     {txt}log pseudolikelihood = {res} -653.9235
{txt}rho = {res} 0.4     {txt}log pseudolikelihood = {res}-653.25686
{txt}rho = {res} 0.5     {txt}log pseudolikelihood = {res}-655.88222

{txt}Iteration 0:{space 3}log pseudolikelihood = {res:-653.43911}  
Iteration 1:{space 3}log pseudolikelihood = {res:-652.27563}  
Iteration 2:{space 3}log pseudolikelihood = {res:-652.20049}  
Iteration 3:{space 3}log pseudolikelihood = {res:-652.20035}  
Iteration 4:{space 3}log pseudolikelihood = {res:-652.20035}  
{res}
{txt}Calculating robust standard errors ...
{res}
{txt}{col 1}Random-effects probit regression{col 55}{lalign 16:Number of obs}{col 71} = {res}{ralign 5:1,280}
{txt}{col 1}{txt}Group variable: {res}subjectid{txt}{col 55}{lalign 16:Number of groups}{col 71} = {res}{ralign 5:64}

{txt}{col 1}Random effects u_i ~ {txt:Gaussian}{col 55}Obs per group:
{col 55}{ralign 16:min}{col 71} = {res}{ralign 5:13}
{txt}{col 55}{ralign 16:avg}{col 71} = {res}{ralign 5:20.0}
{txt}{col 55}{ralign 16:max}{col 71} = {res}{ralign 5:28}

{txt}{col 1}Integration method: {res:mvaghermite}{col 55}{lalign 16:Integration pts.}{col 71} = {res}{ralign 5:12}

{txt}{col 55}{lalign 16:{help j_robustsingular##|_new:Wald chi2(4)}}{col 71} = {res}{ralign 5:.}
{txt}Log pseudolikelihood = {res:-652.20035}{col 55}{lalign 16:Prob > chi2}{col 71} = {res}{ralign 5:.}

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      change{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2} .2187808{col 26}{space 2} .0882491{col 37}{space 1}    2.48{col 46}{space 3}0.013{col 54}{space 4} .0458158{col 67}{space 3} .3917458
{txt}{space 9}inv {c |}{col 14}{res}{space 2} .0421885{col 26}{space 2} .2464714{col 37}{space 1}    0.17{col 46}{space 3}0.864{col 54}{space 4}-.4408865{col 67}{space 3} .5252635
{txt}{space 5}first20 {c |}{col 14}{res}{space 2}-.0110342{col 26}{space 2} .0872932{col 37}{space 1}   -0.13{col 46}{space 3}0.899{col 54}{space 4}-.1821257{col 67}{space 3} .1600572
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2}-.4962743{col 26}{space 2} .0291296{col 37}{space 1}  -17.04{col 46}{space 3}0.000{col 54}{space 4}-.5533673{col 67}{space 3}-.4391813
{txt}{space 10}3  {c |}{col 14}{res}{space 2}-.0632032{col 26}{space 2} .0171023{col 37}{space 1}   -3.70{col 46}{space 3}0.000{col 54}{space 4}-.0967231{col 67}{space 3}-.0296834
{txt}{space 10}4  {c |}{col 14}{res}{space 2}  .165311{col 26}{space 2} .0048128{col 37}{space 1}   34.35{col 46}{space 3}0.000{col 54}{space 4}  .155878{col 67}{space 3}  .174744
{txt}{space 10}5  {c |}{col 14}{res}{space 2}-.5269191{col 26}{space 2} .0129689{col 37}{space 1}  -40.63{col 46}{space 3}0.000{col 54}{space 4}-.5523376{col 67}{space 3}-.5015006
{txt}{space 10}6  {c |}{col 14}{res}{space 2}-.1236445{col 26}{space 2} .0077276{col 37}{space 1}  -16.00{col 46}{space 3}0.000{col 54}{space 4}-.1387902{col 67}{space 3}-.1084987
{txt}{space 10}7  {c |}{col 14}{res}{space 2} .2569834{col 26}{space 2} .0085255{col 37}{space 1}   30.14{col 46}{space 3}0.000{col 54}{space 4} .2402738{col 67}{space 3} .2736931
{txt}{space 10}8  {c |}{col 14}{res}{space 2}-.7889253{col 26}{space 2} .0207369{col 37}{space 1}  -38.04{col 46}{space 3}0.000{col 54}{space 4}-.8295689{col 67}{space 3}-.7482816
{txt}{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} .7769456{col 26}{space 2} .0630668{col 37}{space 1}   12.32{col 46}{space 3}0.000{col 54}{space 4} .6533369{col 67}{space 3} .9005542
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 4}/lnsig2u {c |}{col 14}{res}{space 2}-.5646937{col 26}{space 2} .3005689{col 54}{space 4}-1.153798{col 67}{space 3} .0244106
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |}{col 14}{res}{space 2} .7540121{col 26}{space 2} .1133163{col 54}{space 4} .5616373{col 67}{space 3}  1.01228
{txt}         rho {c |}{col 14}{res}{space 2} .3624621{col 26}{space 2} .0694565{col 54}{space 4}  .239796{col 67}{space 3} .5061023
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. margins, dydx(*) post
{res}
{txt}Average marginal effects{col 58}{lalign 13:Number of obs}{col 71} = {res}{ralign 5:1,280}
{txt}{col 1}Model VCE: {res:Robust}

{txt}{p2colset 1 13 13 2}{...}
{p2col:Expression:}{res:Pr(change=1), predict(pr)}{p_end}
{p2col:dy/dx wrt:}{res:d75 inv first20 2.sessionid 3.sessionid 4.sessionid 5.sessionid 6.sessionid 7.sessionid 8.sessionid}{p_end}
{p2colreset}{...}

{res}{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26} Delta-method
{col 14}{c |}      dy/dx{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}  .058052{col 26}{space 2} .0227854{col 37}{space 1}    2.55{col 46}{space 3}0.011{col 54}{space 4} .0133935{col 67}{space 3} .1027105
{txt}{space 9}inv {c |}{col 14}{res}{space 2} .0111944{col 26}{space 2} .0652702{col 37}{space 1}    0.17{col 46}{space 3}0.864{col 54}{space 4}-.1167329{col 67}{space 3} .1391218
{txt}{space 5}first20 {c |}{col 14}{res}{space 2}-.0029279{col 26}{space 2} .0231626{col 37}{space 1}   -0.13{col 46}{space 3}0.899{col 54}{space 4}-.0483258{col 67}{space 3}   .04247
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2}-.1376612{col 26}{space 2} .0022621{col 37}{space 1}  -60.86{col 46}{space 3}0.000{col 54}{space 4}-.1420948{col 67}{space 3}-.1332276
{txt}{space 10}3  {c |}{col 14}{res}{space 2}-.0158985{col 26}{space 2} .0049808{col 37}{space 1}   -3.19{col 46}{space 3}0.001{col 54}{space 4}-.0256607{col 67}{space 3}-.0061364
{txt}{space 10}4  {c |}{col 14}{res}{space 2} .0389159{col 26}{space 2} .0014934{col 37}{space 1}   26.06{col 46}{space 3}0.000{col 54}{space 4} .0359888{col 67}{space 3}  .041843
{txt}{space 10}5  {c |}{col 14}{res}{space 2} -.146958{col 26}{space 2} .0040178{col 37}{space 1}  -36.58{col 46}{space 3}0.000{col 54}{space 4}-.1548328{col 67}{space 3}-.1390832
{txt}{space 10}6  {c |}{col 14}{res}{space 2}-.0316014{col 26}{space 2} .0024483{col 37}{space 1}  -12.91{col 46}{space 3}0.000{col 54}{space 4}   -.0364{col 67}{space 3}-.0268028
{txt}{space 10}7  {c |}{col 14}{res}{space 2} .0587594{col 26}{space 2} .0028064{col 37}{space 1}   20.94{col 46}{space 3}0.000{col 54}{space 4} .0532589{col 67}{space 3}   .06426
{txt}{space 10}8  {c |}{col 14}{res}{space 2}-.2285684{col 26}{space 2} .0055349{col 37}{space 1}  -41.30{col 46}{space 3}0.000{col 54}{space 4}-.2394167{col 67}{space 3}-.2177201
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{p 0 6 0 78}Note: dy/dx for factor levels is the discrete change from the base level.{txt}{p_end}
{res}{txt}
{com}. est store A
{txt}
{com}. ******************************************
. xtprobit change adist1 adist1_sq ahead d75 inv first20 i.sessionid if Type==1 &  contest=="Lottery", ///
> re i(subjectid) vce(cluster sessionid)

{txt}Fitting comparison model:

{res}{txt}Iteration 0:{space 3}log pseudolikelihood = {res:-769.67696}  
Iteration 1:{space 3}log pseudolikelihood = {res:-700.65596}  
Iteration 2:{space 3}log pseudolikelihood = {res:-700.22552}  
Iteration 3:{space 3}log pseudolikelihood = {res:-700.22551}  
{res}
{txt}Fitting full model:

rho = {res} 0.0     {txt}log pseudolikelihood = {res}-700.22551
{txt}rho = {res} 0.1     {txt}log pseudolikelihood = {res}  -639.821
{txt}rho = {res} 0.2     {txt}log pseudolikelihood = {res}-623.81274
{txt}rho = {res} 0.3     {txt}log pseudolikelihood = {res}-618.59021
{txt}rho = {res} 0.4     {txt}log pseudolikelihood = {res}-617.79237
{txt}rho = {res} 0.5     {txt}log pseudolikelihood = {res}-619.68793

{txt}Iteration 0:{space 3}log pseudolikelihood = {res:  -617.852}  
Iteration 1:{space 3}log pseudolikelihood = {res:-615.13964}  
Iteration 2:{space 3}log pseudolikelihood = {res:-615.07885}  
Iteration 3:{space 3}log pseudolikelihood = {res:-615.07879}  
Iteration 4:{space 3}log pseudolikelihood = {res:-615.07879}  
{res}
{txt}Calculating robust standard errors ...
{res}
{txt}{col 1}Random-effects probit regression{col 55}{lalign 16:Number of obs}{col 71} = {res}{ralign 5:1,280}
{txt}{col 1}{txt}Group variable: {res}subjectid{txt}{col 55}{lalign 16:Number of groups}{col 71} = {res}{ralign 5:64}

{txt}{col 1}Random effects u_i ~ {txt:Gaussian}{col 55}Obs per group:
{col 55}{ralign 16:min}{col 71} = {res}{ralign 5:13}
{txt}{col 55}{ralign 16:avg}{col 71} = {res}{ralign 5:20.0}
{txt}{col 55}{ralign 16:max}{col 71} = {res}{ralign 5:28}

{txt}{col 1}Integration method: {res:mvaghermite}{col 55}{lalign 16:Integration pts.}{col 71} = {res}{ralign 5:12}

{txt}{col 55}{lalign 16:{help j_robustsingular##|_new:Wald chi2(7)}}{col 71} = {res}{ralign 5:.}
{txt}Log pseudolikelihood = {res:-615.07879}{col 55}{lalign 16:Prob > chi2}{col 71} = {res}{ralign 5:.}

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      change{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 6}adist1 {c |}{col 14}{res}{space 2} .0352686{col 26}{space 2} .0069834{col 37}{space 1}    5.05{col 46}{space 3}0.000{col 54}{space 4} .0215813{col 67}{space 3} .0489558
{txt}{space 3}adist1_sq {c |}{col 14}{res}{space 2}-.0003727{col 26}{space 2} .0000797{col 37}{space 1}   -4.68{col 46}{space 3}0.000{col 54}{space 4}-.0005288{col 67}{space 3}-.0002166
{txt}{space 7}ahead {c |}{col 14}{res}{space 2}-.7062746{col 26}{space 2} .1444013{col 37}{space 1}   -4.89{col 46}{space 3}0.000{col 54}{space 4} -.989296{col 67}{space 3}-.4232533
{txt}{space 9}d75 {c |}{col 14}{res}{space 2} .2389978{col 26}{space 2} .0978247{col 37}{space 1}    2.44{col 46}{space 3}0.015{col 54}{space 4} .0472649{col 67}{space 3} .4307307
{txt}{space 9}inv {c |}{col 14}{res}{space 2}-.0221107{col 26}{space 2}  .260318{col 37}{space 1}   -0.08{col 46}{space 3}0.932{col 54}{space 4}-.5323246{col 67}{space 3} .4881032
{txt}{space 5}first20 {c |}{col 14}{res}{space 2}-.0681038{col 26}{space 2} .0962076{col 37}{space 1}   -0.71{col 46}{space 3}0.479{col 54}{space 4}-.2566673{col 67}{space 3} .1204596
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2}-.5895099{col 26}{space 2} .0426357{col 37}{space 1}  -13.83{col 46}{space 3}0.000{col 54}{space 4}-.6730743{col 67}{space 3}-.5059455
{txt}{space 10}3  {c |}{col 14}{res}{space 2}  .139452{col 26}{space 2} .0469407{col 37}{space 1}    2.97{col 46}{space 3}0.003{col 54}{space 4} .0474499{col 67}{space 3} .2314541
{txt}{space 10}4  {c |}{col 14}{res}{space 2} .2200639{col 26}{space 2} .0212347{col 37}{space 1}   10.36{col 46}{space 3}0.000{col 54}{space 4} .1784446{col 67}{space 3} .2616831
{txt}{space 10}5  {c |}{col 14}{res}{space 2}-.4837896{col 26}{space 2} .0463659{col 37}{space 1}  -10.43{col 46}{space 3}0.000{col 54}{space 4}-.5746651{col 67}{space 3}-.3929141
{txt}{space 10}6  {c |}{col 14}{res}{space 2}-.1180472{col 26}{space 2} .0210454{col 37}{space 1}   -5.61{col 46}{space 3}0.000{col 54}{space 4}-.1592955{col 67}{space 3}-.0767988
{txt}{space 10}7  {c |}{col 14}{res}{space 2} .3051533{col 26}{space 2} .0558908{col 37}{space 1}    5.46{col 46}{space 3}0.000{col 54}{space 4} .1956093{col 67}{space 3} .4146972
{txt}{space 10}8  {c |}{col 14}{res}{space 2}-.9474489{col 26}{space 2}  .054865{col 37}{space 1}  -17.27{col 46}{space 3}0.000{col 54}{space 4}-1.054982{col 67}{space 3}-.8399154
{txt}{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} .6758573{col 26}{space 2} .1203529{col 37}{space 1}    5.62{col 46}{space 3}0.000{col 54}{space 4} .4399699{col 67}{space 3} .9117446
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 4}/lnsig2u {c |}{col 14}{res}{space 2} -.493182{col 26}{space 2}  .274208{col 54}{space 4} -1.03062{col 67}{space 3} .0442558
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |}{col 14}{res}{space 2} .7814602{col 26}{space 2} .1071413{col 54}{space 4} .5973154{col 67}{space 3} 1.022375
{txt}         rho {c |}{col 14}{res}{space 2} .3791442{col 26}{space 2} .0645469{col 54}{space 4}  .262964{col 67}{space 3} .5110621
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. margins, dydx(*) post
{res}
{txt}Average marginal effects{col 58}{lalign 13:Number of obs}{col 71} = {res}{ralign 5:1,280}
{txt}{col 1}Model VCE: {res:Robust}

{txt}{p2colset 1 13 13 2}{...}
{p2col:Expression:}{res:Pr(change=1), predict(pr)}{p_end}
{p2col:dy/dx wrt:}{res:adist1 adist1_sq ahead d75 inv first20 2.sessionid 3.sessionid 4.sessionid 5.sessionid 6.sessionid 7.sessionid 8.sessionid}{p_end}
{p2colreset}{...}

{res}{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26} Delta-method
{col 14}{c |}      dy/dx{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 6}adist1 {c |}{col 14}{res}{space 2}  .008764{col 26}{space 2} .0014413{col 37}{space 1}    6.08{col 46}{space 3}0.000{col 54}{space 4} .0059391{col 67}{space 3} .0115888
{txt}{space 3}adist1_sq {c |}{col 14}{res}{space 2}-.0000926{col 26}{space 2} .0000175{col 37}{space 1}   -5.29{col 46}{space 3}0.000{col 54}{space 4}-.0001269{col 67}{space 3}-.0000583
{txt}{space 7}ahead {c |}{col 14}{res}{space 2}-.1755037{col 26}{space 2} .0326778{col 37}{space 1}   -5.37{col 46}{space 3}0.000{col 54}{space 4} -.239551{col 67}{space 3}-.1114565
{txt}{space 9}d75 {c |}{col 14}{res}{space 2} .0593891{col 26}{space 2}  .023566{col 37}{space 1}    2.52{col 46}{space 3}0.012{col 54}{space 4} .0132005{col 67}{space 3} .1055777
{txt}{space 9}inv {c |}{col 14}{res}{space 2}-.0054943{col 26}{space 2}  .064754{col 37}{space 1}   -0.08{col 46}{space 3}0.932{col 54}{space 4}-.1324099{col 67}{space 3} .1214212
{txt}{space 5}first20 {c |}{col 14}{res}{space 2}-.0169233{col 26}{space 2} .0235593{col 37}{space 1}   -0.72{col 46}{space 3}0.473{col 54}{space 4}-.0630986{col 67}{space 3} .0292521
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2}-.1561295{col 26}{space 2} .0077167{col 37}{space 1}  -20.23{col 46}{space 3}0.000{col 54}{space 4} -.171254{col 67}{space 3}-.1410051
{txt}{space 10}3  {c |}{col 14}{res}{space 2} .0315058{col 26}{space 2} .0093295{col 37}{space 1}    3.38{col 46}{space 3}0.001{col 54}{space 4} .0132203{col 67}{space 3} .0497914
{txt}{space 10}4  {c |}{col 14}{res}{space 2} .0485861{col 26}{space 2} .0038315{col 37}{space 1}   12.68{col 46}{space 3}0.000{col 54}{space 4} .0410764{col 67}{space 3} .0560958
{txt}{space 10}5  {c |}{col 14}{res}{space 2}-.1259573{col 26}{space 2} .0113918{col 37}{space 1}  -11.06{col 46}{space 3}0.000{col 54}{space 4}-.1482849{col 67}{space 3}-.1036298
{txt}{space 10}6  {c |}{col 14}{res}{space 2}-.0285105{col 26}{space 2}  .005233{col 37}{space 1}   -5.45{col 46}{space 3}0.000{col 54}{space 4}-.0387671{col 67}{space 3}-.0182539
{txt}{space 10}7  {c |}{col 14}{res}{space 2} .0656866{col 26}{space 2} .0120842{col 37}{space 1}    5.44{col 46}{space 3}0.000{col 54}{space 4}  .042002{col 67}{space 3} .0893713
{txt}{space 10}8  {c |}{col 14}{res}{space 2}-.2616729{col 26}{space 2} .0049277{col 37}{space 1}  -53.10{col 46}{space 3}0.000{col 54}{space 4}-.2713311{col 67}{space 3}-.2520148
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{p 0 6 0 78}Note: dy/dx for factor levels is the discrete change from the base level.{txt}{p_end}
{res}{txt}
{com}. est store B
{txt}
{com}. ******************************************
. xtprobit change adist1 adist1_sq ahead d75 inv first20 RiskLineSwitchToB LossLineSwitchToB //// 
> xjow female if Type==1 & validriskloss==1 &  contest=="Lottery", ///
> re i(subjectid) vce(cluster sessionid)

{txt}Fitting comparison model:

{res}{txt}Iteration 0:{space 3}log pseudolikelihood = {res:-636.72229}  
Iteration 1:{space 3}log pseudolikelihood = {res:-582.32162}  
Iteration 2:{space 3}log pseudolikelihood = {res:-582.07488}  
Iteration 3:{space 3}log pseudolikelihood = {res:-582.07487}  
{res}
{txt}Fitting full model:

rho = {res} 0.0     {txt}log pseudolikelihood = {res}-582.07487
{txt}rho = {res} 0.1     {txt}log pseudolikelihood = {res}-527.31576
{txt}rho = {res} 0.2     {txt}log pseudolikelihood = {res}-513.03345
{txt}rho = {res} 0.3     {txt}log pseudolikelihood = {res}-508.28716
{txt}rho = {res} 0.4     {txt}log pseudolikelihood = {res}-508.04835
{txt}rho = {res} 0.5     {txt}log pseudolikelihood = {res}-511.76404

{txt}Iteration 0:{space 3}log pseudolikelihood = {res:-507.41881}  
Iteration 1:{space 3}log pseudolikelihood = {res:-503.16112}  
Iteration 2:{space 3}log pseudolikelihood = {res:-503.09221}  
Iteration 3:{space 3}log pseudolikelihood = {res:-503.09219}  
{res}
{txt}Calculating robust standard errors ...
{res}
{txt}{col 1}Random-effects probit regression{col 55}{lalign 16:Number of obs}{col 71} = {res}{ralign 5:1,044}
{txt}{col 1}{txt}Group variable: {res}subjectid{txt}{col 55}{lalign 16:Number of groups}{col 71} = {res}{ralign 5:53}

{txt}{col 1}Random effects u_i ~ {txt:Gaussian}{col 55}Obs per group:
{col 55}{ralign 16:min}{col 71} = {res}{ralign 5:13}
{txt}{col 55}{ralign 16:avg}{col 71} = {res}{ralign 5:19.7}
{txt}{col 55}{ralign 16:max}{col 71} = {res}{ralign 5:28}

{txt}{col 1}Integration method: {res:mvaghermite}{col 55}{lalign 16:Integration pts.}{col 71} = {res}{ralign 5:12}

{txt}{col 55}{lalign 16:{help j_robustsingular##|_new:Wald chi2(7)}}{col 71} = {res}{ralign 5:.}
{txt}Log pseudolikelihood = {res:-503.09219}{col 55}{lalign 16:Prob > chi2}{col 71} = {res}{ralign 5:.}

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      change{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 6}adist1 {c |}{col 14}{res}{space 2}  .035572{col 26}{space 2} .0082354{col 37}{space 1}    4.32{col 46}{space 3}0.000{col 54}{space 4} .0194309{col 67}{space 3} .0517131
{txt}{space 3}adist1_sq {c |}{col 14}{res}{space 2}-.0003774{col 26}{space 2} .0000852{col 37}{space 1}   -4.43{col 46}{space 3}0.000{col 54}{space 4}-.0005443{col 67}{space 3}-.0002105
{txt}{space 7}ahead {c |}{col 14}{res}{space 2} -.750815{col 26}{space 2} .1683301{col 37}{space 1}   -4.46{col 46}{space 3}0.000{col 54}{space 4}-1.080736{col 67}{space 3}-.4208941
{txt}{space 9}d75 {c |}{col 14}{res}{space 2} .2287504{col 26}{space 2} .1046125{col 37}{space 1}    2.19{col 46}{space 3}0.029{col 54}{space 4} .0237138{col 67}{space 3} .4337871
{txt}{space 9}inv {c |}{col 14}{res}{space 2}-.1704147{col 26}{space 2} .2044691{col 37}{space 1}   -0.83{col 46}{space 3}0.405{col 54}{space 4}-.5711668{col 67}{space 3} .2303375
{txt}{space 5}first20 {c |}{col 14}{res}{space 2}-.0539518{col 26}{space 2} .1004698{col 37}{space 1}   -0.54{col 46}{space 3}0.591{col 54}{space 4} -.250869{col 67}{space 3} .1429655
{txt}RiskLineSw~B {c |}{col 14}{res}{space 2}-.2095856{col 26}{space 2} .0255807{col 37}{space 1}   -8.19{col 46}{space 3}0.000{col 54}{space 4}-.2597228{col 67}{space 3}-.1594484
{txt}LossLineSw~B {c |}{col 14}{res}{space 2} .0874333{col 26}{space 2} .0533891{col 37}{space 1}    1.64{col 46}{space 3}0.101{col 54}{space 4}-.0172074{col 67}{space 3} .1920741
{txt}{space 8}xjow {c |}{col 14}{res}{space 2} .0068604{col 26}{space 2} .0048086{col 37}{space 1}    1.43{col 46}{space 3}0.154{col 54}{space 4}-.0025641{col 67}{space 3}  .016285
{txt}{space 6}female {c |}{col 14}{res}{space 2} .0037438{col 26}{space 2} .2641341{col 37}{space 1}    0.01{col 46}{space 3}0.989{col 54}{space 4}-.5139496{col 67}{space 3} .5214372
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 1.845804{col 26}{space 2} .5477337{col 37}{space 1}    3.37{col 46}{space 3}0.001{col 54}{space 4} .7722659{col 67}{space 3} 2.919342
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 4}/lnsig2u {c |}{col 14}{res}{space 2}-.4076694{col 26}{space 2} .3317836{col 54}{space 4}-1.057953{col 67}{space 3} .2426146
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |}{col 14}{res}{space 2} .8155972{col 26}{space 2} .1353009{col 54}{space 4} .5892076{col 67}{space 3} 1.128972
{txt}         rho {c |}{col 14}{res}{space 2} .3994711{col 26}{space 2} .0795929{col 54}{space 4} .2577008{col 67}{space 3} .5603579
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. margins, dydx(*) post
{res}
{txt}Average marginal effects{col 58}{lalign 13:Number of obs}{col 71} = {res}{ralign 5:1,044}
{txt}{col 1}Model VCE: {res:Robust}

{txt}{p2colset 1 13 13 2}{...}
{p2col:Expression:}{res:Pr(change=1), predict(pr)}{p_end}
{p2col:dy/dx wrt:}{res:adist1 adist1_sq ahead d75 inv first20 RiskLineSwitchToB LossLineSwitchToB xjow female}{p_end}
{p2colreset}{...}

{res}{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31} Delta-method
{col 19}{c |}      dy/dx{col 31}   std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 11}adist1 {c |}{col 19}{res}{space 2} .0087322{col 31}{space 2} .0014687{col 42}{space 1}    5.95{col 51}{space 3}0.000{col 59}{space 4} .0058535{col 72}{space 3} .0116109
{txt}{space 8}adist1_sq {c |}{col 19}{res}{space 2}-.0000926{col 31}{space 2} .0000163{col 42}{space 1}   -5.68{col 51}{space 3}0.000{col 59}{space 4}-.0001246{col 72}{space 3}-.0000607
{txt}{space 12}ahead {c |}{col 19}{res}{space 2}-.1843095{col 31}{space 2} .0318074{col 42}{space 1}   -5.79{col 51}{space 3}0.000{col 59}{space 4}-.2466509{col 72}{space 3}-.1219681
{txt}{space 14}d75 {c |}{col 19}{res}{space 2} .0561535{col 31}{space 2} .0242787{col 42}{space 1}    2.31{col 51}{space 3}0.021{col 59}{space 4} .0085681{col 72}{space 3} .1037389
{txt}{space 14}inv {c |}{col 19}{res}{space 2}-.0418333{col 31}{space 2} .0509264{col 42}{space 1}   -0.82{col 51}{space 3}0.411{col 59}{space 4}-.1416472{col 72}{space 3} .0579807
{txt}{space 10}first20 {c |}{col 19}{res}{space 2} -.013244{col 31}{space 2} .0240796{col 42}{space 1}   -0.55{col 51}{space 3}0.582{col 59}{space 4}-.0604392{col 72}{space 3} .0339511
{txt}RiskLineSwitchToB {c |}{col 19}{res}{space 2}-.0514489{col 31}{space 2} .0058973{col 42}{space 1}   -8.72{col 51}{space 3}0.000{col 59}{space 4}-.0630074{col 72}{space 3}-.0398904
{txt}LossLineSwitchToB {c |}{col 19}{res}{space 2} .0214631{col 31}{space 2} .0127618{col 42}{space 1}    1.68{col 51}{space 3}0.093{col 59}{space 4}-.0035495{col 72}{space 3} .0464756
{txt}{space 13}xjow {c |}{col 19}{res}{space 2} .0016841{col 31}{space 2} .0011237{col 42}{space 1}    1.50{col 51}{space 3}0.134{col 59}{space 4}-.0005183{col 72}{space 3} .0038865
{txt}{space 11}female {c |}{col 19}{res}{space 2}  .000919{col 31}{space 2} .0648951{col 42}{space 1}    0.01{col 51}{space 3}0.989{col 59}{space 4} -.126273{col 72}{space 3} .1281111
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. est store C
{txt}
{com}. *****************************************
. esttab A B C using table.tex, se r2 keep(adist1 adist1_sq ahead d75 inv f75 ///
> RiskLineSwitchToB LossLineSwitchToB xjow female) ///
> replace f starlevels(* 0.1 ** 0.05 *** 0.01)
{res}{err}coefficient f75 not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Soloproj.do"
{txt}
{com}. clear all 
{res}{txt}
{com}. /*desktop directory
> cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
> */
. *laptop directory
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
. *school computer directory
. 
. *Start
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(8 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(2 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. ****************************************
. *************REPLICATION****************
. ****************************************
. 
. *******************
. ******FIGURE 1*****
. *******************
. 
. *****TREATMENTS***
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x1hat x1eq, by(contest alpha)
{res}{txt}
{com}. 
. gen time=1
{txt}
{com}. rename x1hat observed
{res}{txt}
{com}. rename x1eq equilibrium
{res}{txt}
{com}. 
. save d1, replace
{txt}{p 0 4 2}
file {bf}
d1.dta{rm}
saved
{p_end}

{com}. 
. **Step 2**
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x2hat x2eq, by(contest alpha)
{res}{txt}
{com}. 
. gen time=2
{txt}
{com}. rename x2hat observed
{res}{txt}
{com}. rename x2eq equilibrium
{res}{txt}
{com}. 
. save d2, replace
{txt}{p 0 4 2}
file {bf}
d2.dta{rm}
saved
{p_end}

{com}. 
. **Step 3**
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(9 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(1 real change made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. drop if Type==2
{txt}(2,560 observations deleted)

{com}. sort contest alpha
{txt}
{com}. collapse x12hat x12eq, by(contest alpha)
{res}{txt}
{com}. gen time=3
{txt}
{com}. rename x12hat observed
{res}{txt}
{com}. rename x12eq equilibrium
{res}{txt}
{com}. 
. save d12, replace
{txt}{p 0 4 2}
file {bf}
d12.dta{rm}
saved
{p_end}

{com}. 
. append using d1
{txt}
{com}. append using d2
{txt}
{com}. 
. gen a25=1 if alpha==0.25
{txt}(6 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(6 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(6 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(6 real changes made)

{com}. gen timeg=1 if time==1
{txt}(8 missing values generated)

{com}. replace timeg=2 if time==2
{txt}(4 real changes made)

{com}. replace timeg=3 if time==3
{txt}(4 real changes made)

{com}. 
. label var observed "Observed"
{txt}
{com}. label var equilibrium "Equilibrium"
{txt}
{com}. 
. save treatments, replace
{txt}{p 0 4 2}
file {bf}
treatments.dta{rm}
saved
{p_end}

{com}. 
. sort time
{txt}
{com}. *label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
. label define a25 0 " " 1 "alpha=0.25" 2 "0.75" 3 " "
{txt}
{com}. label define time 1 "Type A - Round 1" 2 "Type B - Round 1" 3 "Type A - Round 2"
{txt}
{com}. label val timeg time
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. format observed %9.2f
{txt}
{com}. format equilibrium %9.2f
{txt}
{com}. 
. *All Pay
. twoway scatter observed equilibrium alphag if contest=="All Pay Auction", ///
> by(timeg, cols(3) note("")) mlabel(observed equilibrium) mlabc(black black) mlabsize(medium medium) mlabposition(12 12) ///
> xlabel(0 1 2 3, valuelabel labs(medium)) connect(l l) lp(solid dash) lc(black black) mc(black black) ///
> legend(off) ylabel(0(25)50) ytitle("Expenditure") ///
> saving(fig1APA, replace)
{res}{txt}file {bf:fig1APA.gph} saved

{com}. graph use fig1APA
{res}{txt}
{com}. graph export fig1APA.pdf, replace
{txt}{p 0 4 2}
file {bf}
fig1APA.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *Lottery
. twoway scatter observed equilibrium alphag if contest=="Lottery", ///
> by(timeg , cols(3) note("")) mlabel(observed equilibrium) mlabc(black black) mlabsize(medium medium) mlabposition(12 12) ///
> xlabel(0 1 2 3, valuelabel labs(medium)) connect(l l) lp(solid dash) lc(black black) mc(black black) ///
> legend(off) ylabel(0(25)50) ytitle("Expenditure") ///
> saving(fig1Lott, replace)
{res}{txt}file {bf:fig1Lott.gph} saved

{com}. graph use fig1Lott
{res}{txt}
{com}. graph export fig1Lott.pdf, replace
{txt}{p 0 4 2}
file {bf}
fig1Lott.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 2*****
. *******************
. 
. *****HISTOGRAMS****
. clear 
{txt}
{com}. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(8 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(2 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. *Type A*
.    hist x1hat if Type==1 & lottery==0 & alpha==0.25, ///
>      xline(75) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.25") col(blue) lc(black) saving(1APA25, replace) 
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1APA25.gph} saved

{com}.    hist x1hat if Type==1 & lottery==0 & alpha==0.75, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.75") col(blue) lc(black) saving(1APA75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1APA75.gph} saved

{com}.    hist x1hat if Type==1 & lottery==1 & alpha==0.25, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.25") col(blue) lc(black) saving(1Lott25, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1Lott25.gph} saved

{com}.    hist x1hat if Type==1 & lottery==1 & alpha==0.75, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.75") col(blue) lc(black) saving(1Lott75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:1Lott75.gph} saved

{com}. 
. gr combine 1APA25.gph 1APA75.gph 1Lott25.gph 1Lott75.gph, saving(1hist, replace)
{res}{txt}file {bf:1hist.gph} saved

{com}.           graph use 1hist
{res}{txt}
{com}.       graph export Fig21.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig21.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *Type B*
.    hist x2hat if Type==1 & lottery==0 & alpha==0.25, /// 
>      xline(75) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.25") col(blue) lc(black) saving(2APA25, replace) 
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2APA25.gph} saved

{com}.    hist x2hat if Type==1 & lottery==0 & alpha==0.75, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("All-pay auction, alpha=0.75") col(blue) lc(black) saving(2APA75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2APA75.gph} saved

{com}.    hist x2hat if Type==1 & lottery==1 & alpha==0.25, /// 
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.25") col(blue) lc(black) saving(2Lott25, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2Lott25.gph} saved

{com}.    hist x2hat if Type==1 & lottery==1 & alpha==0.75, ///
>      xline(25) width(5) fraction ylabel(0(0.1)0.5) title("Lottery, alpha=0.75") col(blue) lc(black) saving(2Lott75, replace)
{txt}(bin={res}20{txt}, start={res}0{txt}, width={res}5{txt})
{res}{txt}file {bf:2Lott75.gph} saved

{com}. 
. gr combine 2APA25.gph 2APA75.gph 2Lott25.gph 2Lott75.gph, saving(2hist, replace)
{res}{txt}file {bf:2hist.gph} saved

{com}.           graph use 2hist
{res}{txt}
{com}.       graph export Fig22.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig22.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 3*****
. *******************
. 
. *****BOX PLOTS*****
. clear 
{txt}
{com}.           
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(2 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(8 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. drop if periodt<11
{txt}(2,560 observations deleted)

{com}. 
. sort lottery Type alpha subjectid
{txt}
{com}. by lottery Type alpha subjectid: egen med_x=median(x)
{txt}
{com}. by lottery Type alpha subjectid: egen lqt_x = pctile(x), p(25)
{txt}
{com}. by lottery Type alpha subjectid: egen uqt_x = pctile(x), p(75)
{txt}
{com}. by lottery Type alpha subjectid: egen iqr_x = iqr(x)
{txt}
{com}. by lottery Type alpha subjectid: egen mean_x = mean(x)
{txt}
{com}. by lottery Type alpha subjectid: egen sd_x = sd(x)
{txt}(4 missing values generated)

{com}. 
. by lottery Type alpha subjectid: egen ls_x = min(max(x, lqt_x-1.5*iqr_x))
{txt}
{com}. by lottery Type alpha subjectid: egen us_x = max(min(x, uqt_x+1.5*iqr_x))
{txt}
{com}. gen coeff_var=sd_x/mean_x
{txt}(168 missing values generated)

{com}. 
. gen out_x = x if(x<=lqt_x-1.5*iqr_x | x>=uqt_x+1.5*iqr_x)
{txt}(1,594 missing values generated)

{com}. 
. sort lottery Type alpha mean_x subjectid
{txt}
{com}. egen mean_id=group(lottery Type alpha mean_x subjectid)
{txt}
{com}. 
. by lottery Type alpha: egen min_id=min(mean_id)
{txt}
{com}. gen mean_id_scale=mean_id-min_id+1
{txt}
{com}. 
. label var mean_id_scale "Subject rank (low to high mean)"
{txt}
{com}. label var x "Exp."
{txt}
{com}. 
. *LOTTERY*
. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.25 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.25 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.25", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure") ylabel(0(25)100) name(typeA_025_subj, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.25 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.25 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.25", si(medium)) yline(25, lc(blue)) ///        
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_025_subj, replace)
{res}{txt}
{com}. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.75 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.75 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeA_075_subj, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==1 & alpha==0.75 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==1 & alpha==0.75 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("Lottery - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_075_subj, replace)
{res}{txt}
{com}. 
. graph combine typeA_025_subj typeA_075_subj typeB_025_subj typeB_075_subj, name(box_subj, replace)
{res}{txt}
{com}. graph export Fig3A.jpg, replace
{res}{txt}file {bf:Fig3A.jpg} written in JPEG format

{com}. 
. *ALL-PAY*
. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.25 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.25 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.25", si(medium)) yline(75, lc(blue)) ///
>                 ytitle("Expenditure") ylabel(0(25)100) name(typeA_025_subj_apa, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.25 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.25 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.25", si(medium)) yline(75, lc(blue)) ///        
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_025_subj_apa, replace)
{res}{txt}
{com}. 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.75 & Type==1, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.75 & Type==1, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeA_075_subj_apa, replace)
{res}{txt}
{com}.                 
. twoway  rbar lqt_x med_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rbar med_x uqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, fcolor(gs12) lcolor(black)  || ///
>                 rspike uqt_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rspike ls_x lqt_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)   || ///
>                 rcap us_x us_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 rcap ls_x ls_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, lcolor(gs12)  || ///
>                 scatter out_x mean_id_scale if  lottery==0 & alpha==0.75 & Type==2, ms(circle) mcolor(blue) mfc(none) msize(0.4) || ///
>                 scatter mean_x mean_id_scale if lottery==0 & alpha==0.75 & Type==2, legend(off) ms(diamond) mcolor(red) mfc(none) msize(0.4) title("All-Pay - alpha = 0.75", si(medium)) yline(25, lc(blue)) ///
>                 ytitle("Expenditure")  ylabel(0(25)100) name(typeB_075_subj_apa, replace)
{res}{txt}
{com}. 
. *graph combine typeA_025_subj typeA_075_subj typeB_025_subj typeB_075_subj, name(box_subj_apa, replace)
. *graph export box_subj_apa.jpg, replace
. 
. graph combine typeA_025_subj_apa typeA_025_subj typeA_075_subj_apa typeA_075_subj, name(box_typeA, replace)
{res}{txt}
{com}. graph export box_typeA.pdf, replace
{txt}{p 0 4 2}
file {bf}
box_typeA.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. graph combine typeB_025_subj_apa typeB_025_subj typeB_075_subj_apa typeB_075_subj, name(box_typeB, replace)
{res}{txt}
{com}. graph export Fig3B.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig3B.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *******************
. ******FIGURE 4*****
. *******************
. clear    
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. gen change=.
{txt}(5,120 missing values generated)

{com}. replace change=0 if Type==1 & x12==.
{txt}(530 real changes made)

{com}. replace change=1 if Type==1 & x12~=.
{txt}(2,030 real changes made)

{com}. 
. gen reduce=0
{txt}
{com}. replace reduce=1 if Type==1 & x12hat<x1hat
{txt}(1,065 real changes made)

{com}. 
. gen raise=0
{txt}
{com}. replace raise=1 if Type==1 & x12hat>x1hat
{txt}(965 real changes made)

{com}. 
. gen rationalrev=0
{txt}
{com}. replace rationalrev=1 if x1hat~=br1
{txt}(4,999 real changes made)

{com}. *replace rationalrev=1 if x2hat & lottery==1
. 
. gen overbid=1
{txt}
{com}. replace overbid=0 if x1hat<=br1  
{txt}(1,541 real changes made)

{com}. 
. gen underbid=0
{txt}
{com}. replace underbid=1 if x1hat<br1 
{txt}(1,420 real changes made)

{com}. 
. gen ahead=0
{txt}
{com}. replace ahead=1 if x1hat>x2hat
{txt}(2,544 real changes made)

{com}. 
. gen onedisttoother=x1hat-x2hat
{txt}
{com}. gen twodisttoother=x12hat-x2hat
{txt}
{com}. 
. gen irr_nochange=0 
{txt}
{com}. replace irr_nochange=1 if changehat==0 & rationalrev==1
{txt}(956 real changes made)

{com}. 
. gen irr_rev_dec=0
{txt}
{com}. replace irr_rev_dec=1 if irr_nochange==1
{txt}(956 real changes made)

{com}. replace irr_rev_dec=1 if changehat==1 & x1hat==br1
{txt}(17 real changes made)

{com}. 
. 
. label var rationalrev "Revising is rational"
{txt}
{com}. label var changehat "Subject revised"
{txt}
{com}. label var irr_nochange "No change even though was rational"
{txt}
{com}. 
. sort contest alpha
{txt}
{com}. collapse changehat rationalrev, by(contest alpha)
{res}{txt}
{com}. 
. sort contest
{txt}
{com}. gen low=1 if alpha==0.25
{txt}(2 missing values generated)

{com}. replace low=4 if alpha==0.75
{txt}(2 real changes made)

{com}. gen low1=2 if alpha==0.25
{txt}(2 missing values generated)

{com}. replace low1=5 if alpha==0.75
{txt}(2 real changes made)

{com}. 
. label var changehat "Actual revision"
{txt}
{com}. label var rationalrev "Rational revision"
{txt}
{com}. 
. twoway  (bar changehat low, barw(1) bcolor(blue)) ///
> (bar rationalrev low1, barw(1) bcolor(gray)), ///
> ytitle("Fraction") ylabel(0(0.2)1) xlabel(1.5 "alpha=0.25" 4.5 "alpha=0.75") by(contest, note(""))  ///
> saving(revision, replace)
{res}{txt}file {bf:revision.gph} saved

{com}. graph use revision
{res}{txt}
{com}. graph export Fig4.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig4.pdf{rm}
saved as
PDF
format
{p_end}

{com}.           
. *******************
. ******FIGURE 5*****
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. *Period >10 & <=20 & Period >30
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. keep if Type==1
{txt}(2,560 observations deleted)

{com}. keep if lottery==0
{txt}(1,280 observations deleted)

{com}. 
. *keep if changehat==1
. 
. *keep if validriskloss==1
. 
. gen a25=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(640 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(640 real changes made)

{com}. 
. label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. 
. 
. **************************
. ***(a) All observations***
. **************************
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. twoway (scatter br1 x2hat, legend(off) ms(X) mfc(none) mlc(red) msize(vlarge)) ///
> (scatter x12hat x2hat, legend(off) ms(circle) mfc(none) mlc(black) mlw(medium) ytitle("Type A - Round 2")) if lottery==0, ///
> by(alphag, note("")) saving("bra_brall", replace) 
{res}{txt}file {bf:bra_brall.gph} saved

{com}. graph use bra_brall
{res}{txt}
{com}. graph export Fig5b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig5b.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *****************************
. ***(b) Revised Expenditure***
. *****************************
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. twoway (scatter br1 x2hat if changehat==1, legend(off) ms(X) mfc(none) mlc(red) msize(vlarge)) ///
> (scatter x12hat x2hat if changehat==1, legend(off) ms(circle) mfc(none) mlc(black) mlw(medium) ytitle("Type A - Round 2")), ///
> by(alphag, note("")) saving("bra_brch", replace) 
{res}{txt}file {bf:bra_brch.gph} saved

{com}. graph use bra_brch
{res}{txt}
{com}. graph export Fig5b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig5b.pdf{rm}
saved as
PDF
format
{p_end}

{com}.   
. *******************
. ******FIGURE 6*****
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. 
. *keep if changehat==1
. 
. *Period >10 & <=20 & Period >30
. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. keep if lottery==1
{txt}(2,560 observations deleted)

{com}. keep if Type==1
{txt}(1,280 observations deleted)

{com}. sum match2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}match2 {c |}{res}      1,280     .046875    .2114537          0          1
{txt}
{com}. 
. *gen direction=0
. *replace direction=1 if diff_br_1>diff_br_2
. *replace direction=1 if  diff_br_1==diff_br_2 & diff_br_1==0
. 
. gen outspend2=0
{txt}
{com}. replace outspend2=1 if x12hat>=x2hat
{txt}(927 real changes made)

{com}. sum outspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}outspend2 {c |}{res}      1,280    .7242188    .4470818          0          1
{txt}
{com}. gen slightoutspend2=0
{txt}
{com}. replace slightoutspend2=1 if x12hat-x2hat>=0.01 
{txt}(796 real changes made)

{com}. replace slightoutspend2=0 if x12hat-x2hat>5
{txt}(551 real changes made)

{com}. sum slightoutspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
slightouts~2 {c |}{res}      1,280    .1914063    .3935618          0          1
{txt}
{com}. 
. gen sqrtx2hat=sqrt(x2hat)
{txt}
{com}. gen x2hatsq=x2hat*x2hat
{txt}
{com}. 
. egen xjowbar=mean(xjow)
{txt}
{com}. 
. 
. *alpha=0.25
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25, i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1541                                         {txt}min = {res}         5
{txt}     Between = {res}0.0050                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.0905                                         {txt}max = {res}        16

                                                {txt}Wald chi2({res}3{txt})      =  {res}    58.02
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.5496476{col 26}{space 2} .1381015{col 37}{space 1}   -3.98{col 46}{space 3}0.000{col 54}{space 4}-.8203214{col 67}{space 3}-.2789737
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 8.503715{col 26}{space 2} 1.432925{col 37}{space 1}    5.93{col 46}{space 3}0.000{col 54}{space 4} 5.695233{col 67}{space 3}  11.3122
{txt}{space 9}inv {c |}{col 14}{res}{space 2}  8.08702{col 26}{space 2} 6.851729{col 37}{space 1}    1.18{col 46}{space 3}0.238{col 54}{space 4}-5.342123{col 67}{space 3} 21.51616
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 16.23312{col 26}{space 2} 4.363813{col 37}{space 1}    3.72{col 46}{space 3}0.000{col 54}{space 4} 7.680207{col 67}{space 3} 24.78604
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.974798
     {txt}sigma_e {c |} {res} 26.665094
         {txt}rho {c |} {res} .35944634{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.25, vce(cluster subjectid)
. est store A
{txt}
{com}. *predict xbr25 if alpha==0.25
. gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. *alpha=0.75
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2254                                         {txt}min = {res}         4
{txt}     Between = {res}0.1085                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.1848                                         {txt}max = {res}        17

                                                {txt}Wald chi2({res}3{txt})      =  {res}   254.55
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.7994133{col 26}{space 2} .1344883{col 37}{space 1}   -5.94{col 46}{space 3}0.000{col 54}{space 4}-1.063005{col 67}{space 3}-.5358212
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2}  11.4271{col 26}{space 2} 1.245723{col 37}{space 1}    9.17{col 46}{space 3}0.000{col 54}{space 4} 8.985531{col 67}{space 3} 13.86867
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 17.98433{col 26}{space 2} 1.531107{col 37}{space 1}   11.75{col 46}{space 3}0.000{col 54}{space 4} 14.98342{col 67}{space 3} 20.98525
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 11.77709{col 26}{space 2} 4.983728{col 37}{space 1}    2.36{col 46}{space 3}0.018{col 54}{space 4} 2.009159{col 67}{space 3} 21.54501
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.466571
     {txt}sigma_e {c |} {res}  25.60477
         {txt}rho {c |} {res} .36629143{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store B
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       434
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        60

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2216                                         {txt}min = {res}         1
{txt}     Between = {res}0.2036                                         {txt}avg = {res}       7.2
{txt}     Overall = {res}0.1870                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}3{txt})      =  {res}   109.89
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6214736{col 26}{space 2} .2528202{col 37}{space 1}   -2.46{col 46}{space 3}0.014{col 54}{space 4}-1.116992{col 67}{space 3}-.1259551
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.16473{col 26}{space 2} 2.343644{col 37}{space 1}    4.34{col 46}{space 3}0.000{col 54}{space 4} 5.571275{col 67}{space 3} 14.75819
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 9.185786{col 26}{space 2} 8.942919{col 37}{space 1}    1.03{col 46}{space 3}0.304{col 54}{space 4}-8.342014{col 67}{space 3} 26.71359
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 8.094571{col 26}{space 2} 4.665199{col 37}{space 1}    1.74{col 46}{space 3}0.083{col 54}{space 4} -1.04905{col 67}{space 3} 17.23819
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 18.754565
     {txt}sigma_e {c |} {res} 26.827845
         {txt}rho {c |} {res} .32827302{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store C
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr25_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       476
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        63

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2665                                         {txt}min = {res}         1
{txt}     Between = {res}0.2733                                         {txt}avg = {res}       7.6
{txt}     Overall = {res}0.2384                                         {txt}max = {res}        13

                                                {txt}Wald chi2({res}3{txt})      =  {res}   219.70
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6550246{col 26}{space 2} .1310692{col 37}{space 1}   -5.00{col 46}{space 3}0.000{col 54}{space 4}-.9119155{col 67}{space 3}-.3981336
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.76415{col 26}{space 2} 1.085404{col 37}{space 1}    9.92{col 46}{space 3}0.000{col 54}{space 4} 8.636801{col 67}{space 3} 12.89151
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 11.99457{col 26}{space 2} 3.535731{col 37}{space 1}    3.39{col 46}{space 3}0.001{col 54}{space 4} 5.064662{col 67}{space 3} 18.92447
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 10.57784{col 26}{space 2} 5.153371{col 37}{space 1}    2.05{col 46}{space 3}0.040{col 54}{space 4} .4774191{col 67}{space 3} 20.67826
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res}  18.59713
     {txt}sigma_e {c |} {res} 24.950564
         {txt}rho {c |} {res} .35714479{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store D
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. 
. 
. esttab A B C D using table.tex, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}(output written to {browse  `"table.tex"'})

{com}. esttab A B C D using table.txt, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}(output written to {browse  `"table.txt"'})

{com}. *se keep(x2hat  x2hatsq inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
. 
. gen a25=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace a25=2 if alpha==0.75
{txt}(640 real changes made)

{com}. gen alphag=1 if alpha==0.25
{txt}(640 missing values generated)

{com}. replace alphag=2 if alpha==0.75
{txt}(640 real changes made)

{com}. 
. label define a25 0 " " 1 "alpha=0.25" 2 "alpha=0.75" 3 " "
{txt}
{com}. label val alphag a25
{txt}
{com}. label var alphag "Treatment"
{txt}
{com}. 
. label var br1 "Best Response"
{txt}
{com}. label var x12hat "Observations"
{txt}
{com}. 
. sort x2hat
{txt}
{com}. *twoway (scatter x12hat x2hat) (line br1 x2hat) 
. *twoway (line xbr25 x2hat) (line xbr75 x2hat) (line br1 x2hat) 
. gen x1225=x12hat if alpha==0.25
{txt}(640 missing values generated)

{com}. gen x1275=x12hat if alpha==0.75
{txt}(640 missing values generated)

{com}. 
. **************************
. ***(a) All observations***
. **************************
. *****with the cloud of points and estimated BR****************
. twoway (line xbr25 x2hat, lwidth(thick) lp(longdash_dot) lc(black)) ///
> (line xbr75 x2hat, lwidth(thick) lp(dash) lc(black)) ///
> (line br1 x2hat, lwidth(medthick) legend(off) lc(red)) ///
> (scatter x12hat x2hat, ms(circle) mfc(none) mlc(black) mlw(medium)), /// *(line xbr25 x2hat, lwidth(thick) lp(longdash_dot)) /// *(line xbr75 x2hat, lwidth(thick) lp(dash)) ///
> text(35 80 "{c -(}bf:alpha=0.75{c )-}", color(blue)) text(52 90 "{c -(}bf:alpha=0.25{c )-}", color(blue)) text(20 70 "{c -(}bf:Risk Neutral BR{c )-}", color(blue)) ///
> ylabel(0(20)100) ytitle("Type A - Round 2") ///
> saving("brl_brall", replace)
{res}{txt}file {bf:brl_brall.gph} saved

{com}. graph use brl_brall
{res}{txt}
{com}. graph export Fig6a.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig6a.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. *****************************
. ***(b) Revised Expenditure***
. *****************************
. twoway (line xbr25_rev x2hat if changehat==1, lwidth(thick) lp(longdash_dot) lc(black)) ///
> (line xbr75_rev x2hat if changehat==1, lwidth(thick) lp(dash) lc(black)) ///
> (line br1 x2hat if changehat==1, lwidth(medthick) legend(off) lc(red)) ///
> (scatter x12hat x2hat if changehat==1, ms(circle) mfc(none) mlc(black) mlw(medium)), /// *(line xbr25 x2hat, lwidth(thick) lp(longdash_dot)) /// *(line xbr75 x2hat, lwidth(thick) lp(dash)) ///
> ylabel(0(20)100) ytitle("Type A - Round 2") ///
> text(38 65 "{c -(}bf:alpha=0.75{c )-}", color(blue)) text(47 90 "{c -(}bf:alpha=0.25{c )-}", color(blue)) text(20 70 "{c -(}bf:Risk Neutral BR{c )-}", color(blue)) ///
> saving("brl_brch", replace)
{res}{txt}file {bf:brl_brch.gph} saved

{com}. graph use brl_brch
{res}{txt}
{com}. graph export Fig6b.pdf, replace
{txt}{p 0 4 2}
file {bf}
Fig6b.pdf{rm}
saved as
PDF
format
{p_end}

{com}. 
. 
. ***********************************************************
. ******************RESULT 1*********************************
. ***********************************************************
. 
. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat x1eq x2eq x12eq x12eq_expost changehat, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

{hline}
-> alpha = .75

{com}. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. 
. ***********************************************************
. ******************TABLES*********************************
. ***********************************************************
. 
. *******************
. ******TABLE 3******
. *******************
. 
. *******************
. ** Flexibility 1 **
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility1
{txt}(131 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    23.17737    39.56443    -71.625      99.99

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607    62.50624    31.00023     -21.75      99.99

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        610    18.78673     35.1769   -74.0925    99.2475

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        594    42.34407    31.72943     -24.75      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility , by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      1{col 26}         2{col 38}        18
    {txt}Negative {c |}{res}{col 17}      7{col 26}        34{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. 
. 
. *******************
. ** Flexibility 2 **
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility2
{txt}(66 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    32.59386    49.82583     -56.24     110.75

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607    83.22634    33.03715     -23.25        150

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        636    4.620407    30.21823        -99    99.2475

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        633     8.65904    33.57703        -80      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}         9{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        27{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         8{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        28{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.400}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1614}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1953}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. 
. 
. 
. *******************
. ** Flexibility 3 **
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. ******FLEXIBILITY*******
. 
. do flexibility.do
{txt}
{com}. 
. *expected payoff of 1 relative to the optimal payoff in a one round all payer auction.
. gen flexibility1 = (Prize - x1hat)*(1-alpha) + (Prize-x12hat)*alpha if x1hat > x2hat
{txt}(2,576 missing values generated)

{com}. replace flexibility1 = -x1hat*(1-alpha) + (Prize-x12hat)*alpha if x1hat < x2hat 
{txt}(2,314 real changes made)

{com}. 
. * expected payoff of A - expected payoff of B given all payments
. gen flexibility2 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat > x2hat & lottery == 0
{txt}(3,756 missing values generated)

{com}. replace flexibility2 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize-x12hat+x2hat)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility2 = (Prize - x1hat + x2hat)*(1-alpha)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(1-alpha)*(x2hat/(x1hat+x2hat)) + (Prize - x12hat + x2hat)*(alpha)*(x12hat/(x12hat+x2hat)) + (-x12hat-Prize+x2hat)*(alpha)*(x2hat/(x12hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
. 
. * expected payoff of A - expected payoff of B given only round 1 payments assuming that the efficient response is for x12hat == x2hat in APA and x1hat == x12hat in lottery
. gen flexibility3 = (Prize - x1hat + x2hat)*(1-alpha) + (Prize)*alpha if x1hat > x2hat & lottery == 0 
{txt}(3,756 missing values generated)

{com}. replace flexibility3 = (-x1hat-Prize+x2hat)*(1-alpha) + (Prize)*alpha if x1hat < x2hat & lottery == 0 
{txt}(1,086 real changes made)

{com}. replace flexibility3 = (Prize - x1hat + x2hat)*(x1hat/(x1hat+x2hat)) + (-x1hat-Prize+x2hat)*(x2hat/(x1hat+x2hat)) if lottery == 1
{txt}(2,538 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. drop if Type==2
{txt}(2,560 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen flexibility = flexibility3
{txt}(66 missing values generated)

{com}. 
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat changehat flexibility 

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1
{txt}{space 1}flexibility {c |}{res}        618    32.48208    50.70538   -49.9925    99.9925

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1
{txt}{space 1}flexibility {c |}{res}        607     77.9235    17.19528    50.0025    99.9975

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1
{txt}{space 1}flexibility {c |}{res}        636    3.060132    32.57224     -99.99         99

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1
{txt}{space 1}flexibility {c |}{res}        633    2.130161    36.65466     -99.99      99.99

{txt}
{com}. 
. ***********************************************
. ****WITHIN SESSION EQUILIBRIUM COMPARISONS*****
. ***********************************************
. 
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat flexibility x1eq x2eq x12eq x12eq_expost changehat eq_flexibility, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x1eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        31{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=1 if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      7{col 26}        35{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.63

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.460}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0139}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 1 
{col 10}z = {res}{ralign 6:-2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}         8{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        28{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-1.400}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1614}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1953}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. 
. *LOTTERY*
. by alpha: signrank x1hat=x1eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x1eq 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}
{txt}
{com}. by alpha: signrank x2hat=x2eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x2eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq 
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}
{txt}
{com}. by alpha: signrank x12hat=x12eq_expost if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x12hat = x12eq_expost 
{col 10}z = {res}{ralign 6:2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank changehat=0 if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      8{col 26}        36{col 38}        18
    {txt}Negative {c |}{res}{col 17}      0{col 26}         0{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: changehat = 0 
{col 10}z = {res}{ralign 6:2.524}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0116}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}
{txt}
{com}. by alpha: signrank flexibility=eq_flexibility if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: flexibility = eq_flexibility 
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. 
. 
. 
. *******************
. ******TABLE 4******
. *******************
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. *Descriptive statistics
. sort contest alpha
{txt}
{com}. by contest alpha: sum x1hat x2hat x12hat x12eq_expost changehat if Type==1

{txt}{hline}
-> contest = All Pay Auction, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    47.18152    30.84879          0        100
{txt}{space 7}x2hat {c |}{res}        640    40.56469     35.3736          0        100
{txt}{space 6}x12hat {c |}{res}        640    39.91313     33.9622          0        100
{txt}x12eq_expost {c |}{res}        640    34.48033     33.1507          0        100
{txt}{space 3}changehat {c |}{res}        640    .8890625    .3143004          0          1

{txt}{hline}
-> contest = All Pay Auction, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640     26.2483    29.57008          0        100
{txt}{space 7}x2hat {c |}{res}        640    31.87056    38.62192          0        100
{txt}{space 6}x12hat {c |}{res}        640    24.98841    32.90456          0        100
{txt}x12eq_expost {c |}{res}        640     14.0663    22.95761          0        100
{txt}{space 3}changehat {c |}{res}        640    .8609375    .3462824          0          1

{txt}{hline}
-> contest = Lottery, alpha = .25

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    45.70875    31.49323          0        100
{txt}{space 7}x2hat {c |}{res}        640    44.75683    34.71484          0        100
{txt}{space 6}x12hat {c |}{res}        640    42.15094    34.55396          0        100
{txt}x12eq_expost {c |}{res}        640    13.29694    9.212994          0         25
{txt}{space 3}changehat {c |}{res}        640     .678125    .4675608          0          1

{txt}{hline}
-> contest = Lottery, alpha = .75

    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}        640    40.76316    33.07534          0        100
{txt}{space 7}x2hat {c |}{res}        640     45.4948    34.47083          0        100
{txt}{space 6}x12hat {c |}{res}        640    45.83961    35.34265          0        100
{txt}x12eq_expost {c |}{res}        640    13.26608     9.64321          0         25
{txt}{space 3}changehat {c |}{res}        640      .74375     .436903          0          1

{txt}
{com}. 
. ********************************************************
. ****WITHIN SESSION TYPE AND ROUND 1 & 2 COMPARISONS*****
. ********************************************************
. sort contest lottery alpha sessionid
{txt}
{com}. collapse x1hat x2hat x12hat x1eq x2eq x12eq x12eq_expost changehat, by(contest lottery alpha sessionid)
{res}{txt}
{com}. 
. sort alpha
{txt}
{com}. *ALL PAY*
. by alpha: signrank x1hat=x2hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        11{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        25{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:-0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        15{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        21{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:-0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        22{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        14{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. by alpha: signrank x1hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        32{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         4{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==0

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        15{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        21{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:-0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        22{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        14{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. *LOTTERY*
. by alpha: signrank x1hat=x2hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        19{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        17{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:0.140}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.8886}
{txt}{col 1}Exact prob = {res}{ralign 6:0.9453}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        10{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        26{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x2hat 
{col 10}z = {res}{ralign 6:-1.120}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2626}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3125}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        18{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        18{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.000}
{txt}{col 1}Prob > |z| = {res}{ralign 6:1.0000}
{txt}{col 1}Exact prob = {res}{ralign 6:1.0000}
{txt}
{com}. by alpha: signrank x1hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        27{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}         9{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         3{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        33{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1hat = x12hat 
{col 10}z = {res}{ralign 6:-2.100}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0357}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0391}
{txt}
{com}. by alpha: signrank x2hat=x12hat if lottery==1

{txt}{hline}
-> alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        18{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        18{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x2hat = x12hat 
{col 10}z = {res}{ralign 6:0.000}
{txt}{col 1}Prob > |z| = {res}{ralign 6:1.0000}
{txt}{col 1}Exact prob = {res}{ralign 6:1.0000}
{txt}
{com}. 
. ********************************************************
. ****WITHIN SESSION TREATMENT (25 VS. 75) COMPARISONS****
. ********************************************************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. *Period >10 & Period >30
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. ********************************************************
. ********FIRST CREATE PAIRED OBSERVATIONS DATASET********
. ********************************************************
. sort contest sessionid alpha
{txt}
{com}. collapse x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat, ///
> by(contest sessionid alpha)
{res}{txt}
{com}. save bid25.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25.dta
{txt}
{com}. 
. keep if alpha==0.25
{txt}(16 observations deleted)

{com}. gen x125=x1hat
{txt}
{com}. gen x225=x2hat
{txt}
{com}. gen x1225=x12hat
{txt}
{com}. gen x110025=x1100
{txt}
{com}. gen x210025=x2100
{txt}
{com}. gen x1210025=x12100
{txt}
{com}. gen x1025=x10
{txt}
{com}. gen x2025=x20
{txt}
{com}. gen x12025=x120
{txt}
{com}. gen change25=changehat
{txt}
{com}. drop  x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat
{txt}
{com}. *label var sp5 "SP Low cost"
. sort sessionid
{txt}
{com}. save bid25_1.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25_1.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25.dta
{txt}
{com}. 
. keep if alpha==0.75
{txt}(16 observations deleted)

{com}. gen x175=x1hat
{txt}
{com}. gen x275=x2hat
{txt}
{com}. gen x1275=x12hat
{txt}
{com}. gen x110075=x1100
{txt}
{com}. gen x210075=x2100
{txt}
{com}. gen x1210075=x12100
{txt}
{com}. gen x1075=x10
{txt}
{com}. gen x2075=x20
{txt}
{com}. gen x12075=x120
{txt}
{com}. gen change75=changehat
{txt}
{com}. drop  x1hat x2hat x12hat x1100 x2100 x12100 x10 x20 x120 changehat
{txt}
{com}. *label var sp15 "SP High cost"
. sort sessionid
{txt}
{com}. save bid25_2.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25_2.dta{rm}
saved
{p_end}

{com}. 
. clear
{txt}
{com}. use bid25_1.dta
{txt}
{com}. merge 1:1 sessionid using "bid25_2.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              16{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. save bid25.dta, replace
{txt}{p 0 4 2}
file {bf}
bid25.dta{rm}
saved
{p_end}

{com}. 
. 
. ********************************/
. ********SECOND RUN TESTS********
. ********************************/
. 
. sort contest sessionid
{txt}
{com}. by contest: signrank x125=x175

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        33{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         3{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x175
{col 10}z = {res}{ralign 6:2.100}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0357}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0391}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x175
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. by contest: signrank x225=x275

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x225 = x275
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        13{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        23{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x225 = x275
{col 10}z = {res}{ralign 6:-0.700}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4838}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5469}
{txt}
{com}. by contest: signrank x1225=x1275

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        34{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         2{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1225 = x1275
{col 10}z = {res}{ralign 6:2.240}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0251}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0234}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        14{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        22{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1225 = x1275
{col 10}z = {res}{ralign 6:-0.560}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5754}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6406}
{txt}
{com}. by contest: signrank x110025=x110075

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}        11{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      5{col 26}        24{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.75

{txt}H0: x110025 = x110075
{col 10}z = {res}{ralign 6:-0.912}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3615}
{txt}{col 1}Exact prob = {res}{ralign 6:0.4219}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         7{col 38}      17.5
    {txt}Negative {c |}{res}{col 17}      5{col 26}        28{col 38}      17.5
        {txt}Zero {c |}{res}{col 17}      1{col 26}         1{col 38}         1
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}     -0.25
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.75

{txt}H0: x110025 = x110075
{col 10}z = {res}{ralign 6:-1.474}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1405}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1719}
{txt}
{com}. by contest: signrank x210025=x210075

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      0{col 26}         0{col 38}        18
    {txt}Negative {c |}{res}{col 17}      8{col 26}        36{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x210025 = x210075
{col 10}z = {res}{ralign 6:-2.521}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0117}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0078}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         9{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        27{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x210025 = x210075
{col 10}z = {res}{ralign 6:-1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}
{txt}
{com}. by contest: signrank x1210025=x1210075

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}       6.5{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}      29.5{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: x1210025 = x1210075
{col 10}z = {res}{ralign 6:-1.612}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1069}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1172}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         9{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        27{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x1210025 = x1210075
{col 10}z = {res}{ralign 6:-1.260}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2076}
{txt}{col 1}Exact prob = {res}{ralign 6:0.2500}
{txt}
{com}. 
. by contest: signrank x125=x225

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        29{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         7{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x225
{col 10}z = {res}{ralign 6:1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        19{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        17{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x125 = x225
{col 10}z = {res}{ralign 6:0.140}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.8886}
{txt}{col 1}Exact prob = {res}{ralign 6:0.9453}
{txt}
{com}. by contest: signrank x175=x275

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        11{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        25{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x175 = x275
{col 10}z = {res}{ralign 6:-0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}        10{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        26{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x175 = x275
{col 10}z = {res}{ralign 6:-1.120}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.2626}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3125}
{txt}
{com}. 
. by contest: signrank change25=change75

{txt}{hline}
-> contest = All Pay Auction

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: change25 = change75
{col 10}z = {res}{ralign 6:0.981}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3264}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3672}

{txt}{hline}
-> contest = Lottery

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         3{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        33{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     50.88

{txt}H0: change25 = change75
{col 10}z = {res}{ralign 6:-2.103}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0355}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0313}
{txt}
{com}. *log close
. 
. *log using C:\purdue\nonpara, append
. 
. 
. 
. *********************************************************
. 
. 
. *******************
. ******TABLE 5******
. *******************
. clear 
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. 
. sort subjectid Period
{txt}
{com}. by subjectid: gen totaltypea=typea[1]
{txt}
{com}. by subjectid: replace totaltypea=typea[_n]+ totaltypea[_n-1] if _n>1
{txt}(4,879 real changes made)

{com}. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. 
. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. label var xjow "Joy of winning"
{txt}
{com}. label var alpha "$\alpha$"
{txt}
{com}. label var risk "Risk aversion"
{txt}
{com}. label var loss "Loss aversion"
{txt}
{com}. *label var LossLineSwitchToB "Loss aversion"
. label var inv "$1/Period$"
{txt}
{com}. 
. **********SUBJECT RE***********************************************************************
. *ALL PAY AUCTION
. xtreg x d75 inv first20 i.sessionid if Type==1 & contest=="All Pay Auction", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2037                                         {txt}min = {res}        10
{txt}     Between = {res}0.0951                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.1651                                         {txt}max = {res}        27

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}-21.62866{col 26}{space 2} 5.635731{col 37}{space 1}   -3.84{col 46}{space 3}0.000{col 54}{space 4}-32.67449{col 67}{space 3}-10.58283
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 12.60962{col 26}{space 2} 4.003287{col 37}{space 1}    3.15{col 46}{space 3}0.002{col 54}{space 4} 4.763325{col 67}{space 3} 20.45592
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} 9.848289{col 26}{space 2} 5.636506{col 37}{space 1}    1.75{col 46}{space 3}0.081{col 54}{space 4} -1.19906{col 67}{space 3} 20.89564
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}1  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}2  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}3  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}4  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}5  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}6  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}7  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}8  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}9  {c |}{col 14}{res}{space 2}-13.07432{col 26}{space 2}  .215295{col 37}{space 1}  -60.73{col 46}{space 3}0.000{col 54}{space 4}-13.49629{col 67}{space 3}-12.65235
{txt}{space 9}10  {c |}{col 14}{res}{space 2}-6.251099{col 26}{space 2} .2136798{col 37}{space 1}  -29.25{col 46}{space 3}0.000{col 54}{space 4}-6.669904{col 67}{space 3}-5.832294
{txt}{space 9}11  {c |}{col 14}{res}{space 2} .2194068{col 26}{space 2} .2167097{col 37}{space 1}    1.01{col 46}{space 3}0.311{col 54}{space 4}-.2053364{col 67}{space 3}   .64415
{txt}{space 9}12  {c |}{col 14}{res}{space 2}-14.51714{col 26}{space 2} .2189171{col 37}{space 1}  -66.31{col 46}{space 3}0.000{col 54}{space 4}-14.94621{col 67}{space 3}-14.08807
{txt}{space 9}13  {c |}{col 14}{res}{space 2} .0340119{col 26}{space 2} .2334322{col 37}{space 1}    0.15{col 46}{space 3}0.884{col 54}{space 4}-.4235068{col 67}{space 3} .4915305
{txt}{space 9}14  {c |}{col 14}{res}{space 2}-7.736819{col 26}{space 2} .2419127{col 37}{space 1}  -31.98{col 46}{space 3}0.000{col 54}{space 4}-8.210959{col 67}{space 3}-7.262678
{txt}{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 9}16  {c |}{col 14}{res}{space 2}-1.831103{col 26}{space 2}  .233923{col 37}{space 1}   -7.83{col 46}{space 3}0.000{col 54}{space 4}-2.289584{col 67}{space 3}-1.372623
{txt}{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2}  45.5148{col 26}{space 2} 5.654182{col 37}{space 1}    8.05{col 46}{space 3}0.000{col 54}{space 4} 34.43281{col 67}{space 3}  56.5968
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 17.531932
     {txt}sigma_e {c |} {res} 24.428128
         {txt}rho {c |} {res} .33997117{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store A
{txt}
{com}. xtreg x d75 inv first20 i.sessionid if Type==2 & contest=="All Pay Auction", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0310                                         {txt}min = {res}        13
{txt}     Between = {res}0.1809                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.0846                                         {txt}max = {res}        30

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}-8.823015{col 26}{space 2} 2.707373{col 37}{space 1}   -3.26{col 46}{space 3}0.001{col 54}{space 4}-14.12937{col 67}{space 3}-3.516661
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 15.64664{col 26}{space 2} 6.305487{col 37}{space 1}    2.48{col 46}{space 3}0.013{col 54}{space 4} 3.288109{col 67}{space 3} 28.00516
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} .7617391{col 26}{space 2} 2.707106{col 37}{space 1}    0.28{col 46}{space 3}0.778{col 54}{space 4}-4.544092{col 67}{space 3}  6.06757
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}1  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}2  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}3  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}4  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}5  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}6  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}7  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}8  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 10}9  {c |}{col 14}{res}{space 2} 17.37971{col 26}{space 2} .0574491{col 37}{space 1}  302.52{col 46}{space 3}0.000{col 54}{space 4} 17.26711{col 67}{space 3} 17.49231
{txt}{space 9}10  {c |}{col 14}{res}{space 2}-9.457426{col 26}{space 2} .0672525{col 37}{space 1} -140.63{col 46}{space 3}0.000{col 54}{space 4}-9.589238{col 67}{space 3}-9.325613
{txt}{space 9}11  {c |}{col 14}{res}{space 2} 7.052316{col 26}{space 2}   .05702{col 37}{space 1}  123.68{col 46}{space 3}0.000{col 54}{space 4} 6.940559{col 67}{space 3} 7.164074
{txt}{space 9}12  {c |}{col 14}{res}{space 2}-1.198003{col 26}{space 2} .0572216{col 37}{space 1}  -20.94{col 46}{space 3}0.000{col 54}{space 4}-1.310156{col 67}{space 3}-1.085851
{txt}{space 9}13  {c |}{col 14}{res}{space 2}-2.559409{col 26}{space 2} .0544918{col 37}{space 1}  -46.97{col 46}{space 3}0.000{col 54}{space 4}-2.666211{col 67}{space 3}-2.452607
{txt}{space 9}14  {c |}{col 14}{res}{space 2}-11.53917{col 26}{space 2} .0600383{col 37}{space 1} -192.20{col 46}{space 3}0.000{col 54}{space 4}-11.65684{col 67}{space 3} -11.4215
{txt}{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 9}16  {c |}{col 14}{res}{space 2} .8415434{col 26}{space 2} .0543048{col 37}{space 1}   15.50{col 46}{space 3}0.000{col 54}{space 4}  .735108{col 67}{space 3} .9479789
{txt}{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} 36.89935{col 26}{space 2} 2.515556{col 37}{space 1}   14.67{col 46}{space 3}0.000{col 54}{space 4} 31.96895{col 67}{space 3} 41.82975
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 17.820295
     {txt}sigma_e {c |} {res} 31.362447
         {txt}rho {c |} {res} .24406027{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store B
{txt}
{com}. *xtreg x12hat d75 inv f75 if Type==1 & validriskloss==1 & contest=="All Pay Auction", i(subjectid) vce(cluster sessionid)
. *est store C
. *LOTTERY
. xtreg x d75 inv first20 i.sessionid if Type==1 &  contest=="Lottery", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1223                                         {txt}min = {res}        13
{txt}     Between = {res}0.1529                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.1389                                         {txt}max = {res}        28

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}-5.882275{col 26}{space 2} 3.203799{col 37}{space 1}   -1.84{col 46}{space 3}0.066{col 54}{space 4} -12.1616{col 67}{space 3} .3970548
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 10.74005{col 26}{space 2} 5.453056{col 37}{space 1}    1.97{col 46}{space 3}0.049{col 54}{space 4} .0522542{col 67}{space 3} 21.42784
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} 15.58286{col 26}{space 2} 3.192418{col 37}{space 1}    4.88{col 46}{space 3}0.000{col 54}{space 4} 9.325839{col 67}{space 3} 21.83989
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2} 5.564767{col 26}{space 2} .0909531{col 37}{space 1}   61.18{col 46}{space 3}0.000{col 54}{space 4} 5.386502{col 67}{space 3} 5.743032
{txt}{space 10}3  {c |}{col 14}{res}{space 2} .7650709{col 26}{space 2} .0590974{col 37}{space 1}   12.95{col 46}{space 3}0.000{col 54}{space 4} .6492421{col 67}{space 3} .8808996
{txt}{space 10}4  {c |}{col 14}{res}{space 2}-7.437572{col 26}{space 2} .0175748{col 37}{space 1} -423.20{col 46}{space 3}0.000{col 54}{space 4}-7.472018{col 67}{space 3}-7.403126
{txt}{space 10}5  {c |}{col 14}{res}{space 2} 17.36228{col 26}{space 2} .0237691{col 37}{space 1}  730.45{col 46}{space 3}0.000{col 54}{space 4} 17.31569{col 67}{space 3} 17.40887
{txt}{space 10}6  {c |}{col 14}{res}{space 2} 4.723308{col 26}{space 2} .0177295{col 37}{space 1}  266.41{col 46}{space 3}0.000{col 54}{space 4} 4.688559{col 67}{space 3} 4.758057
{txt}{space 10}7  {c |}{col 14}{res}{space 2} 19.62122{col 26}{space 2} .0262991{col 37}{space 1}  746.08{col 46}{space 3}0.000{col 54}{space 4} 19.56967{col 67}{space 3} 19.67276
{txt}{space 10}8  {c |}{col 14}{res}{space 2} 12.94197{col 26}{space 2} .0224908{col 37}{space 1}  575.43{col 46}{space 3}0.000{col 54}{space 4} 12.89789{col 67}{space 3} 12.98606
{txt}{space 10}9  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}10  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}11  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}12  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}13  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}14  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}16  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} 29.78293{col 26}{space 2}  .953521{col 37}{space 1}   31.23{col 46}{space 3}0.000{col 54}{space 4} 27.91406{col 67}{space 3}  31.6518
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res}  20.48359
     {txt}sigma_e {c |} {res} 23.540113
         {txt}rho {c |} {res} .43090403{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store D
{txt}
{com}. xtreg x d75 inv first20 i.sessionid if Type==2 & contest=="Lottery", i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,280
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0401                                         {txt}min = {res}        12
{txt}     Between = {res}0.1494                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.0842                                         {txt}max = {res}        27

                                                {txt}{help j_robustsingular##|_new:Wald chi2(3)}{col 67}={col 70}{res}        .
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}     .

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}           x{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2} 1.737756{col 26}{space 2} 4.139132{col 37}{space 1}    0.42{col 46}{space 3}0.675{col 54}{space 4}-6.374793{col 67}{space 3} 9.850305
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 13.42103{col 26}{space 2} 7.400565{col 37}{space 1}    1.81{col 46}{space 3}0.070{col 54}{space 4}-1.083816{col 67}{space 3} 27.92587
{txt}{space 5}first20 {c |}{col 14}{res}{space 2} 8.921215{col 26}{space 2} 4.128025{col 37}{space 1}    2.16{col 46}{space 3}0.031{col 54}{space 4} .8304354{col 67}{space 3} 17.01199
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2} 2.305278{col 26}{space 2}  .093803{col 37}{space 1}   24.58{col 46}{space 3}0.000{col 54}{space 4} 2.121428{col 67}{space 3} 2.489129
{txt}{space 10}3  {c |}{col 14}{res}{space 2}-16.83406{col 26}{space 2} .0728976{col 37}{space 1} -230.93{col 46}{space 3}0.000{col 54}{space 4}-16.97693{col 67}{space 3}-16.69118
{txt}{space 10}4  {c |}{col 14}{res}{space 2}-14.14342{col 26}{space 2} .0488577{col 37}{space 1} -289.48{col 46}{space 3}0.000{col 54}{space 4}-14.23918{col 67}{space 3}-14.04766
{txt}{space 10}5  {c |}{col 14}{res}{space 2} -2.74914{col 26}{space 2} .0235378{col 37}{space 1} -116.80{col 46}{space 3}0.000{col 54}{space 4}-2.795273{col 67}{space 3}-2.703007
{txt}{space 10}6  {c |}{col 14}{res}{space 2}-14.11689{col 26}{space 2} .0236555{col 37}{space 1} -596.77{col 46}{space 3}0.000{col 54}{space 4}-14.16325{col 67}{space 3}-14.07052
{txt}{space 10}7  {c |}{col 14}{res}{space 2}-2.829071{col 26}{space 2} .0416383{col 37}{space 1}  -67.94{col 46}{space 3}0.000{col 54}{space 4} -2.91068{col 67}{space 3}-2.747461
{txt}{space 10}8  {c |}{col 14}{res}{space 2} 7.493147{col 26}{space 2} .0326429{col 37}{space 1}  229.55{col 46}{space 3}0.000{col 54}{space 4} 7.429168{col 67}{space 3} 7.557126
{txt}{space 10}9  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}10  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}11  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}12  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}13  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}14  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}15  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 9}16  {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (empty)
{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} 42.49708{col 26}{space 2} 2.131756{col 37}{space 1}   19.94{col 46}{space 3}0.000{col 54}{space 4} 38.31891{col 67}{space 3} 46.67524
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 20.396695
     {txt}sigma_e {c |} {res} 26.882051
         {txt}rho {c |} {res} .36536066{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. est store E
{txt}
{com}. *reg x12 d75 inv f75 if Type==1  &  contest=="Lottery", vce(cluster subjectid)
. *est store F
. 
. esttab A B D E using table5.doc, se r2 keep(_cons d75 inv first20 _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) 
{res}{txt}(output written to {browse  `"table5.doc"'})

{com}. esttab A B D E using table5.doc, se r2 keep(_cons d75 inv first20 _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01)
{res}{txt}(output written to {browse  `"table5.doc"'})

{com}. 
. *******************
. ******TABLE 6******
. *******************
. 
. **********DISPERSION MEASURES****************************
. clear
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. keep if periodt>10
{txt}(2,560 observations deleted)

{com}. 
. gen x_sd=x
{txt}
{com}. gen x_med=x
{txt}
{com}. 
. sort lottery Type alpha sessionid subjectid
{txt}
{com}. collapse (mean) x (sd) x_sd (p50) x_med, by(lottery Type alpha sessionid subjectid)
{res}{txt}
{com}. gen coeff_var=x_sd/x
{txt}(38 missing values generated)

{com}. 
. gen dalpha=0
{txt}
{com}. replace dalpha=1 if alpha==0.75
{txt}(255 real changes made)

{com}. 
. *H_s measure = SD of the median
. by lottery Type alpha sessionid: egen x_sd_med=sd(x_med)
{txt}
{com}. *D_s measure =  Median of the SD
. by lottery Type alpha sessionid: egen x_med_sd=median(x_sd)
{txt}
{com}. 
. sort lottery Type alpha sessionid
{txt}
{com}. collapse x_med_sd x_sd_med, by(lottery Type alpha sessionid)
{res}{txt}
{com}. 
. *Compare alpha's*
. save cv_tests, replace
{txt}{p 0 4 2}
file {bf}
cv_tests.dta{rm}
saved
{p_end}

{com}. 
. keep if alpha==0.25
{txt}(32 observations deleted)

{com}. rename x_sd_med x_med1
{res}{txt}
{com}. rename x_med_sd x_sd1
{res}{txt}
{com}. save cv_type1, replace
{txt}{p 0 4 2}
file {bf}
cv_type1.dta{rm}
saved
{p_end}

{com}. clear
{txt}
{com}. 
. use cv_tests
{txt}
{com}. keep if alpha==0.75
{txt}(32 observations deleted)

{com}. rename x_med_sd x_sd2
{res}{txt}
{com}. rename x_sd_med x_med2
{res}{txt}
{com}. save cv_type2, replace
{txt}{p 0 4 2}
file {bf}
cv_type2.dta{rm}
saved
{p_end}

{com}. merge 1:1 Type sessionid using "cv_type1.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              32{txt}  (_merge==3)
{col 5}{hline 41}

{com}. 
. sort lottery Type
{txt}
{com}. *H_s measure = SD of the median
. by lottery Type: signrank x_med1=x_med2

{txt}{hline}
-> lottery = 0, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        30{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         6{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:1.680}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0929}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1094}

{txt}{hline}
-> lottery = 0, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        13{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        23{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-0.700}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4838}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5469}

{txt}{hline}
-> lottery = 1, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        20{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        16{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}

{txt}{hline}
-> lottery = 1, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      5{col 26}        25{col 38}        18
    {txt}Negative {c |}{res}{col 17}      3{col 26}        11{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}
{txt}
{com}. *D_s measure = Median of the SD
. by lottery Type: signrank x_sd1=x_sd2

{txt}{hline}
-> lottery = 0, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      7{col 26}        35{col 38}        18
    {txt}Negative {c |}{res}{col 17}      1{col 26}         1{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:2.380}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0173}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0156}

{txt}{hline}
-> lottery = 0, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        24{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        12{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.840}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4008}
{txt}{col 1}Exact prob = {res}{ralign 6:0.4609}

{txt}{hline}
-> lottery = 1, Type = 1

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        20{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        16{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}

{txt}{hline}
-> lottery = 1, Type = 2

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        16{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        20{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-0.280}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.7794}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8438}
{txt}
{com}. 
. *Compare Types*
. clear
{txt}
{com}. use cv_tests
{txt}
{com}. 
. keep if Type==1
{txt}(32 observations deleted)

{com}. rename x_med_sd x_sd1
{res}{txt}
{com}. rename x_sd_med x_med1
{res}{txt}
{com}. save cv_type1, replace
{txt}{p 0 4 2}
file {bf}
cv_type1.dta{rm}
saved
{p_end}

{com}. clear
{txt}
{com}. use cv_tests
{txt}
{com}. keep if Type==2
{txt}(32 observations deleted)

{com}. rename x_med_sd x_sd2
{res}{txt}
{com}. rename x_sd_med x_med2
{res}{txt}
{com}. save cv_type2, replace
{txt}{p 0 4 2}
file {bf}
cv_type2.dta{rm}
saved
{p_end}

{com}. merge 1:1 alpha sessionid using "cv_type1.dta"
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              32{txt}  (_merge==3)
{col 5}{hline 41}

{com}. 
. sort lottery alpha
{txt}
{com}. *H_s measure = SD of the median
. by lottery alpha: signrank x_med1=x_med2

{txt}{hline}
-> lottery = 0, alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}        11{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        25{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-0.980}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.3270}
{txt}{col 1}Exact prob = {res}{ralign 6:0.3828}

{txt}{hline}
-> lottery = 0, alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         5{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        31{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-1.820}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0687}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0781}

{txt}{hline}
-> lottery = 1, alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      1{col 26}         3{col 38}        18
    {txt}Negative {c |}{res}{col 17}      7{col 26}        33{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-2.100}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0357}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0391}

{txt}{hline}
-> lottery = 1, alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      4{col 26}        15{col 38}        18
    {txt}Negative {c |}{res}{col 17}      4{col 26}        21{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_med1 = x_med2
{col 10}z = {res}{ralign 6:-0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}
{txt}
{com}. *D_s measure =  Median of the SD
. by lottery alpha: signrank x_sd1=x_sd2

{txt}{hline}
-> lottery = 0, alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      1{col 26}         4{col 38}        18
    {txt}Negative {c |}{res}{col 17}      7{col 26}        32{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> lottery = 0, alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      2{col 26}         4{col 38}        18
    {txt}Negative {c |}{res}{col 17}      6{col 26}        32{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-1.960}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0499}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0547}

{txt}{hline}
-> lottery = 1, alpha = .25

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      6{col 26}        21{col 38}        18
    {txt}Negative {c |}{res}{col 17}      2{col 26}        15{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:0.420}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.6744}
{txt}{col 1}Exact prob = {res}{ralign 6:0.7422}

{txt}{hline}
-> lottery = 1, alpha = .75

Wilcoxon signed-rank test

        Sign {c |}      Obs   Sum ranks    Expected
{hline 13}{c +}{hline 33}
    Positive {c |}{res}{col 17}      3{col 26}         7{col 38}        18
    {txt}Negative {c |}{res}{col 17}      5{col 26}        29{col 38}        18
        {txt}Zero {c |}{res}{col 17}      0{col 26}         0{col 38}         0
{txt}{hline 13}{c +}{hline 33}
         All {c |}{res}{col 17}      8{col 26}        36{col 38}        36

{txt}Unadjusted variance{col 22}{res}     51.00
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}Adjustment for zeros{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     51.00

{txt}H0: x_sd1 = x_sd2
{col 10}z = {res}{ralign 6:-1.540}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1235}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1484}
{txt}
{com}. 
. *Compare Contests*
. clear
{txt}
{com}. use cv_tests
{txt}
{com}. sort alpha Type lottery
{txt}
{com}. *H_s measure = SD of the median
. by alpha Type: ranksum x_sd_med, by(lottery)

{txt}{hline}
-> alpha = .25, Type = 1

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        66{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        70{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_sd_med(lottery==0) = x_sd_med(lottery==1)
{col 10}z = {res}{ralign 6:-0.210}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.8336}
{txt}{col 1}Exact prob = {res}{ralign 6:0.8785}

{txt}{hline}
-> alpha = .25, Type = 2

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        54{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        82{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_sd_med(lottery==0) = x_sd_med(lottery==1)
{col 10}z = {res}{ralign 6:-1.470}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.1415}
{txt}{col 1}Exact prob = {res}{ralign 6:0.1605}

{txt}{hline}
-> alpha = .75, Type = 1

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        61{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        75{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_sd_med(lottery==0) = x_sd_med(lottery==1)
{col 10}z = {res}{ralign 6:-0.735}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.4622}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5054}

{txt}{hline}
-> alpha = .75, Type = 2

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        73{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        63{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_sd_med(lottery==0) = x_sd_med(lottery==1)
{col 10}z = {res}{ralign 6:0.525}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5995}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6454}
{txt}
{com}. *D_s measure =  Median of the SD
. by alpha Type: ranksum x_med_sd, by(lottery)

{txt}{hline}
-> alpha = .25, Type = 1

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        85{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        51{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_med_sd(lottery==0) = x_med_sd(lottery==1)
{col 10}z = {res}{ralign 6:1.785}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0742}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0830}

{txt}{hline}
-> alpha = .25, Type = 2

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        85{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        51{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}     -0.13
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.53

{txt}H0: x_med_sd(lottery==0) = x_med_sd(lottery==1)
{col 10}z = {res}{ralign 6:1.787}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.0740}
{txt}{col 1}Exact prob = {res}{ralign 6:0.0799}

{txt}{hline}
-> alpha = .75, Type = 1

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        62{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        74{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_med_sd(lottery==0) = x_med_sd(lottery==1)
{col 10}z = {res}{ralign 6:-0.630}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5286}
{txt}{col 1}Exact prob = {res}{ralign 6:0.5737}

{txt}{hline}
-> alpha = .75, Type = 2

Two-sample Wilcoxon rank-sum (Mann–Whitney) test

     lottery {c |}      Obs    Rank sum    Expected
{hline 13}{c +}{hline 33}
           0 {c |}{res}{col 17}      8{col 26}        73{col 38}        68
           {txt}1 {c |}{res}{col 17}      8{col 26}        63{col 38}        68
{txt}{hline 13}{c +}{hline 33}
    Combined {c |}{res}{col 17}     16{col 26}       136{col 38}       136

{txt}Unadjusted variance{col 22}{res}     90.67
{txt}Adjustment for ties{col 22}{res}      0.00
{txt}{col 22}{hline 10}
Adjusted variance{col 22}{res}     90.67

{txt}H0: x_med_sd(lottery==0) = x_med_sd(lottery==1)
{col 10}z = {res}{ralign 6:0.525}
{txt}{col 1}Prob > |z| = {res}{ralign 6:0.5995}
{txt}{col 1}Exact prob = {res}{ralign 6:0.6454}
{txt}
{com}. 
. *******************
. ******TABLE 7******
. *******************
. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. gen change=.
{txt}(5,120 missing values generated)

{com}. replace change=0 if Type==1 & x12==.
{txt}(530 real changes made)

{com}. replace change=1 if Type==1 & x12~=.
{txt}(2,030 real changes made)

{com}. 
. gen reduce=0
{txt}
{com}. replace reduce=1 if Type==1 & x12hat<x1hat
{txt}(1,065 real changes made)

{com}. 
. gen raise=0
{txt}
{com}. replace raise=1 if Type==1 & x12hat>x1hat
{txt}(965 real changes made)

{com}. 
. gen rationalrev=0
{txt}
{com}. replace rationalrev=1 if x1hat~=br1
{txt}(4,999 real changes made)

{com}. *replace rationalrev=1 if x2hat & lottery==1
. 
. gen overbid=1
{txt}
{com}. replace overbid=0 if x1hat<=br1  
{txt}(1,542 real changes made)

{com}. 
. gen underbid=0
{txt}
{com}. replace underbid=1 if x1hat<br1 
{txt}(1,421 real changes made)

{com}. 
. gen ahead=0
{txt}
{com}. replace ahead=1 if x1hat>x2hat
{txt}(2,544 real changes made)

{com}. 
. gen onedisttoother=x1hat-x2hat
{txt}
{com}. gen twodisttoother=x12hat-x2hat
{txt}
{com}. 
. gen irr_nochange=0 
{txt}
{com}. replace irr_nochange=1 if changehat==0 & rationalrev==1
{txt}(956 real changes made)

{com}. 
. gen irr_rev_dec=0
{txt}
{com}. replace irr_rev_dec=1 if irr_nochange==1
{txt}(956 real changes made)

{com}. replace irr_rev_dec=1 if changehat==1 & x1hat==br1
{txt}(17 real changes made)

{com}. 
. label var rationalrev "Revising is rational"
{txt}
{com}. label var changehat "Subject revised"
{txt}
{com}. label var irr_nochange "No change even though was rational"
{txt}
{com}. 
. *******LOTTERY***************************************************
. xtprobit change d75 inv first20 i.sessionid if Type==1 &  contest=="Lottery", ///
> re i(subjectid) vce(cluster sessionid)

{txt}Fitting comparison model:

{res}{txt}Iteration 0:{space 3}log pseudolikelihood = {res:-769.67696}  
Iteration 1:{space 3}log pseudolikelihood = {res:-737.66994}  
Iteration 2:{space 3}log pseudolikelihood = {res: -737.5654}  
Iteration 3:{space 3}log pseudolikelihood = {res:-737.56539}  
{res}
{txt}Fitting full model:

rho = {res} 0.0     {txt}log pseudolikelihood = {res}-737.56539
{txt}rho = {res} 0.1     {txt}log pseudolikelihood = {res}-674.88078
{txt}rho = {res} 0.2     {txt}log pseudolikelihood = {res}-658.98942
{txt}rho = {res} 0.3     {txt}log pseudolikelihood = {res} -653.9235
{txt}rho = {res} 0.4     {txt}log pseudolikelihood = {res}-653.25686
{txt}rho = {res} 0.5     {txt}log pseudolikelihood = {res}-655.88222

{txt}Iteration 0:{space 3}log pseudolikelihood = {res:-653.43911}  
Iteration 1:{space 3}log pseudolikelihood = {res:-652.27563}  
Iteration 2:{space 3}log pseudolikelihood = {res:-652.20049}  
Iteration 3:{space 3}log pseudolikelihood = {res:-652.20035}  
Iteration 4:{space 3}log pseudolikelihood = {res:-652.20035}  
{res}
{txt}Calculating robust standard errors ...
{res}
{txt}{col 1}Random-effects probit regression{col 55}{lalign 16:Number of obs}{col 71} = {res}{ralign 5:1,280}
{txt}{col 1}{txt}Group variable: {res}subjectid{txt}{col 55}{lalign 16:Number of groups}{col 71} = {res}{ralign 5:64}

{txt}{col 1}Random effects u_i ~ {txt:Gaussian}{col 55}Obs per group:
{col 55}{ralign 16:min}{col 71} = {res}{ralign 5:13}
{txt}{col 55}{ralign 16:avg}{col 71} = {res}{ralign 5:20.0}
{txt}{col 55}{ralign 16:max}{col 71} = {res}{ralign 5:28}

{txt}{col 1}Integration method: {res:mvaghermite}{col 55}{lalign 16:Integration pts.}{col 71} = {res}{ralign 5:12}

{txt}{col 55}{lalign 16:{help j_robustsingular##|_new:Wald chi2(4)}}{col 71} = {res}{ralign 5:.}
{txt}Log pseudolikelihood = {res:-652.20035}{col 55}{lalign 16:Prob > chi2}{col 71} = {res}{ralign 5:.}

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      change{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2} .2187808{col 26}{space 2} .0882491{col 37}{space 1}    2.48{col 46}{space 3}0.013{col 54}{space 4} .0458158{col 67}{space 3} .3917458
{txt}{space 9}inv {c |}{col 14}{res}{space 2} .0421885{col 26}{space 2} .2464714{col 37}{space 1}    0.17{col 46}{space 3}0.864{col 54}{space 4}-.4408865{col 67}{space 3} .5252635
{txt}{space 5}first20 {c |}{col 14}{res}{space 2}-.0110342{col 26}{space 2} .0872932{col 37}{space 1}   -0.13{col 46}{space 3}0.899{col 54}{space 4}-.1821257{col 67}{space 3} .1600572
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2}-.4962743{col 26}{space 2} .0291296{col 37}{space 1}  -17.04{col 46}{space 3}0.000{col 54}{space 4}-.5533673{col 67}{space 3}-.4391813
{txt}{space 10}3  {c |}{col 14}{res}{space 2}-.0632032{col 26}{space 2} .0171023{col 37}{space 1}   -3.70{col 46}{space 3}0.000{col 54}{space 4}-.0967231{col 67}{space 3}-.0296834
{txt}{space 10}4  {c |}{col 14}{res}{space 2}  .165311{col 26}{space 2} .0048128{col 37}{space 1}   34.35{col 46}{space 3}0.000{col 54}{space 4}  .155878{col 67}{space 3}  .174744
{txt}{space 10}5  {c |}{col 14}{res}{space 2}-.5269191{col 26}{space 2} .0129689{col 37}{space 1}  -40.63{col 46}{space 3}0.000{col 54}{space 4}-.5523376{col 67}{space 3}-.5015006
{txt}{space 10}6  {c |}{col 14}{res}{space 2}-.1236445{col 26}{space 2} .0077276{col 37}{space 1}  -16.00{col 46}{space 3}0.000{col 54}{space 4}-.1387902{col 67}{space 3}-.1084987
{txt}{space 10}7  {c |}{col 14}{res}{space 2} .2569834{col 26}{space 2} .0085255{col 37}{space 1}   30.14{col 46}{space 3}0.000{col 54}{space 4} .2402738{col 67}{space 3} .2736931
{txt}{space 10}8  {c |}{col 14}{res}{space 2}-.7889253{col 26}{space 2} .0207369{col 37}{space 1}  -38.04{col 46}{space 3}0.000{col 54}{space 4}-.8295689{col 67}{space 3}-.7482816
{txt}{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} .7769456{col 26}{space 2} .0630668{col 37}{space 1}   12.32{col 46}{space 3}0.000{col 54}{space 4} .6533369{col 67}{space 3} .9005542
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 4}/lnsig2u {c |}{col 14}{res}{space 2}-.5646937{col 26}{space 2} .3005689{col 54}{space 4}-1.153798{col 67}{space 3} .0244106
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |}{col 14}{res}{space 2} .7540121{col 26}{space 2} .1133163{col 54}{space 4} .5616373{col 67}{space 3}  1.01228
{txt}         rho {c |}{col 14}{res}{space 2} .3624621{col 26}{space 2} .0694565{col 54}{space 4}  .239796{col 67}{space 3} .5061023
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. margins, dydx(*) post
{res}
{txt}Average marginal effects{col 58}{lalign 13:Number of obs}{col 71} = {res}{ralign 5:1,280}
{txt}{col 1}Model VCE: {res:Robust}

{txt}{p2colset 1 13 13 2}{...}
{p2col:Expression:}{res:Pr(change=1), predict(pr)}{p_end}
{p2col:dy/dx wrt:}{res:d75 inv first20 2.sessionid 3.sessionid 4.sessionid 5.sessionid 6.sessionid 7.sessionid 8.sessionid}{p_end}
{p2colreset}{...}

{res}{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26} Delta-method
{col 14}{c |}      dy/dx{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}d75 {c |}{col 14}{res}{space 2}  .058052{col 26}{space 2} .0227854{col 37}{space 1}    2.55{col 46}{space 3}0.011{col 54}{space 4} .0133935{col 67}{space 3} .1027105
{txt}{space 9}inv {c |}{col 14}{res}{space 2} .0111944{col 26}{space 2} .0652702{col 37}{space 1}    0.17{col 46}{space 3}0.864{col 54}{space 4}-.1167329{col 67}{space 3} .1391218
{txt}{space 5}first20 {c |}{col 14}{res}{space 2}-.0029279{col 26}{space 2} .0231626{col 37}{space 1}   -0.13{col 46}{space 3}0.899{col 54}{space 4}-.0483258{col 67}{space 3}   .04247
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2}-.1376612{col 26}{space 2} .0022621{col 37}{space 1}  -60.86{col 46}{space 3}0.000{col 54}{space 4}-.1420948{col 67}{space 3}-.1332276
{txt}{space 10}3  {c |}{col 14}{res}{space 2}-.0158985{col 26}{space 2} .0049808{col 37}{space 1}   -3.19{col 46}{space 3}0.001{col 54}{space 4}-.0256607{col 67}{space 3}-.0061364
{txt}{space 10}4  {c |}{col 14}{res}{space 2} .0389159{col 26}{space 2} .0014934{col 37}{space 1}   26.06{col 46}{space 3}0.000{col 54}{space 4} .0359888{col 67}{space 3}  .041843
{txt}{space 10}5  {c |}{col 14}{res}{space 2} -.146958{col 26}{space 2} .0040178{col 37}{space 1}  -36.58{col 46}{space 3}0.000{col 54}{space 4}-.1548328{col 67}{space 3}-.1390832
{txt}{space 10}6  {c |}{col 14}{res}{space 2}-.0316014{col 26}{space 2} .0024483{col 37}{space 1}  -12.91{col 46}{space 3}0.000{col 54}{space 4}   -.0364{col 67}{space 3}-.0268028
{txt}{space 10}7  {c |}{col 14}{res}{space 2} .0587594{col 26}{space 2} .0028064{col 37}{space 1}   20.94{col 46}{space 3}0.000{col 54}{space 4} .0532589{col 67}{space 3}   .06426
{txt}{space 10}8  {c |}{col 14}{res}{space 2}-.2285684{col 26}{space 2} .0055349{col 37}{space 1}  -41.30{col 46}{space 3}0.000{col 54}{space 4}-.2394167{col 67}{space 3}-.2177201
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{p 0 6 0 78}Note: dy/dx for factor levels is the discrete change from the base level.{txt}{p_end}
{res}{txt}
{com}. est store A
{txt}
{com}. ******************************************
. xtprobit change adist1 adist1_sq ahead d75 inv first20 i.sessionid if Type==1 &  contest=="Lottery", ///
> re i(subjectid) vce(cluster sessionid)

{txt}Fitting comparison model:

{res}{txt}Iteration 0:{space 3}log pseudolikelihood = {res:-769.67696}  
Iteration 1:{space 3}log pseudolikelihood = {res:-700.65596}  
Iteration 2:{space 3}log pseudolikelihood = {res:-700.22552}  
Iteration 3:{space 3}log pseudolikelihood = {res:-700.22551}  
{res}
{txt}Fitting full model:

rho = {res} 0.0     {txt}log pseudolikelihood = {res}-700.22551
{txt}rho = {res} 0.1     {txt}log pseudolikelihood = {res}  -639.821
{txt}rho = {res} 0.2     {txt}log pseudolikelihood = {res}-623.81274
{txt}rho = {res} 0.3     {txt}log pseudolikelihood = {res}-618.59021
{txt}rho = {res} 0.4     {txt}log pseudolikelihood = {res}-617.79237
{txt}rho = {res} 0.5     {txt}log pseudolikelihood = {res}-619.68793

{txt}Iteration 0:{space 3}log pseudolikelihood = {res:  -617.852}  
Iteration 1:{space 3}log pseudolikelihood = {res:-615.13964}  
Iteration 2:{space 3}log pseudolikelihood = {res:-615.07885}  
Iteration 3:{space 3}log pseudolikelihood = {res:-615.07879}  
Iteration 4:{space 3}log pseudolikelihood = {res:-615.07879}  
{res}
{txt}Calculating robust standard errors ...
{res}
{txt}{col 1}Random-effects probit regression{col 55}{lalign 16:Number of obs}{col 71} = {res}{ralign 5:1,280}
{txt}{col 1}{txt}Group variable: {res}subjectid{txt}{col 55}{lalign 16:Number of groups}{col 71} = {res}{ralign 5:64}

{txt}{col 1}Random effects u_i ~ {txt:Gaussian}{col 55}Obs per group:
{col 55}{ralign 16:min}{col 71} = {res}{ralign 5:13}
{txt}{col 55}{ralign 16:avg}{col 71} = {res}{ralign 5:20.0}
{txt}{col 55}{ralign 16:max}{col 71} = {res}{ralign 5:28}

{txt}{col 1}Integration method: {res:mvaghermite}{col 55}{lalign 16:Integration pts.}{col 71} = {res}{ralign 5:12}

{txt}{col 55}{lalign 16:{help j_robustsingular##|_new:Wald chi2(7)}}{col 71} = {res}{ralign 5:.}
{txt}Log pseudolikelihood = {res:-615.07879}{col 55}{lalign 16:Prob > chi2}{col 71} = {res}{ralign 5:.}

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      change{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 6}adist1 {c |}{col 14}{res}{space 2} .0352686{col 26}{space 2} .0069834{col 37}{space 1}    5.05{col 46}{space 3}0.000{col 54}{space 4} .0215813{col 67}{space 3} .0489558
{txt}{space 3}adist1_sq {c |}{col 14}{res}{space 2}-.0003727{col 26}{space 2} .0000797{col 37}{space 1}   -4.68{col 46}{space 3}0.000{col 54}{space 4}-.0005288{col 67}{space 3}-.0002166
{txt}{space 7}ahead {c |}{col 14}{res}{space 2}-.7062746{col 26}{space 2} .1444013{col 37}{space 1}   -4.89{col 46}{space 3}0.000{col 54}{space 4} -.989296{col 67}{space 3}-.4232533
{txt}{space 9}d75 {c |}{col 14}{res}{space 2} .2389978{col 26}{space 2} .0978247{col 37}{space 1}    2.44{col 46}{space 3}0.015{col 54}{space 4} .0472649{col 67}{space 3} .4307307
{txt}{space 9}inv {c |}{col 14}{res}{space 2}-.0221107{col 26}{space 2}  .260318{col 37}{space 1}   -0.08{col 46}{space 3}0.932{col 54}{space 4}-.5323246{col 67}{space 3} .4881032
{txt}{space 5}first20 {c |}{col 14}{res}{space 2}-.0681038{col 26}{space 2} .0962076{col 37}{space 1}   -0.71{col 46}{space 3}0.479{col 54}{space 4}-.2566673{col 67}{space 3} .1204596
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2}-.5895099{col 26}{space 2} .0426357{col 37}{space 1}  -13.83{col 46}{space 3}0.000{col 54}{space 4}-.6730743{col 67}{space 3}-.5059455
{txt}{space 10}3  {c |}{col 14}{res}{space 2}  .139452{col 26}{space 2} .0469407{col 37}{space 1}    2.97{col 46}{space 3}0.003{col 54}{space 4} .0474499{col 67}{space 3} .2314541
{txt}{space 10}4  {c |}{col 14}{res}{space 2} .2200639{col 26}{space 2} .0212347{col 37}{space 1}   10.36{col 46}{space 3}0.000{col 54}{space 4} .1784446{col 67}{space 3} .2616831
{txt}{space 10}5  {c |}{col 14}{res}{space 2}-.4837896{col 26}{space 2} .0463659{col 37}{space 1}  -10.43{col 46}{space 3}0.000{col 54}{space 4}-.5746651{col 67}{space 3}-.3929141
{txt}{space 10}6  {c |}{col 14}{res}{space 2}-.1180472{col 26}{space 2} .0210454{col 37}{space 1}   -5.61{col 46}{space 3}0.000{col 54}{space 4}-.1592955{col 67}{space 3}-.0767988
{txt}{space 10}7  {c |}{col 14}{res}{space 2} .3051533{col 26}{space 2} .0558908{col 37}{space 1}    5.46{col 46}{space 3}0.000{col 54}{space 4} .1956093{col 67}{space 3} .4146972
{txt}{space 10}8  {c |}{col 14}{res}{space 2}-.9474489{col 26}{space 2}  .054865{col 37}{space 1}  -17.27{col 46}{space 3}0.000{col 54}{space 4}-1.054982{col 67}{space 3}-.8399154
{txt}{space 12} {c |}
{space 7}_cons {c |}{col 14}{res}{space 2} .6758573{col 26}{space 2} .1203529{col 37}{space 1}    5.62{col 46}{space 3}0.000{col 54}{space 4} .4399699{col 67}{space 3} .9117446
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 4}/lnsig2u {c |}{col 14}{res}{space 2} -.493182{col 26}{space 2}  .274208{col 54}{space 4} -1.03062{col 67}{space 3} .0442558
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |}{col 14}{res}{space 2} .7814602{col 26}{space 2} .1071413{col 54}{space 4} .5973154{col 67}{space 3} 1.022375
{txt}         rho {c |}{col 14}{res}{space 2} .3791442{col 26}{space 2} .0645469{col 54}{space 4}  .262964{col 67}{space 3} .5110621
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. margins, dydx(*) post
{res}
{txt}Average marginal effects{col 58}{lalign 13:Number of obs}{col 71} = {res}{ralign 5:1,280}
{txt}{col 1}Model VCE: {res:Robust}

{txt}{p2colset 1 13 13 2}{...}
{p2col:Expression:}{res:Pr(change=1), predict(pr)}{p_end}
{p2col:dy/dx wrt:}{res:adist1 adist1_sq ahead d75 inv first20 2.sessionid 3.sessionid 4.sessionid 5.sessionid 6.sessionid 7.sessionid 8.sessionid}{p_end}
{p2colreset}{...}

{res}{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26} Delta-method
{col 14}{c |}      dy/dx{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 6}adist1 {c |}{col 14}{res}{space 2}  .008764{col 26}{space 2} .0014413{col 37}{space 1}    6.08{col 46}{space 3}0.000{col 54}{space 4} .0059391{col 67}{space 3} .0115888
{txt}{space 3}adist1_sq {c |}{col 14}{res}{space 2}-.0000926{col 26}{space 2} .0000175{col 37}{space 1}   -5.29{col 46}{space 3}0.000{col 54}{space 4}-.0001269{col 67}{space 3}-.0000583
{txt}{space 7}ahead {c |}{col 14}{res}{space 2}-.1755037{col 26}{space 2} .0326778{col 37}{space 1}   -5.37{col 46}{space 3}0.000{col 54}{space 4} -.239551{col 67}{space 3}-.1114565
{txt}{space 9}d75 {c |}{col 14}{res}{space 2} .0593891{col 26}{space 2}  .023566{col 37}{space 1}    2.52{col 46}{space 3}0.012{col 54}{space 4} .0132005{col 67}{space 3} .1055777
{txt}{space 9}inv {c |}{col 14}{res}{space 2}-.0054943{col 26}{space 2}  .064754{col 37}{space 1}   -0.08{col 46}{space 3}0.932{col 54}{space 4}-.1324099{col 67}{space 3} .1214212
{txt}{space 5}first20 {c |}{col 14}{res}{space 2}-.0169233{col 26}{space 2} .0235593{col 37}{space 1}   -0.72{col 46}{space 3}0.473{col 54}{space 4}-.0630986{col 67}{space 3} .0292521
{txt}{space 12} {c |}
{space 3}sessionid {c |}
{space 10}2  {c |}{col 14}{res}{space 2}-.1561295{col 26}{space 2} .0077167{col 37}{space 1}  -20.23{col 46}{space 3}0.000{col 54}{space 4} -.171254{col 67}{space 3}-.1410051
{txt}{space 10}3  {c |}{col 14}{res}{space 2} .0315058{col 26}{space 2} .0093295{col 37}{space 1}    3.38{col 46}{space 3}0.001{col 54}{space 4} .0132203{col 67}{space 3} .0497914
{txt}{space 10}4  {c |}{col 14}{res}{space 2} .0485861{col 26}{space 2} .0038315{col 37}{space 1}   12.68{col 46}{space 3}0.000{col 54}{space 4} .0410764{col 67}{space 3} .0560958
{txt}{space 10}5  {c |}{col 14}{res}{space 2}-.1259573{col 26}{space 2} .0113918{col 37}{space 1}  -11.06{col 46}{space 3}0.000{col 54}{space 4}-.1482849{col 67}{space 3}-.1036298
{txt}{space 10}6  {c |}{col 14}{res}{space 2}-.0285105{col 26}{space 2}  .005233{col 37}{space 1}   -5.45{col 46}{space 3}0.000{col 54}{space 4}-.0387671{col 67}{space 3}-.0182539
{txt}{space 10}7  {c |}{col 14}{res}{space 2} .0656866{col 26}{space 2} .0120842{col 37}{space 1}    5.44{col 46}{space 3}0.000{col 54}{space 4}  .042002{col 67}{space 3} .0893713
{txt}{space 10}8  {c |}{col 14}{res}{space 2}-.2616729{col 26}{space 2} .0049277{col 37}{space 1}  -53.10{col 46}{space 3}0.000{col 54}{space 4}-.2713311{col 67}{space 3}-.2520148
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{p 0 6 0 78}Note: dy/dx for factor levels is the discrete change from the base level.{txt}{p_end}
{res}{txt}
{com}. est store B
{txt}
{com}. ******************************************
. xtprobit change adist1 adist1_sq ahead d75 inv first20 RiskLineSwitchToB LossLineSwitchToB //// 
> xjow female if Type==1 & validriskloss==1 &  contest=="Lottery", ///
> re i(subjectid) vce(cluster sessionid)

{txt}Fitting comparison model:

{res}{txt}Iteration 0:{space 3}log pseudolikelihood = {res:-636.72229}  
Iteration 1:{space 3}log pseudolikelihood = {res:-582.32162}  
Iteration 2:{space 3}log pseudolikelihood = {res:-582.07488}  
Iteration 3:{space 3}log pseudolikelihood = {res:-582.07487}  
{res}
{txt}Fitting full model:

rho = {res} 0.0     {txt}log pseudolikelihood = {res}-582.07487
{txt}rho = {res} 0.1     {txt}log pseudolikelihood = {res}-527.31576
{txt}rho = {res} 0.2     {txt}log pseudolikelihood = {res}-513.03345
{txt}rho = {res} 0.3     {txt}log pseudolikelihood = {res}-508.28716
{txt}rho = {res} 0.4     {txt}log pseudolikelihood = {res}-508.04835
{txt}rho = {res} 0.5     {txt}log pseudolikelihood = {res}-511.76404

{txt}Iteration 0:{space 3}log pseudolikelihood = {res:-507.41881}  
Iteration 1:{space 3}log pseudolikelihood = {res:-503.16112}  
Iteration 2:{space 3}log pseudolikelihood = {res:-503.09221}  
Iteration 3:{space 3}log pseudolikelihood = {res:-503.09219}  
{res}
{txt}Calculating robust standard errors ...
{res}
{txt}{col 1}Random-effects probit regression{col 55}{lalign 16:Number of obs}{col 71} = {res}{ralign 5:1,044}
{txt}{col 1}{txt}Group variable: {res}subjectid{txt}{col 55}{lalign 16:Number of groups}{col 71} = {res}{ralign 5:53}

{txt}{col 1}Random effects u_i ~ {txt:Gaussian}{col 55}Obs per group:
{col 55}{ralign 16:min}{col 71} = {res}{ralign 5:13}
{txt}{col 55}{ralign 16:avg}{col 71} = {res}{ralign 5:19.7}
{txt}{col 55}{ralign 16:max}{col 71} = {res}{ralign 5:28}

{txt}{col 1}Integration method: {res:mvaghermite}{col 55}{lalign 16:Integration pts.}{col 71} = {res}{ralign 5:12}

{txt}{col 55}{lalign 16:{help j_robustsingular##|_new:Wald chi2(7)}}{col 71} = {res}{ralign 5:.}
{txt}Log pseudolikelihood = {res:-503.09219}{col 55}{lalign 16:Prob > chi2}{col 71} = {res}{ralign 5:.}

{txt}{ralign 83:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}           change{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 11}adist1 {c |}{col 19}{res}{space 2}  .035572{col 31}{space 2} .0082354{col 42}{space 1}    4.32{col 51}{space 3}0.000{col 59}{space 4} .0194309{col 72}{space 3} .0517131
{txt}{space 8}adist1_sq {c |}{col 19}{res}{space 2}-.0003774{col 31}{space 2} .0000852{col 42}{space 1}   -4.43{col 51}{space 3}0.000{col 59}{space 4}-.0005443{col 72}{space 3}-.0002105
{txt}{space 12}ahead {c |}{col 19}{res}{space 2} -.750815{col 31}{space 2} .1683301{col 42}{space 1}   -4.46{col 51}{space 3}0.000{col 59}{space 4}-1.080736{col 72}{space 3}-.4208941
{txt}{space 14}d75 {c |}{col 19}{res}{space 2} .2287504{col 31}{space 2} .1046125{col 42}{space 1}    2.19{col 51}{space 3}0.029{col 59}{space 4} .0237138{col 72}{space 3} .4337871
{txt}{space 14}inv {c |}{col 19}{res}{space 2}-.1704147{col 31}{space 2} .2044691{col 42}{space 1}   -0.83{col 51}{space 3}0.405{col 59}{space 4}-.5711668{col 72}{space 3} .2303375
{txt}{space 10}first20 {c |}{col 19}{res}{space 2}-.0539518{col 31}{space 2} .1004698{col 42}{space 1}   -0.54{col 51}{space 3}0.591{col 59}{space 4} -.250869{col 72}{space 3} .1429655
{txt}RiskLineSwitchToB {c |}{col 19}{res}{space 2}-.2095856{col 31}{space 2} .0255807{col 42}{space 1}   -8.19{col 51}{space 3}0.000{col 59}{space 4}-.2597228{col 72}{space 3}-.1594484
{txt}LossLineSwitchToB {c |}{col 19}{res}{space 2} .0874333{col 31}{space 2} .0533891{col 42}{space 1}    1.64{col 51}{space 3}0.101{col 59}{space 4}-.0172074{col 72}{space 3} .1920741
{txt}{space 13}xjow {c |}{col 19}{res}{space 2} .0068604{col 31}{space 2} .0048086{col 42}{space 1}    1.43{col 51}{space 3}0.154{col 59}{space 4}-.0025641{col 72}{space 3}  .016285
{txt}{space 11}female {c |}{col 19}{res}{space 2} .0037438{col 31}{space 2} .2641341{col 42}{space 1}    0.01{col 51}{space 3}0.989{col 59}{space 4}-.5139496{col 72}{space 3} .5214372
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 1.845804{col 31}{space 2} .5477337{col 42}{space 1}    3.37{col 51}{space 3}0.001{col 59}{space 4} .7722659{col 72}{space 3} 2.919342
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}/lnsig2u {c |}{col 19}{res}{space 2}-.4076694{col 31}{space 2} .3317836{col 59}{space 4}-1.057953{col 72}{space 3} .2426146
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
          sigma_u {c |}{col 19}{res}{space 2} .8155972{col 31}{space 2} .1353009{col 59}{space 4} .5892076{col 72}{space 3} 1.128972
{txt}              rho {c |}{col 19}{res}{space 2} .3994711{col 31}{space 2} .0795929{col 59}{space 4} .2577008{col 72}{space 3} .5603579
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. margins, dydx(*) post
{res}
{txt}Average marginal effects{col 58}{lalign 13:Number of obs}{col 71} = {res}{ralign 5:1,044}
{txt}{col 1}Model VCE: {res:Robust}

{txt}{p2colset 1 13 13 2}{...}
{p2col:Expression:}{res:Pr(change=1), predict(pr)}{p_end}
{p2col:dy/dx wrt:}{res:adist1 adist1_sq ahead d75 inv first20 RiskLineSwitchToB LossLineSwitchToB xjow female}{p_end}
{p2colreset}{...}

{res}{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31} Delta-method
{col 19}{c |}      dy/dx{col 31}   std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 11}adist1 {c |}{col 19}{res}{space 2} .0087322{col 31}{space 2} .0014687{col 42}{space 1}    5.95{col 51}{space 3}0.000{col 59}{space 4} .0058535{col 72}{space 3} .0116109
{txt}{space 8}adist1_sq {c |}{col 19}{res}{space 2}-.0000926{col 31}{space 2} .0000163{col 42}{space 1}   -5.68{col 51}{space 3}0.000{col 59}{space 4}-.0001246{col 72}{space 3}-.0000607
{txt}{space 12}ahead {c |}{col 19}{res}{space 2}-.1843095{col 31}{space 2} .0318074{col 42}{space 1}   -5.79{col 51}{space 3}0.000{col 59}{space 4}-.2466509{col 72}{space 3}-.1219681
{txt}{space 14}d75 {c |}{col 19}{res}{space 2} .0561535{col 31}{space 2} .0242787{col 42}{space 1}    2.31{col 51}{space 3}0.021{col 59}{space 4} .0085681{col 72}{space 3} .1037389
{txt}{space 14}inv {c |}{col 19}{res}{space 2}-.0418333{col 31}{space 2} .0509264{col 42}{space 1}   -0.82{col 51}{space 3}0.411{col 59}{space 4}-.1416472{col 72}{space 3} .0579807
{txt}{space 10}first20 {c |}{col 19}{res}{space 2} -.013244{col 31}{space 2} .0240796{col 42}{space 1}   -0.55{col 51}{space 3}0.582{col 59}{space 4}-.0604392{col 72}{space 3} .0339511
{txt}RiskLineSwitchToB {c |}{col 19}{res}{space 2}-.0514489{col 31}{space 2} .0058973{col 42}{space 1}   -8.72{col 51}{space 3}0.000{col 59}{space 4}-.0630074{col 72}{space 3}-.0398904
{txt}LossLineSwitchToB {c |}{col 19}{res}{space 2} .0214631{col 31}{space 2} .0127618{col 42}{space 1}    1.68{col 51}{space 3}0.093{col 59}{space 4}-.0035495{col 72}{space 3} .0464756
{txt}{space 13}xjow {c |}{col 19}{res}{space 2} .0016841{col 31}{space 2} .0011237{col 42}{space 1}    1.50{col 51}{space 3}0.134{col 59}{space 4}-.0005183{col 72}{space 3} .0038865
{txt}{space 11}female {c |}{col 19}{res}{space 2}  .000919{col 31}{space 2} .0648951{col 42}{space 1}    0.01{col 51}{space 3}0.989{col 59}{space 4} -.126273{col 72}{space 3} .1281111
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. est store C
{txt}
{com}. *****************************************
. esttab A B C using table.tex, se r2 keep(adist1 adist1_sq ahead d75 inv ///
> RiskLineSwitchToB LossLineSwitchToB xjow female) ///
> replace f starlevels(* 0.1 ** 0.05 *** 0.01)
{res}{txt}(output written to {browse  `"table.tex"'})

{com}. ****************************************************************
. 
. *******************
. ******TABLE 8******
. *******************
. clear
{txt}
{com}. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(2 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(8 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. *keep if changehat==1
. 
. *Period >10 & <=20 & Period >30
. *drop if part==3 & Period<=10
. *drop if part==4 & Period<=30
. 
. keep if contestperiod==1
{txt}(0 observations deleted)

{com}. keep if lottery==1
{txt}(2,560 observations deleted)

{com}. keep if Type==1
{txt}(1,280 observations deleted)

{com}. sum match2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 6}match2 {c |}{res}      1,280     .046875    .2114537          0          1
{txt}
{com}. 
. *gen direction=0
. *replace direction=1 if diff_br_1>diff_br_2
. *replace direction=1 if  diff_br_1==diff_br_2 & diff_br_1==0
. 
. gen outspend2=0
{txt}
{com}. replace outspend2=1 if x12hat>=x2hat
{txt}(927 real changes made)

{com}. sum outspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}outspend2 {c |}{res}      1,280    .7242188    .4470818          0          1
{txt}
{com}. gen slightoutspend2=0
{txt}
{com}. replace slightoutspend2=1 if x12hat-x2hat>=0.01 
{txt}(796 real changes made)

{com}. replace slightoutspend2=0 if x12hat-x2hat>5
{txt}(551 real changes made)

{com}. sum slightoutspend2

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
slightouts~2 {c |}{res}      1,280    .1914063    .3935618          0          1
{txt}
{com}. 
. gen sqrtx2hat=sqrt(x2hat)
{txt}
{com}. gen x2hatsq=x2hat*x2hat
{txt}
{com}. 
. egen xjowbar=mean(xjow)
{txt}
{com}. 
. *xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25, fe i(subjectid)
. *est store fixed
. *xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25, re i(subjectid)
. *hausman fixed ., sigmamore
. 
. *IN THE PAPER - JUNE 2021
. *alpha=0.25
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25, i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.1541                                         {txt}min = {res}         5
{txt}     Between = {res}0.0050                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.0905                                         {txt}max = {res}        16

                                                {txt}Wald chi2({res}3{txt})      =  {res}    58.02
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.5496476{col 26}{space 2} .1381015{col 37}{space 1}   -3.98{col 46}{space 3}0.000{col 54}{space 4}-.8203214{col 67}{space 3}-.2789737
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 8.503715{col 26}{space 2} 1.432925{col 37}{space 1}    5.93{col 46}{space 3}0.000{col 54}{space 4} 5.695233{col 67}{space 3}  11.3122
{txt}{space 9}inv {c |}{col 14}{res}{space 2}  8.08702{col 26}{space 2} 6.851729{col 37}{space 1}    1.18{col 46}{space 3}0.238{col 54}{space 4}-5.342123{col 67}{space 3} 21.51616
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 16.23312{col 26}{space 2} 4.363813{col 37}{space 1}    3.72{col 46}{space 3}0.000{col 54}{space 4} 7.680207{col 67}{space 3} 24.78604
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.974798
     {txt}sigma_e {c |} {res} 26.665094
         {txt}rho {c |} {res} .35944634{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.25, vce(cluster subjectid)
. est store A
{txt}
{com}. *predict xbr25 if alpha==0.25
. gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr25=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. *alpha=0.75
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       640
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        64

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2254                                         {txt}min = {res}         4
{txt}     Between = {res}0.1085                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.1848                                         {txt}max = {res}        17

                                                {txt}Wald chi2({res}3{txt})      =  {res}   254.55
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.7994133{col 26}{space 2} .1344883{col 37}{space 1}   -5.94{col 46}{space 3}0.000{col 54}{space 4}-1.063005{col 67}{space 3}-.5358212
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2}  11.4271{col 26}{space 2} 1.245723{col 37}{space 1}    9.17{col 46}{space 3}0.000{col 54}{space 4} 8.985531{col 67}{space 3} 13.86867
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 17.98433{col 26}{space 2} 1.531107{col 37}{space 1}   11.75{col 46}{space 3}0.000{col 54}{space 4} 14.98342{col 67}{space 3} 20.98525
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 11.77709{col 26}{space 2} 4.983728{col 37}{space 1}    2.36{col 46}{space 3}0.018{col 54}{space 4} 2.009159{col 67}{space 3} 21.54501
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 19.466571
     {txt}sigma_e {c |} {res}  25.60477
         {txt}rho {c |} {res} .36629143{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store B
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.25 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       434
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        60

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2216                                         {txt}min = {res}         1
{txt}     Between = {res}0.2036                                         {txt}avg = {res}       7.2
{txt}     Overall = {res}0.1870                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}3{txt})      =  {res}   109.89
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6214736{col 26}{space 2} .2528202{col 37}{space 1}   -2.46{col 46}{space 3}0.014{col 54}{space 4}-1.116992{col 67}{space 3}-.1259551
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.16473{col 26}{space 2} 2.343644{col 37}{space 1}    4.34{col 46}{space 3}0.000{col 54}{space 4} 5.571275{col 67}{space 3} 14.75819
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 9.185786{col 26}{space 2} 8.942919{col 37}{space 1}    1.03{col 46}{space 3}0.304{col 54}{space 4}-8.342014{col 67}{space 3} 26.71359
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 8.094571{col 26}{space 2} 4.665199{col 37}{space 1}    1.74{col 46}{space 3}0.083{col 54}{space 4} -1.04905{col 67}{space 3} 17.23819
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 18.754565
     {txt}sigma_e {c |} {res} 26.827845
         {txt}rho {c |} {res} .32827302{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store C
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr25_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. xtreg x12hat x2hat sqrtx2hat inv if alpha==0.75 & changehat==1,  i(subjectid) vce(cluster sessionid)
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}       476
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}        63

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.2665                                         {txt}min = {res}         1
{txt}     Between = {res}0.2733                                         {txt}avg = {res}       7.6
{txt}     Overall = {res}0.2384                                         {txt}max = {res}        13

                                                {txt}Wald chi2({res}3{txt})      =  {res}   219.70
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0000

{txt}{ralign 78:(Std. err. adjusted for {res:8} clusters in sessionid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 7}x2hat {c |}{col 14}{res}{space 2}-.6550246{col 26}{space 2} .1310692{col 37}{space 1}   -5.00{col 46}{space 3}0.000{col 54}{space 4}-.9119155{col 67}{space 3}-.3981336
{txt}{space 3}sqrtx2hat {c |}{col 14}{res}{space 2} 10.76415{col 26}{space 2} 1.085404{col 37}{space 1}    9.92{col 46}{space 3}0.000{col 54}{space 4} 8.636801{col 67}{space 3} 12.89151
{txt}{space 9}inv {c |}{col 14}{res}{space 2} 11.99457{col 26}{space 2} 3.535731{col 37}{space 1}    3.39{col 46}{space 3}0.001{col 54}{space 4} 5.064662{col 67}{space 3} 18.92447
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 10.57784{col 26}{space 2} 5.153371{col 37}{space 1}    2.05{col 46}{space 3}0.040{col 54}{space 4} .4774191{col 67}{space 3} 20.67826
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res}  18.59713
     {txt}sigma_e {c |} {res} 24.950564
         {txt}rho {c |} {res} .35714479{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. *reg x12hat x2hat x2hatsq inv if alpha==0.75, vce(cluster subjectid)
. est store D
{txt}
{com}. *predict xbr75 if alpha==0.75
. gen xbr75_rev=_b[x2hat]*x2hat+_b[sqrtx2hat]*sqrtx2hat
{txt}
{com}. *gen xbr75=_b[_cons]+_b[x2hat]*x2hat+_b[x2hatsq]*x2hatsq
. 
. 
. esttab A B C D using table8.doc, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}{p 0 4 2}
(file {bf}
table8.doc{rm}
not found)
{p_end}
(output written to {browse  `"table8.doc"'})

{com}. esttab A B C D using table8.doc, ///
> se keep(x2hat sqrtx2hat inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
{res}{txt}(output written to {browse  `"table8.doc"'})

{com}. *se keep(x2hat  x2hatsq inv _cons) replace f starlevels(* 0.1 ** 0.05 *** 0.01) stats(N r2)
. 
. 
. ****************************************
. *****************EXTENSION**************
. ****************************************
. clear 
{txt}
{com}. 
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(8 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(2 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. *Adding detailed Risk Prefrences 
. do mergeriskpref.do
{txt}
{com}. 
. *session 1
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session1_Lottery_75_25_Friday_04_08_11_30.dta"
{err}no; dataset in memory has changed since last saved
{txt}{search r(4), local:r(4);}

end of do-file
{search r(4), local:r(4);}

end of do-file

{search r(4), local:r(4);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. *Adding detailed Risk Prefrences 
. do mergeriskpref.do
{txt}
{com}. clear
{txt}
{com}. *session 1
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session1_Lottery_75_25_Friday_04_08_11_30.dta"
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(672 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session1.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session1.dta{rm}
saved
{p_end}

{com}. 
. *session2
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(1,008 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session2.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session2.dta{rm}
saved
{p_end}

{com}. 
. *session3
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(336 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session3.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session3.dta{rm}
saved
{p_end}

{com}. 
. *session4
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session4_Lottery_25_75_Saturday_04_09_1_15.dta" 
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(672 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session4.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session4.dta{rm}
saved
{p_end}

{com}. 
. *session5
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session5_Lottery_25_75_Saturday_04_09_3_30.dta" 
{txt}
{com}. 
. 
. drop if RiskLine1==.
{txt}(672 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session5.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session5.dta{rm}
saved
{p_end}

{com}. 
. *session6
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session6_Lottery_75_25_Sunday_04_10_11_30.dta"  
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(672 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session6.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session6.dta{rm}
saved
{p_end}

{com}. 
. *session7
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session7_AllPay_25_75_Sunday_04_10_1_45.dta" 
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(672 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session7.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session7.dta{rm}
saved
{p_end}

{com}. 
. *session8
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session8_AllPay_25_75_Sunday_04_10_4_00.dta"  
{txt}
{com}. 
. drop if RiskLine1==.
{txt}(672 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session8.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session8.dta{rm}
saved
{p_end}

{com}. 
. **Merging with main Ds
. 
. *.do file that came with dataset
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas
{txt}
{com}. 
. merge m:1 session Subject using Session1.dta
{res}{err}{p 0 4 2}
variable{err}s{err} session
Subject
do not uniquely identify observations in the
using data
{p_end}
{txt}{search r(459), local:r(459);}

end of do-file
{search r(459), local:r(459);}

end of do-file

{search r(459), local:r(459);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. clear
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{err}{p 0 4 2}
file {bf:{err}Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta}
not found
{p_end}
{txt}{search r(601), local:r(601);}

end of do-file

{search r(601), local:r(601);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. do mergeriskpref.do
{txt}
{com}. clear
{txt}
{com}. *session 1
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session1_Lottery_75_25_Friday_04_08_11_30.dta"
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(656 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session1.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session1.dta{rm}
saved
{p_end}

{com}. 
. *session2
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(984 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session2.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session2.dta{rm}
saved
{p_end}

{com}. 
. *session3
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(328 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session3.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session3.dta{rm}
saved
{p_end}

{com}. 
. *session4
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session4_Lottery_25_75_Saturday_04_09_1_15.dta" 
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(656 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session4.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session4.dta{rm}
saved
{p_end}

{com}. 
. *session5
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session5_Lottery_25_75_Saturday_04_09_3_30.dta" 
{txt}
{com}. 
. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(656 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session5.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session5.dta{rm}
saved
{p_end}

{com}. 
. *session6
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session6_Lottery_75_25_Sunday_04_10_11_30.dta"  
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(656 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session6.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session6.dta{rm}
saved
{p_end}

{com}. 
. *session7
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session7_AllPay_25_75_Sunday_04_10_1_45.dta" 
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(656 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session7.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session7.dta{rm}
saved
{p_end}

{com}. 
. *session8
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session8_AllPay_25_75_Sunday_04_10_4_00.dta"  
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(656 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session8.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session8.dta{rm}
saved
{p_end}

{com}. 
. **Merging with main Ds
. 
. *.do file that came with dataset
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas
{txt}
{com}. 
. merge m:1 session Subject using Session1.dta
{res}{err}{p 0 4 2}
variable{err}s{err} session
Subject
do not uniquely identify observations in the
using data
{p_end}
{txt}{search r(459), local:r(459);}

end of do-file
{search r(459), local:r(459);}

end of do-file

{search r(459), local:r(459);}

{com}. clear

. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{err}{p 0 4 2}
file {bf:{err}Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta}
not found
{p_end}
{txt}{search r(601), local:r(601);}

end of do-file

{search r(601), local:r(601);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(328 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
{txt}end of do-file

{com}. clear

. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. drop if RiskLine1==. & LossLine1 ==.
{txt}(328 observations deleted)

{com}. 
{txt}end of do-file

{com}. clear

. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(336 observations deleted)

{com}. drop if LossLine1==. 
{txt}(8 observations deleted)

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. do mergeriskpref.do
{txt}
{com}. clear
{txt}
{com}. *session 1
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session1_Lottery_75_25_Friday_04_08_11_30.dta"
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(656 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session1.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session1.dta{rm}
saved
{p_end}

{com}. 
. *session2
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(984 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session2.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session2.dta{rm}
saved
{p_end}

{com}. 
. *session3
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(336 observations deleted)

{com}. drop if LossLine1==. 
{txt}(8 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session3.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session3.dta{rm}
saved
{p_end}

{com}. 
. *session4
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session4_Lottery_25_75_Saturday_04_09_1_15.dta" 
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(656 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session4.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session4.dta{rm}
saved
{p_end}

{com}. 
. *session5
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session5_Lottery_25_75_Saturday_04_09_3_30.dta" 
{txt}
{com}. 
. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(656 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session5.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session5.dta{rm}
saved
{p_end}

{com}. 
. *session6
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session6_Lottery_75_25_Sunday_04_10_11_30.dta"  
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(656 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session6.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session6.dta{rm}
saved
{p_end}

{com}. 
. *session7
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session7_AllPay_25_75_Sunday_04_10_1_45.dta" 
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(656 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session7.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session7.dta{rm}
saved
{p_end}

{com}. 
. *session8
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session8_AllPay_25_75_Sunday_04_10_4_00.dta"  
{txt}
{com}. 
. drop if RiskLine1==. & LossLine1 ==.
{txt}(656 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session8.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session8.dta{rm}
saved
{p_end}

{com}. 
. **Merging with main Ds
. 
. *.do file that came with dataset
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas
{txt}
{com}. 
. merge m:1 session Subject using Session1.dta
{res}{err}{p 0 4 2}
variable{err}s{err} session
Subject
do not uniquely identify observations in the
using data
{p_end}
{txt}{search r(459), local:r(459);}

end of do-file
{search r(459), local:r(459);}

end of do-file

{search r(459), local:r(459);}

{com}. use Session1.dta
{err}no; dataset in memory has changed since last saved
{txt}{search r(4), local:r(4);}

{com}. clear

. use Session1.dta

. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. do mergeriskpref.do
{err}{p 0 4 2}
file {bf:{err}mergeriskpref.do}
not found
{p_end}
{txt}{search r(601), local:r(601);}

end of do-file

{search r(601), local:r(601);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. do mergeriskpref.do
{txt}
{com}. clear
{txt}
{com}. *session 1
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session1_Lottery_75_25_Friday_04_08_11_30.dta"
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session1.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session1.dta{rm}
saved
{p_end}

{com}. 
. *session2
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(1,008 observations deleted)

{com}. drop if LossLine1==. 
{txt}(24 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session2.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session2.dta{rm}
saved
{p_end}

{com}. 
. *session3
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(336 observations deleted)

{com}. drop if LossLine1==. 
{txt}(8 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session3.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session3.dta{rm}
saved
{p_end}

{com}. 
. *session4
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session4_Lottery_25_75_Saturday_04_09_1_15.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session4.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session4.dta{rm}
saved
{p_end}

{com}. 
. *session5
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session5_Lottery_25_75_Saturday_04_09_3_30.dta" 
{txt}
{com}. 
. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session5.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session5.dta{rm}
saved
{p_end}

{com}. 
. *session6
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session6_Lottery_75_25_Sunday_04_10_11_30.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session6.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session6.dta{rm}
saved
{p_end}

{com}. 
. *session7
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session7_AllPay_25_75_Sunday_04_10_1_45.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session7.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session7.dta{rm}
saved
{p_end}

{com}. 
. *session8
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session8_AllPay_25_75_Sunday_04_10_4_00.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session8.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session8.dta{rm}
saved
{p_end}

{com}. 
. **Merging with main Ds
. 
. *.do file that came with dataset
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas
{txt}
{com}. 
. merge m:1 session Subject using Session1.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. 
. 
. 
. 
. 
. 
. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. do mergeriskpref.do
{txt}
{com}. clear
{txt}
{com}. *session 1
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session1_Lottery_75_25_Friday_04_08_11_30.dta"
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session1.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session1.dta{rm}
saved
{p_end}

{com}. 
. *session2
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(1,008 observations deleted)

{com}. drop if LossLine1==. 
{txt}(24 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session2.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session2.dta{rm}
saved
{p_end}

{com}. 
. *session3
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(336 observations deleted)

{com}. drop if LossLine1==. 
{txt}(8 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session3.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session3.dta{rm}
saved
{p_end}

{com}. 
. *session4
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session4_Lottery_25_75_Saturday_04_09_1_15.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session4.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session4.dta{rm}
saved
{p_end}

{com}. 
. *session5
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session5_Lottery_25_75_Saturday_04_09_3_30.dta" 
{txt}
{com}. 
. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session5.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session5.dta{rm}
saved
{p_end}

{com}. 
. *session6
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session6_Lottery_75_25_Sunday_04_10_11_30.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session6.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session6.dta{rm}
saved
{p_end}

{com}. 
. *session7
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session7_AllPay_25_75_Sunday_04_10_1_45.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session7.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session7.dta{rm}
saved
{p_end}

{com}. 
. *session8
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session8_AllPay_25_75_Sunday_04_10_4_00.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session8.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session8.dta{rm}
saved
{p_end}

{com}. 
. **Merging with main Ds
. 
. *.do file that came with dataset
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas
{txt}
{com}. 
. merge m:1 session Subject using Session1.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session2.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKProfitIfTwoStagesOK} was {bf:byte}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:EarningsPayingPeriod2} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:TotalEarnings34} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,160
{txt}{col 9}from master{col 30}{res}           4,160{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             960{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session3.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,800
{txt}{col 9}from master{col 30}{res}           4,800{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             320{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session4.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session5.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKRiskAversionScreenOK} was {bf:byte}, now {bf:int} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session6.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session7.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session8.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. 
. 
. 
. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. gen Risk*lottery = RiskLineSwitchToB*non-monr
{err}* invalid name
{txt}{search r(198), local:r(198);}

end of do-file

{search r(198), local:r(198);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. gen Risklott = RiskLineSwitchToB*non-monr
{err}non not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. gen non-monr= 0
{err}invalid syntax
{txt}{search r(198), local:r(198);}

end of do-file

{search r(198), local:r(198);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. gen Risklott = RiskLineSwitchToB*lottery
{txt}
{com}. 
{txt}end of do-file

{com}. keep if Type = 2
{err}=exp not allowed
{txt}{search r(101), local:r(101);}

{com}. keep if Type ==2
{txt}(2,560 observations deleted)

{com}. reg x2hat RiskLineSwitchToB

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     2,560
{txt}{hline 13}{c +}{hline 34}   F(1, 2558)      = {res}     3.09
{txt}       Model {c |} {res} 4055.05999         1  4055.05999   {txt}Prob > F        ={res}    0.0787
{txt}    Residual {c |} {res} 3353192.67     2,558    1310.865   {txt}R-squared       ={res}    0.0012
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0008
{txt}       Total {c |} {res} 3357247.73     2,559  1311.93737   {txt}Root MSE        =   {res} 36.206

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  Std. err.{col 43}      t{col 51}   P>|t|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2}-.3185042{col 31}{space 2} .1810904{col 42}{space 1}   -1.76{col 51}{space 3}0.079{col 59}{space 4}-.6736029{col 72}{space 3} .0365945
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 43.76382{col 31}{space 2} 1.898115{col 42}{space 1}   23.06{col 51}{space 3}0.000{col 59}{space 4} 40.04182{col 72}{space 3} 47.48582
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. xtreg x2hat RiskLineSwitchToB lottery RiskLott,  i(subjectid) 
{err}variable {bf}RiskLott{sf} not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. xtreg x2hat RiskLineSwitchToB lottery Risklott,  i(subjectid) 
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     2,560
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}       128

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0000                                         {txt}min = {res}        12
{txt}     Between = {res}0.0587                                         {txt}avg = {res}      20.0
{txt}     Overall = {res}0.0191                                         {txt}max = {res}        30

                                                {txt}Wald chi2({res}3{txt})      =  {res}     7.69
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0529

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  Std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2}  .529002{col 31}{space 2} .7231047{col 42}{space 1}    0.73{col 51}{space 3}0.464{col 59}{space 4}-.8882572{col 72}{space 3} 1.946261
{txt}{space 10}lottery {c |}{col 19}{res}{space 2} 19.81046{col 31}{space 2} 9.968011{col 42}{space 1}    1.99{col 51}{space 3}0.047{col 59}{space 4} .2735185{col 72}{space 3}  39.3474
{txt}{space 9}Risklott {c |}{col 19}{res}{space 2}-1.083288{col 31}{space 2} .9481537{col 42}{space 1}   -1.14{col 51}{space 3}0.253{col 59}{space 4}-2.941635{col 72}{space 3} .7750595
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 30.32807{col 31}{space 2} 7.853089{col 42}{space 1}    3.86{col 51}{space 3}0.000{col 59}{space 4}  14.9363{col 72}{space 3} 45.71984
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
          sigma_u {c |} {res} 19.991352
          {txt}sigma_e {c |} {res} 29.694072
              {txt}rho {c |} {res} .31189061{txt}   (fraction of variance due to u_i)
{hline 18}{c BT}{hline 64}

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. keep if Type ==2
{txt}(0 observations deleted)

{com}. drop if nonmonr==1
{err}nonmonr not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. gen nonmonr= 0
{txt}
{com}. replace nonmonr = 1 if RiskLine1<=RiskLine2<=RiskLine3<=RiskLine4<=RiskLine5<=RiskLine6<=RiskLine7<=RiskLine8<=RiskLine9<=RiskLine10<=RiskLine11<=RiskLine12<=RiskLine13<=RiskLine14<=RiskLine15<=RiskLine16<=RiskLine17<=RiskLine18<=RiskLine19<=RiskLine20
{txt}(2,560 real changes made)

{com}. 
. gen Risklott = RiskLineSwitchToB*lottery
{err}variable {bf}Risklott{sf} already defined
{txt}{search r(110), local:r(110);}

end of do-file

{search r(110), local:r(110);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. *Adding detailed Risk Prefrences 
. do mergeriskpref.do
{txt}
{com}. clear
{txt}
{com}. *session 1
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session1_Lottery_75_25_Friday_04_08_11_30.dta"
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session1.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session1.dta{rm}
saved
{p_end}

{com}. 
. *session2
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(1,008 observations deleted)

{com}. drop if LossLine1==. 
{txt}(24 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session2.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session2.dta{rm}
saved
{p_end}

{com}. 
. *session3
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(336 observations deleted)

{com}. drop if LossLine1==. 
{txt}(8 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session3.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session3.dta{rm}
saved
{p_end}

{com}. 
. *session4
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session4_Lottery_25_75_Saturday_04_09_1_15.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session4.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session4.dta{rm}
saved
{p_end}

{com}. 
. *session5
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session5_Lottery_25_75_Saturday_04_09_3_30.dta" 
{txt}
{com}. 
. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session5.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session5.dta{rm}
saved
{p_end}

{com}. 
. *session6
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session6_Lottery_75_25_Sunday_04_10_11_30.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session6.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session6.dta{rm}
saved
{p_end}

{com}. 
. *session7
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session7_AllPay_25_75_Sunday_04_10_1_45.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session7.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session7.dta{rm}
saved
{p_end}

{com}. 
. *session8
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session8_AllPay_25_75_Sunday_04_10_4_00.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session8.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session8.dta{rm}
saved
{p_end}

{com}. 
. **Merging with main Ds
. 
. *.do file that came with dataset
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas
{txt}
{com}. 
. merge m:1 session Subject using Session1.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session2.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKProfitIfTwoStagesOK} was {bf:byte}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:EarningsPayingPeriod2} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:TotalEarnings34} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,160
{txt}{col 9}from master{col 30}{res}           4,160{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             960{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session3.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,800
{txt}{col 9}from master{col 30}{res}           4,800{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             320{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session4.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session5.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKRiskAversionScreenOK} was {bf:byte}, now {bf:int} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session6.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session7.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session8.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. 
. 
. 
. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
. *label changes
. label var xjow "Joy of winning"
{txt}
{com}. label var alpha "$\alpha$"
{txt}
{com}. label var risk "Risk aversion"
{txt}
{com}. label var loss "Loss aversion"
{txt}
{com}. *label var LossLineSwitchToB "Loss aversion"
. label var inv "$1/Period$"
{txt}
{com}. 
. *generate sd,median variables
. gen x_sd=x
{txt}
{com}. gen x_med=x
{txt}
{com}. 
. *alpha .75 dummy variable 
. gen dalpha=0
{txt}
{com}. replace dalpha=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. gen change=.
{err}variable {bf}change{sf} already defined
{txt}{search r(110), local:r(110);}

end of do-file

{search r(110), local:r(110);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. do mergeriskpref.do
{txt}
{com}. clear
{txt}
{com}. *session 1
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session1_Lottery_75_25_Friday_04_08_11_30.dta"
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session1.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session1.dta{rm}
saved
{p_end}

{com}. 
. *session2
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(1,008 observations deleted)

{com}. drop if LossLine1==. 
{txt}(24 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session2.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session2.dta{rm}
saved
{p_end}

{com}. 
. *session3
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(336 observations deleted)

{com}. drop if LossLine1==. 
{txt}(8 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session3.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session3.dta{rm}
saved
{p_end}

{com}. 
. *session4
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session4_Lottery_25_75_Saturday_04_09_1_15.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session4.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session4.dta{rm}
saved
{p_end}

{com}. 
. *session5
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session5_Lottery_25_75_Saturday_04_09_3_30.dta" 
{txt}
{com}. 
. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session5.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session5.dta{rm}
saved
{p_end}

{com}. 
. *session6
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session6_Lottery_75_25_Sunday_04_10_11_30.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session6.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session6.dta{rm}
saved
{p_end}

{com}. 
. *session7
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session7_AllPay_25_75_Sunday_04_10_1_45.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session7.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session7.dta{rm}
saved
{p_end}

{com}. 
. *session8
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session8_AllPay_25_75_Sunday_04_10_4_00.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session8.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session8.dta{rm}
saved
{p_end}

{com}. 
. **Merging with main Ds
. 
. *.do file that came with dataset
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(3 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(7 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas
{txt}
{com}. 
. merge m:1 session Subject using Session1.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session2.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKProfitIfTwoStagesOK} was {bf:byte}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:EarningsPayingPeriod2} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:TotalEarnings34} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,160
{txt}{col 9}from master{col 30}{res}           4,160{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             960{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session3.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,800
{txt}{col 9}from master{col 30}{res}           4,800{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             320{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session4.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session5.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKRiskAversionScreenOK} was {bf:byte}, now {bf:int} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session6.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session7.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session8.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. 
. 
. 
. 
{txt}end of do-file

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
. *label changes
. label var xjow "Joy of winning"
{txt}
{com}. label var alpha "$\alpha$"
{txt}
{com}. label var risk "Risk aversion"
{txt}
{com}. label var loss "Loss aversion"
{txt}
{com}. *label var LossLineSwitchToB "Loss aversion"
. label var inv "$1/Period$"
{txt}
{com}. 
. *generate sd,median variables
. gen x_sd=x
{txt}
{com}. gen x_med=x
{txt}
{com}. 
. *alpha .75 dummy variable 
. gen dalpha=0
{txt}
{com}. replace dalpha=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. gen change=.
{err}variable {bf}change{sf} already defined
{txt}{search r(110), local:r(110);}

end of do-file

{search r(110), local:r(110);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. gen reduce=0
{txt}
{com}. replace reduce=1 if Type==1 & x12hat<x1hat
{txt}(1,065 real changes made)

{com}. 
. gen raise=0
{txt}
{com}. replace raise=1 if Type==1 & x12hat>x1hat
{txt}(965 real changes made)

{com}. 
. gen rationalrev=0
{txt}
{com}. replace rationalrev=1 if x1hat~=br1
{txt}(4,999 real changes made)

{com}. *replace rationalrev=1 if x2hat & lottery==1
. 
. gen overbid=1
{txt}
{com}. replace overbid=0 if x1hat<=br1  
{txt}(1,538 real changes made)

{com}. 
. gen underbid=0
{txt}
{com}. replace underbid=1 if x1hat<br1 
{txt}(1,417 real changes made)

{com}. 
. gen ahead=0
{txt}
{com}. replace ahead=1 if x1hat>x2hat
{txt}(2,544 real changes made)

{com}. 
. gen onedisttoother=x1hat-x2hat
{txt}
{com}. gen twodisttoother=x12hat-x2hat
{txt}
{com}. 
. gen irr_nochange=0 
{txt}
{com}. replace irr_nochange=1 if changehat==0 & rationalrev==1
{txt}(956 real changes made)

{com}. 
. gen irr_rev_dec=0
{txt}
{com}. replace irr_rev_dec=1 if irr_nochange==1
{txt}(956 real changes made)

{com}. replace irr_rev_dec=1 if changehat==1 & x1hat==br1
{txt}(17 real changes made)

{com}. 
. label var rationalrev "Revising is rational"
{txt}
{com}. label var changehat "Subject revised"
{txt}
{com}. label var irr_nochange "No change even though was rational"
{txt}
{com}. 
. ** Non-monotonic risk preferences
. 
. gen nonmonr= 0
{txt}
{com}. replace nonmonr = 1 if RiskLine1<=RiskLine2<=RiskLine3<=RiskLine4<=RiskLine5<=RiskLine6<=RiskLine7<=RiskLine8<=RiskLine9<=RiskLine10<=RiskLine11<=RiskLine12<=RiskLine13<=RiskLine14<=RiskLine15<=RiskLine16<=RiskLine17<=RiskLine18<=RiskLine19<=RiskLine20
{txt}(5,120 real changes made)

{com}. 
. gen Risklott = RiskLineSwitchToB*lottery
{txt}
{com}. 
. 
. **** Table 2 ***
. 
. keep if Type ==2
{txt}(2,560 observations deleted)

{com}. drop if nonmonr==1
{txt}(2,560 observations deleted)

{com}. 
. reg x2hat RiskLineSwitchToB if alpha==0.25 , robust
{err}no observations
{txt}{search r(2000), local:r(2000);}

end of do-file

{search r(2000), local:r(2000);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. do mergeriskpref.do
{txt}
{com}. clear
{txt}
{com}. *session 1
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session1_Lottery_75_25_Friday_04_08_11_30.dta"
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session1.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session1.dta{rm}
saved
{p_end}

{com}. 
. *session2
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(1,008 observations deleted)

{com}. drop if LossLine1==. 
{txt}(24 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session2.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session2.dta{rm}
saved
{p_end}

{com}. 
. *session3
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(336 observations deleted)

{com}. drop if LossLine1==. 
{txt}(8 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session3.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session3.dta{rm}
saved
{p_end}

{com}. 
. *session4
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session4_Lottery_25_75_Saturday_04_09_1_15.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session4.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session4.dta{rm}
saved
{p_end}

{com}. 
. *session5
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session5_Lottery_25_75_Saturday_04_09_3_30.dta" 
{txt}
{com}. 
. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session5.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session5.dta{rm}
saved
{p_end}

{com}. 
. *session6
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session6_Lottery_75_25_Sunday_04_10_11_30.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session6.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session6.dta{rm}
saved
{p_end}

{com}. 
. *session7
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session7_AllPay_25_75_Sunday_04_10_1_45.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session7.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session7.dta{rm}
saved
{p_end}

{com}. 
. *session8
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session8_AllPay_25_75_Sunday_04_10_4_00.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session8.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session8.dta{rm}
saved
{p_end}

{com}. 
. **Merging with main Ds
. 
. *.do file that came with dataset
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas
{txt}
{com}. 
. merge m:1 session Subject using Session1.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session2.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKProfitIfTwoStagesOK} was {bf:byte}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:EarningsPayingPeriod2} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:TotalEarnings34} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,160
{txt}{col 9}from master{col 30}{res}           4,160{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             960{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session3.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,800
{txt}{col 9}from master{col 30}{res}           4,800{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             320{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session4.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session5.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKRiskAversionScreenOK} was {bf:byte}, now {bf:int} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session6.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session7.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session8.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. 
. 
. 
. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
. *label changes
. label var xjow "Joy of winning"
{txt}
{com}. label var alpha "$\alpha$"
{txt}
{com}. label var risk "Risk aversion"
{txt}
{com}. label var loss "Loss aversion"
{txt}
{com}. *label var LossLineSwitchToB "Loss aversion"
. label var inv "$1/Period$"
{txt}
{com}. 
. *generate sd,median variables
. gen x_sd=x
{txt}
{com}. gen x_med=x
{txt}
{com}. 
. *alpha .75 dummy variable 
. gen dalpha=0
{txt}
{com}. replace dalpha=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. 
. gen reduce=0
{txt}
{com}. replace reduce=1 if Type==1 & x12hat<x1hat
{txt}(1,065 real changes made)

{com}. 
. gen raise=0
{txt}
{com}. replace raise=1 if Type==1 & x12hat>x1hat
{txt}(965 real changes made)

{com}. 
. gen rationalrev=0
{txt}
{com}. replace rationalrev=1 if x1hat~=br1
{txt}(4,998 real changes made)

{com}. *replace rationalrev=1 if x2hat & lottery==1
. 
. gen overbid=1
{txt}
{com}. replace overbid=0 if x1hat<=br1  
{txt}(1,541 real changes made)

{com}. 
. gen underbid=0
{txt}
{com}. replace underbid=1 if x1hat<br1 
{txt}(1,419 real changes made)

{com}. 
. gen ahead=0
{txt}
{com}. replace ahead=1 if x1hat>x2hat
{txt}(2,544 real changes made)

{com}. 
. gen onedisttoother=x1hat-x2hat
{txt}
{com}. gen twodisttoother=x12hat-x2hat
{txt}
{com}. 
. gen irr_nochange=0 
{txt}
{com}. replace irr_nochange=1 if changehat==0 & rationalrev==1
{txt}(956 real changes made)

{com}. 
. gen irr_rev_dec=0
{txt}
{com}. replace irr_rev_dec=1 if irr_nochange==1
{txt}(956 real changes made)

{com}. replace irr_rev_dec=1 if changehat==1 & x1hat==br1
{txt}(18 real changes made)

{com}. 
. label var rationalrev "Revising is rational"
{txt}
{com}. label var changehat "Subject revised"
{txt}
{com}. label var irr_nochange "No change even though was rational"
{txt}
{com}. 
. ** Non-monotonic risk preferences
. 
. gen nonmonr= 0
{txt}
{com}. replace nonmonr = 1 if RiskLine1<=RiskLine2<=RiskLine3<=RiskLine4<=RiskLine5<=RiskLine6<=RiskLine7<=RiskLine8<=RiskLine9<=RiskLine10<=RiskLine11<=RiskLine12<=RiskLine13<=RiskLine14<=RiskLine15<=RiskLine16<=RiskLine17<=RiskLine18<=RiskLine19<=RiskLine20
{txt}(5,120 real changes made)

{com}. 
{txt}end of do-file

{com}. browse

. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. gen nonmonr= 1
{err}variable {bf}nonmonr{sf} already defined
{txt}{search r(110), local:r(110);}

end of do-file

{search r(110), local:r(110);}

{com}. drop nonmonr

. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. gen nonmonr= 1
{txt}
{com}. replace nonmonr = 0 if RiskLine1<=RiskLine2<=RiskLine3<=RiskLine4<=RiskLine5<=RiskLine6<=RiskLine7<=RiskLine8<=RiskLine9<=RiskLine10<=RiskLine11<=RiskLine12<=RiskLine13<=RiskLine14<=RiskLine15<=RiskLine16<=RiskLine17<=RiskLine18<=RiskLine19<=RiskLine20
{txt}(5,120 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. clear nonmonr
{err}nonmonr not allowed
{txt}{search r(198), local:r(198);}

{com}. drop nonmonr

. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. gen nonmonr= 1
{txt}
{com}. replace nonmonr = 0 if RiskLine1<=RiskLine2 | RiskLine2<=RiskLine3 | RiskLine3<=RiskLine4 | RiskLine4<=RiskLine5 | RiskLine5<=RiskLine6
{txt}(5,120 real changes made)

{com}. replace nonmonr = 0 RiskLine6<=RiskLine7 | RiskLine7<=RiskLine8 | RiskLine8<=RiskLine9 | RiskLien9<=RiskLine10 | RiskLine10<=RiskLine11
{err}invalid 'RiskLine6' 
{txt}{search r(198), local:r(198);}

end of do-file

{search r(198), local:r(198);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. replace nonmonr = 0 if RiskLine6<=RiskLine7 | RiskLine7<=RiskLine8 | RiskLine8<=RiskLine9 | RiskLien9<=RiskLine10 | RiskLine10<=RiskLine11
{err}RiskLien9 not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. replace nonmonr = 0 if RiskLine6<=RiskLine7 | RiskLine7<=RiskLine8 | RiskLine8<=RiskLine9 | RiskLine9<=RiskLine10 | RiskLine10<=RiskLine11
{txt}(0 real changes made)

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. replace nonmonr = 0 if RiskLine11<=RiskLine12 | RiskLine 13<=RiskLine13 | RiskLine13<=RiskLine14 | RiskLine14<=RiskLine15 | RiskLine15<=RiskLine16
{err}RiskLine ambiguous abbreviation
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. replace nonmonr = 0 if RiskLine11<=RiskLine12 | RiskLine12<=RiskLine13 | RiskLine13<=RiskLine14 | RiskLine14<=RiskLine15 | RiskLine15<=RiskLine16
{txt}(0 real changes made)

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. replace nonmonr = 0 if RiskLine16<=RiskLine17 | RiskLine17<=RiskLine18 | RiskLine 18<=RiskLine19 | RiskLine19<=RiskLine20
{err}RiskLine ambiguous abbreviation
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. replace nonmonr = 0 if RiskLine16<=RiskLine17 | RiskLine17<=RiskLine18 | RiskLine18<=RiskLine19 | RiskLine19<=RiskLine20
{txt}(0 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. drop nonmonr

. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. gen nonmonr= 0
{txt}
{com}. replace nonmonr = 1 if RiskLine1>=RiskLine2 | RiskLine2>=RiskLine3 | RiskLine3>=RiskLine4 | RiskLine4>=RiskLine5 | RiskLine5>=RiskLine6
{txt}(5,120 real changes made)

{com}. replace nonmonr = 1 if RiskLine6>=RiskLine7 | RiskLine7>=RiskLine8 | RiskLine8>=RiskLine9 | RiskLine9>=RiskLine10 | RiskLine10>=RiskLine11
{txt}(0 real changes made)

{com}. replace nonmonr = 1 if RiskLine11>=RiskLine12 | RiskLine12>=RiskLine13 | RiskLine13>=RiskLine14 | RiskLine14>=RiskLine15 | RiskLine15>=RiskLine16
{txt}(0 real changes made)

{com}. replace nonmonr = 1 if RiskLine16>=RiskLine17 | RiskLine17>=RiskLine18 | RiskLine18>=RiskLine19 | RiskLine19>=RiskLine20
{txt}(0 real changes made)

{com}. 
{txt}end of do-file

{com}. drop nonmonr

. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. gen nonmonr= 0
{txt}
{com}. 
{txt}end of do-file

{com}. replace nonmonr = 1 if RiskLine11 > 12
{txt}(4,480 real changes made)

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. replace nonmonr = 1 if RiskLine1>RiskLine2 | RiskLine2>RiskLine3 | RiskLine3>RiskLine4 | RiskLine4>RiskLine5 | RiskLine5>RiskLine6
{txt}(0 real changes made)

{com}. replace nonmonr = 1 if RiskLine6>RiskLine7 | RiskLine7>RiskLine8 | RiskLine8>RiskLine9 | RiskLine9>RiskLine10 | RiskLine10>RiskLine11
{txt}(40 real changes made)

{com}. replace nonmonr = 1 if RiskLine11>RiskLine12 | RiskLine12>RiskLine13 | RiskLine13>RiskLine14 | RiskLine14>RiskLine15 | RiskLine15>RiskLine16
{txt}(40 real changes made)

{com}. replace nonmonr = 1 if RiskLine16>RiskLine17 | RiskLine17>RiskLine18 | RiskLine18>RiskLine19 | RiskLine19>RiskLine20
{txt}(0 real changes made)

{com}. 
{txt}end of do-file

{com}. drop nonmonr

. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. gen nonmonr= 0
{txt}
{com}. replace nonmonr = 1 if RiskLine1>RiskLine2 | RiskLine2>RiskLine3 | RiskLine3>RiskLine4 | RiskLine4>RiskLine5 | RiskLine5>RiskLine6
{txt}(0 real changes made)

{com}. replace nonmonr = 1 if RiskLine6>RiskLine7 | RiskLine7>RiskLine8 | RiskLine8>RiskLine9 | RiskLine9>RiskLine10 | RiskLine10>RiskLine11
{txt}(40 real changes made)

{com}. replace nonmonr = 1 if RiskLine11>RiskLine12 | RiskLine12>RiskLine13 | RiskLine13>RiskLine14 | RiskLine14>RiskLine15 | RiskLine15>RiskLine16
{txt}(40 real changes made)

{com}. replace nonmonr = 1 if RiskLine16>RiskLine17 | RiskLine17>RiskLine18 | RiskLine18>RiskLine19 | RiskLine19>RiskLine20
{txt}(0 real changes made)

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. *Adding detailed Risk Prefrences 
. do mergeriskpref.do
{txt}
{com}. clear
{txt}
{com}. *session 1
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session1_Lottery_75_25_Friday_04_08_11_30.dta"
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session1.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session1.dta{rm}
saved
{p_end}

{com}. 
. *session2
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(1,008 observations deleted)

{com}. drop if LossLine1==. 
{txt}(24 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session2.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session2.dta{rm}
saved
{p_end}

{com}. 
. *session3
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(336 observations deleted)

{com}. drop if LossLine1==. 
{txt}(8 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session3.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session3.dta{rm}
saved
{p_end}

{com}. 
. *session4
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session4_Lottery_25_75_Saturday_04_09_1_15.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session4.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session4.dta{rm}
saved
{p_end}

{com}. 
. *session5
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session5_Lottery_25_75_Saturday_04_09_3_30.dta" 
{txt}
{com}. 
. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session5.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session5.dta{rm}
saved
{p_end}

{com}. 
. *session6
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session6_Lottery_75_25_Sunday_04_10_11_30.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session6.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session6.dta{rm}
saved
{p_end}

{com}. 
. *session7
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session7_AllPay_25_75_Sunday_04_10_1_45.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session7.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session7.dta{rm}
saved
{p_end}

{com}. 
. *session8
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session8_AllPay_25_75_Sunday_04_10_4_00.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session8.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session8.dta{rm}
saved
{p_end}

{com}. 
. **Merging with main Ds
. 
. *.do file that came with dataset
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas
{txt}
{com}. 
. merge m:1 session Subject using Session1.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session2.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKProfitIfTwoStagesOK} was {bf:byte}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:EarningsPayingPeriod2} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:TotalEarnings34} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,160
{txt}{col 9}from master{col 30}{res}           4,160{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             960{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session3.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,800
{txt}{col 9}from master{col 30}{res}           4,800{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             320{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session4.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session5.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKRiskAversionScreenOK} was {bf:byte}, now {bf:int} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session6.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session7.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session8.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. 
. 
. 
. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
. *label changes
. label var xjow "Joy of winning"
{txt}
{com}. label var alpha "$\alpha$"
{txt}
{com}. label var risk "Risk aversion"
{txt}
{com}. label var loss "Loss aversion"
{txt}
{com}. *label var LossLineSwitchToB "Loss aversion"
. label var inv "$1/Period$"
{txt}
{com}. 
. *generate sd,median variables
. gen x_sd=x
{txt}
{com}. gen x_med=x
{txt}
{com}. 
. *alpha .75 dummy variable 
. gen dalpha=0
{txt}
{com}. replace dalpha=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. 
. gen reduce=0
{txt}
{com}. replace reduce=1 if Type==1 & x12hat<x1hat
{txt}(1,065 real changes made)

{com}. 
. gen raise=0
{txt}
{com}. replace raise=1 if Type==1 & x12hat>x1hat
{txt}(965 real changes made)

{com}. 
. gen rationalrev=0
{txt}
{com}. replace rationalrev=1 if x1hat~=br1
{txt}(4,999 real changes made)

{com}. *replace rationalrev=1 if x2hat & lottery==1
. 
. gen overbid=1
{txt}
{com}. replace overbid=0 if x1hat<=br1  
{txt}(1,541 real changes made)

{com}. 
. gen underbid=0
{txt}
{com}. replace underbid=1 if x1hat<br1 
{txt}(1,420 real changes made)

{com}. 
. gen ahead=0
{txt}
{com}. replace ahead=1 if x1hat>x2hat
{txt}(2,544 real changes made)

{com}. 
. gen onedisttoother=x1hat-x2hat
{txt}
{com}. gen twodisttoother=x12hat-x2hat
{txt}
{com}. 
. gen irr_nochange=0 
{txt}
{com}. replace irr_nochange=1 if changehat==0 & rationalrev==1
{txt}(956 real changes made)

{com}. 
. gen irr_rev_dec=0
{txt}
{com}. replace irr_rev_dec=1 if irr_nochange==1
{txt}(956 real changes made)

{com}. replace irr_rev_dec=1 if changehat==1 & x1hat==br1
{txt}(17 real changes made)

{com}. 
. label var rationalrev "Revising is rational"
{txt}
{com}. label var changehat "Subject revised"
{txt}
{com}. label var irr_nochange "No change even though was rational"
{txt}
{com}. 
. ** Non-monotonic risk preferences
. 
. gen nonmonr= 0
{txt}
{com}. replace nonmonr = 1 if RiskLine1>RiskLine2 | RiskLine2>RiskLine3 | RiskLine3>RiskLine4 | RiskLine4>RiskLine5 | RiskLine5>RiskLine6
{txt}(0 real changes made)

{com}. replace nonmonr = 1 if RiskLine6>RiskLine7 | RiskLine7>RiskLine8 | RiskLine8>RiskLine9 | RiskLine9>RiskLine10 | RiskLine10>RiskLine11
{txt}(40 real changes made)

{com}. replace nonmonr = 1 if RiskLine11>RiskLine12 | RiskLine12>RiskLine13 | RiskLine13>RiskLine14 | RiskLine14>RiskLine15 | RiskLine15>RiskLine16
{txt}(40 real changes made)

{com}. replace nonmonr = 1 if RiskLine16>RiskLine17 | RiskLine17>RiskLine18 | RiskLine18>RiskLine19 | RiskLine19>RiskLine20
{txt}(0 real changes made)

{com}. 
. **Table 2
. keep if Type ==2
{txt}(2,560 observations deleted)

{com}. 
. reg x1hat nonmonr if lottery == 0
{txt}{p 0 6 2}note: {bf:nonmonr} omitted because of collinearity.{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(0, 1279)      = {res}     0.00
{txt}       Model {c |} {res}          0         0           .   {txt}Prob > F        ={res}         .
{txt}    Residual {c |} {res} 1307062.15     1,279  1021.94069   {txt}R-squared       ={res}    0.0000
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0000
{txt}       Total {c |} {res} 1307062.15     1,279  1021.94069   {txt}Root MSE        =   {res} 31.968

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       x1hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 7}_cons {c |}{col 14}{res}{space 2} 36.71491{col 26}{space 2} .8935274{col 37}{space 1}   41.09{col 46}{space 3}0.000{col 54}{space 4} 34.96197{col 67}{space 3} 38.46785
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, replace ctitle(x1hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. reg x2hat nonmonr if lottery == 0
{txt}{p 0 6 2}note: {bf:nonmonr} omitted because of collinearity.{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(0, 1279)      = {res}     0.00
{txt}       Model {c |} {res}          0         0           .   {txt}Prob > F        ={res}         .
{txt}    Residual {c |} {res} 1776929.64     1,279  1389.31168   {txt}R-squared       ={res}    0.0000
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0000
{txt}       Total {c |} {res} 1776929.64     1,279  1389.31168   {txt}Root MSE        =   {res} 37.273

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       x2hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 7}_cons {c |}{col 14}{res}{space 2} 36.21762{col 26}{space 2} 1.041825{col 37}{space 1}   34.76{col 46}{space 3}0.000{col 54}{space 4} 34.17375{col 67}{space 3}  38.2615
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x2hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. reg x12hat nonmonr if lottery == 0
{txt}{p 0 6 2}note: {bf:nonmonr} omitted because of collinearity.{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(0, 1279)      = {res}     0.00
{txt}       Model {c |} {res}          0         0           .   {txt}Prob > F        ={res}         .
{txt}    Residual {c |} {res} 1500173.37     1,279  1172.92679   {txt}R-squared       ={res}    0.0000
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0000
{txt}       Total {c |} {res} 1500173.37     1,279  1172.92679   {txt}Root MSE        =   {res} 34.248

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 7}_cons {c |}{col 14}{res}{space 2} 32.45077{col 26}{space 2} .9572612{col 37}{space 1}   33.90{col 46}{space 3}0.000{col 54}{space 4} 30.57279{col 67}{space 3} 34.32874
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x12hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. 
. 
. 
. reg x1hat nonmonr if lottery == 1

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(1, 1278)      = {res}     0.25
{txt}       Model {c |} {res}  261.62115         1   261.62115   {txt}Prob > F        ={res}    0.6176
{txt}    Residual {c |} {res} 1340392.52     1,278  1048.82044   {txt}R-squared       ={res}    0.0002
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}   -0.0006
{txt}       Total {c |} {res} 1340654.14     1,279  1048.20496   {txt}Root MSE        =   {res} 32.385

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       x1hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2} 2.537794{col 26}{space 2}  5.08125{col 37}{space 1}    0.50{col 46}{space 3}0.618{col 54}{space 4}-7.430714{col 67}{space 3}  12.5063
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 43.15268{col 26}{space 2} .9204289{col 37}{space 1}   46.88{col 46}{space 3}0.000{col 54}{space 4} 41.34696{col 67}{space 3}  44.9584
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x1hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. reg x2hat nonmonr if lottery == 1

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(1, 1278)      = {res}     5.47
{txt}       Model {c |} {res} 6512.79552         1  6512.79552   {txt}Prob > F        ={res}    0.0196
{txt}    Residual {c |} {res} 1523017.59     1,278  1191.71955   {txt}R-squared       ={res}    0.0043
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0035
{txt}       Total {c |} {res} 1529530.38     1,279  1195.87989   {txt}Root MSE        =   {res} 34.521

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       x2hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2} 12.66204{col 26}{space 2} 5.416354{col 37}{space 1}    2.34{col 46}{space 3}0.020{col 54}{space 4} 2.036119{col 67}{space 3} 23.28796
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 44.71034{col 26}{space 2} .9811303{col 37}{space 1}   45.57{col 46}{space 3}0.000{col 54}{space 4} 42.78554{col 67}{space 3} 46.63514
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x2hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. reg x12hat nonmonr if lottery == 1

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(1, 1278)      = {res}     1.20
{txt}       Model {c |} {res} 1462.87035         1  1462.87035   {txt}Prob > F        ={res}    0.2745
{txt}    Residual {c |} {res} 1564018.95     1,278    1223.802   {txt}R-squared       ={res}    0.0009
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0002
{txt}       Total {c |} {res} 1565481.82     1,279  1223.98891   {txt}Root MSE        =   {res} 34.983

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2} -6.00099{col 26}{space 2} 5.488777{col 37}{space 1}   -1.09{col 46}{space 3}0.274{col 54}{space 4}-16.76899{col 67}{space 3} 4.767013
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 44.19218{col 26}{space 2} .9942492{col 37}{space 1}   44.45{col 46}{space 3}0.000{col 54}{space 4} 42.24164{col 67}{space 3} 46.14272
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x12hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. 
. 
. gen Risklott = RiskLineSwitchToB*lottery
{txt}
{com}. 
. 
. **** Table 3 ***
. 
. 
. drop if nonmonr==1
{txt}(42 observations deleted)

{com}. 
. reg x2hat RiskLineSwitchToB if alpha==0.25 , robust

{txt}Linear regression                               Number of obs     = {res}     1,253
                                                {txt}F(1, 1251)        =  {res}     0.60
                                                {txt}Prob > F          = {res}    0.4375
                                                {txt}R-squared         = {res}    0.0005
                                                {txt}Root MSE          =    {res} 34.819

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}       x2hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSw~B {c |}{col 14}{res}{space 2}-.2038202{col 26}{space 2} .2624489{col 37}{space 1}   -0.78{col 46}{space 3}0.438{col 54}{space 4}-.7187088{col 67}{space 3} .3110683
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 44.45417{col 26}{space 2} 2.764911{col 37}{space 1}   16.08{col 46}{space 3}0.000{col 54}{space 4}  39.0298{col 67}{space 3} 49.87855
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table3.doc, replace  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. reg x2hat RiskLineSwitchToB lottery Risklott if alpha==0.25 , robust

{txt}Linear regression                               Number of obs     = {res}     1,253
                                                {txt}F(3, 1249)        =  {res}     2.25
                                                {txt}Prob > F          = {res}    0.0809
                                                {txt}R-squared         = {res}    0.0055
                                                {txt}Root MSE          =    {res}  34.76

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}       x2hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSw~B {c |}{col 14}{res}{space 2} .3219279{col 26}{space 2} .3729486{col 37}{space 1}    0.86{col 46}{space 3}0.388{col 54}{space 4}-.4097469{col 67}{space 3} 1.053603
{txt}{space 5}lottery {c |}{col 14}{res}{space 2}  12.1291{col 26}{space 2} 5.463755{col 37}{space 1}    2.22{col 46}{space 3}0.027{col 54}{space 4} 1.409948{col 67}{space 3} 22.84825
{txt}{space 4}Risklott {c |}{col 14}{res}{space 2}-.8562261{col 26}{space 2} .5189698{col 37}{space 1}   -1.65{col 46}{space 3}0.099{col 54}{space 4}-1.874375{col 67}{space 3} .1619227
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 37.25637{col 26}{space 2} 4.069314{col 37}{space 1}    9.16{col 46}{space 3}0.000{col 54}{space 4} 29.27293{col 67}{space 3} 45.23982
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. xtreg x2hat RiskLineSwitchToB lottery Risklott if alpha==0.25,  i(subjectid) robust
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,253
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}       126

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0000                                         {txt}min = {res}         4
{txt}     Between = {res}0.0090                                         {txt}avg = {res}       9.9
{txt}     Overall = {res}0.0052                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}3{txt})      =  {res}     0.97
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.8079

{txt}{ralign 78:(Std. err. adjusted for {res:126} clusters in subjectid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}       x2hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSw~B {c |}{col 14}{res}{space 2} .5034049{col 26}{space 2} .8555426{col 37}{space 1}    0.59{col 46}{space 3}0.556{col 54}{space 4}-1.173428{col 67}{space 3} 2.180238
{txt}{space 5}lottery {c |}{col 14}{res}{space 2} 12.52335{col 26}{space 2} 13.68955{col 37}{space 1}    0.91{col 46}{space 3}0.360{col 54}{space 4}-14.30767{col 67}{space 3} 39.35437
{txt}{space 4}Risklott {c |}{col 14}{res}{space 2}-.9656557{col 26}{space 2} 1.292503{col 37}{space 1}   -0.75{col 46}{space 3}0.455{col 54}{space 4}-3.498915{col 67}{space 3} 1.567604
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 35.40094{col 26}{space 2} 9.403585{col 37}{space 1}    3.76{col 46}{space 3}0.000{col 54}{space 4} 16.97025{col 67}{space 3} 53.83163
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 23.749987
     {txt}sigma_e {c |} {res} 25.766571
         {txt}rho {c |} {res} .45934198{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. 
. reg x2hat RiskLineSwitchToB if alpha==0.75 , robust

{txt}Linear regression                               Number of obs     = {res}     1,265
                                                {txt}F(1, 1263)        =  {res}     0.02
                                                {txt}Prob > F          = {res}    0.8750
                                                {txt}R-squared         = {res}    0.0000
                                                {txt}Root MSE          =    {res} 37.107

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}       x2hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSw~B {c |}{col 14}{res}{space 2} -.044896{col 26}{space 2} .2854522{col 37}{space 1}   -0.16{col 46}{space 3}0.875{col 54}{space 4}-.6049087{col 67}{space 3} .5151166
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 38.79294{col 26}{space 2}  3.00001{col 37}{space 1}   12.93{col 46}{space 3}0.000{col 54}{space 4} 32.90739{col 67}{space 3} 44.67849
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. reg x2hat RiskLineSwitchToB lottery Risklott if alpha==0.75 , robust

{txt}Linear regression                               Number of obs     = {res}     1,265
                                                {txt}F(3, 1261)        =  {res}    16.14
                                                {txt}Prob > F          = {res}    0.0000
                                                {txt}R-squared         = {res}    0.0349
                                                {txt}Root MSE          =    {res} 36.483

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}       x2hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSw~B {c |}{col 14}{res}{space 2} .8120705{col 26}{space 2} .4087387{col 37}{space 1}    1.99{col 46}{space 3}0.047{col 54}{space 4} .0101876{col 67}{space 3} 1.613953
{txt}{space 5}lottery {c |}{col 14}{res}{space 2}  25.5196{col 26}{space 2} 5.756568{col 37}{space 1}    4.43{col 46}{space 3}0.000{col 54}{space 4} 14.22609{col 67}{space 3}  36.8131
{txt}{space 4}Risklott {c |}{col 14}{res}{space 2} -1.22823{col 26}{space 2} .5481163{col 37}{space 1}   -2.24{col 46}{space 3}0.025{col 54}{space 4}-2.303551{col 67}{space 3}-.1529098
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 23.46183{col 26}{space 2} 4.345201{col 37}{space 1}    5.40{col 46}{space 3}0.000{col 54}{space 4} 14.93721{col 67}{space 3} 31.98645
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. xtreg x2hat RiskLineSwitchToB lottery Risklott if alpha==0.75,  i(subjectid) robust
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,265
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}       126

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0000                                         {txt}min = {res}         3
{txt}     Between = {res}0.0740                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.0347                                         {txt}max = {res}        17

                                                {txt}Wald chi2({res}3{txt})      =  {res}    11.49
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0093

{txt}{ralign 78:(Std. err. adjusted for {res:126} clusters in subjectid)}
{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}       x2hat{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSw~B {c |}{col 14}{res}{space 2} .6027904{col 26}{space 2} .8023525{col 37}{space 1}    0.75{col 46}{space 3}0.452{col 54}{space 4}-.9697917{col 67}{space 3} 2.175372
{txt}{space 5}lottery {c |}{col 14}{res}{space 2} 23.41448{col 26}{space 2} 11.54361{col 37}{space 1}    2.03{col 46}{space 3}0.043{col 54}{space 4}  .789428{col 67}{space 3} 46.03953
{txt}{space 4}Risklott {c |}{col 14}{res}{space 2}-.9635101{col 26}{space 2} 1.159676{col 37}{space 1}   -0.83{col 46}{space 3}0.406{col 54}{space 4}-3.236433{col 67}{space 3} 1.309413
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 25.53502{col 26}{space 2}  7.95289{col 37}{space 1}    3.21{col 46}{space 3}0.001{col 54}{space 4} 9.947646{col 67}{space 3}  41.1224
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
     sigma_u {c |} {res} 24.070737
     {txt}sigma_e {c |} {res} 27.378464
         {txt}rho {c |} {res} .43597352{txt}   (fraction of variance due to u_i)
{hline 13}{c BT}{hline 64}

{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. *Adding detailed Risk Prefrences 
. do mergeriskpref.do
{txt}
{com}. clear
{txt}
{com}. *session 1
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session1_Lottery_75_25_Friday_04_08_11_30.dta"
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session1.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session1.dta{rm}
saved
{p_end}

{com}. 
. *session2
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(1,008 observations deleted)

{com}. drop if LossLine1==. 
{txt}(24 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session2.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session2.dta{rm}
saved
{p_end}

{com}. 
. *session3
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(336 observations deleted)

{com}. drop if LossLine1==. 
{txt}(8 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session3.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session3.dta{rm}
saved
{p_end}

{com}. 
. *session4
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session4_Lottery_25_75_Saturday_04_09_1_15.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session4.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session4.dta{rm}
saved
{p_end}

{com}. 
. *session5
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session5_Lottery_25_75_Saturday_04_09_3_30.dta" 
{txt}
{com}. 
. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session5.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session5.dta{rm}
saved
{p_end}

{com}. 
. *session6
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session6_Lottery_75_25_Sunday_04_10_11_30.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session6.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session6.dta{rm}
saved
{p_end}

{com}. 
. *session7
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session7_AllPay_25_75_Sunday_04_10_1_45.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session7.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session7.dta{rm}
saved
{p_end}

{com}. 
. *session8
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session8_AllPay_25_75_Sunday_04_10_4_00.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session8.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session8.dta{rm}
saved
{p_end}

{com}. 
. **Merging with main Ds
. 
. *.do file that came with dataset
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(6 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(4 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas
{txt}
{com}. 
. merge m:1 session Subject using Session1.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session2.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKProfitIfTwoStagesOK} was {bf:byte}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:EarningsPayingPeriod2} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:TotalEarnings34} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,160
{txt}{col 9}from master{col 30}{res}           4,160{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             960{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session3.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,800
{txt}{col 9}from master{col 30}{res}           4,800{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             320{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session4.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session5.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKRiskAversionScreenOK} was {bf:byte}, now {bf:int} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session6.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session7.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session8.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. 
. 
. 
. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
. *label changes
. label var xjow "Joy of winning"
{txt}
{com}. label var alpha "$\alpha$"
{txt}
{com}. label var risk "Risk aversion"
{txt}
{com}. label var loss "Loss aversion"
{txt}
{com}. *label var LossLineSwitchToB "Loss aversion"
. label var inv "$1/Period$"
{txt}
{com}. 
. *generate sd,median variables
. gen x_sd=x
{txt}
{com}. gen x_med=x
{txt}
{com}. 
. *alpha .75 dummy variable 
. gen dalpha=0
{txt}
{com}. replace dalpha=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. 
. gen reduce=0
{txt}
{com}. replace reduce=1 if Type==1 & x12hat<x1hat
{txt}(1,065 real changes made)

{com}. 
. gen raise=0
{txt}
{com}. replace raise=1 if Type==1 & x12hat>x1hat
{txt}(965 real changes made)

{com}. 
. gen rationalrev=0
{txt}
{com}. replace rationalrev=1 if x1hat~=br1
{txt}(5,000 real changes made)

{com}. *replace rationalrev=1 if x2hat & lottery==1
. 
. gen overbid=1
{txt}
{com}. replace overbid=0 if x1hat<=br1  
{txt}(1,540 real changes made)

{com}. 
. gen underbid=0
{txt}
{com}. replace underbid=1 if x1hat<br1 
{txt}(1,420 real changes made)

{com}. 
. gen ahead=0
{txt}
{com}. replace ahead=1 if x1hat>x2hat
{txt}(2,544 real changes made)

{com}. 
. gen onedisttoother=x1hat-x2hat
{txt}
{com}. gen twodisttoother=x12hat-x2hat
{txt}
{com}. 
. gen irr_nochange=0 
{txt}
{com}. replace irr_nochange=1 if changehat==0 & rationalrev==1
{txt}(956 real changes made)

{com}. 
. gen irr_rev_dec=0
{txt}
{com}. replace irr_rev_dec=1 if irr_nochange==1
{txt}(956 real changes made)

{com}. replace irr_rev_dec=1 if changehat==1 & x1hat==br1
{txt}(16 real changes made)

{com}. 
. label var rationalrev "Revising is rational"
{txt}
{com}. label var changehat "Subject revised"
{txt}
{com}. label var irr_nochange "No change even though was rational"
{txt}
{com}. 
. ** Non-monotonic risk preferences
. 
. gen nonmonr= 0
{txt}
{com}. replace nonmonr = 1 if RiskLine1>RiskLine2 | RiskLine2>RiskLine3 | RiskLine3>RiskLine4 | RiskLine4>RiskLine5 | RiskLine5>RiskLine6
{txt}(0 real changes made)

{com}. replace nonmonr = 1 if RiskLine6>RiskLine7 | RiskLine7>RiskLine8 | RiskLine8>RiskLine9 | RiskLine9>RiskLine10 | RiskLine10>RiskLine11
{txt}(40 real changes made)

{com}. replace nonmonr = 1 if RiskLine11>RiskLine12 | RiskLine12>RiskLine13 | RiskLine13>RiskLine14 | RiskLine14>RiskLine15 | RiskLine15>RiskLine16
{txt}(40 real changes made)

{com}. replace nonmonr = 1 if RiskLine16>RiskLine17 | RiskLine17>RiskLine18 | RiskLine18>RiskLine19 | RiskLine19>RiskLine20
{txt}(0 real changes made)

{com}. 
. **Table 2
. keep if Type ==2
{txt}(2,560 observations deleted)

{com}. 
. reg x1hat nonmonr if lottery == 0
{txt}{p 0 6 2}note: {bf:nonmonr} omitted because of collinearity.{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(0, 1279)      = {res}     0.00
{txt}       Model {c |} {res}          0         0           .   {txt}Prob > F        ={res}         .
{txt}    Residual {c |} {res} 1307062.15     1,279  1021.94069   {txt}R-squared       ={res}    0.0000
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0000
{txt}       Total {c |} {res} 1307062.15     1,279  1021.94069   {txt}Root MSE        =   {res} 31.968

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       x1hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 7}_cons {c |}{col 14}{res}{space 2} 36.71491{col 26}{space 2} .8935274{col 37}{space 1}   41.09{col 46}{space 3}0.000{col 54}{space 4} 34.96197{col 67}{space 3} 38.46785
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, replace ctitle(x1hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. reg x2hat nonmonr if lottery == 0
{txt}{p 0 6 2}note: {bf:nonmonr} omitted because of collinearity.{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(0, 1279)      = {res}     0.00
{txt}       Model {c |} {res}          0         0           .   {txt}Prob > F        ={res}         .
{txt}    Residual {c |} {res} 1776929.64     1,279  1389.31168   {txt}R-squared       ={res}    0.0000
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0000
{txt}       Total {c |} {res} 1776929.64     1,279  1389.31168   {txt}Root MSE        =   {res} 37.273

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       x2hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 7}_cons {c |}{col 14}{res}{space 2} 36.21762{col 26}{space 2} 1.041825{col 37}{space 1}   34.76{col 46}{space 3}0.000{col 54}{space 4} 34.17375{col 67}{space 3}  38.2615
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x2hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. reg x12hat nonmonr if lottery == 0
{txt}{p 0 6 2}note: {bf:nonmonr} omitted because of collinearity.{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(0, 1279)      = {res}     0.00
{txt}       Model {c |} {res}          0         0           .   {txt}Prob > F        ={res}         .
{txt}    Residual {c |} {res} 1500173.37     1,279  1172.92679   {txt}R-squared       ={res}    0.0000
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0000
{txt}       Total {c |} {res} 1500173.37     1,279  1172.92679   {txt}Root MSE        =   {res} 34.248

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 7}_cons {c |}{col 14}{res}{space 2} 32.45077{col 26}{space 2} .9572612{col 37}{space 1}   33.90{col 46}{space 3}0.000{col 54}{space 4} 30.57279{col 67}{space 3} 34.32874
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x12hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. 
. 
. 
. reg x1hat nonmonr if lottery == 1

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(1, 1278)      = {res}     0.25
{txt}       Model {c |} {res}  261.62115         1   261.62115   {txt}Prob > F        ={res}    0.6176
{txt}    Residual {c |} {res} 1340392.52     1,278  1048.82044   {txt}R-squared       ={res}    0.0002
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}   -0.0006
{txt}       Total {c |} {res} 1340654.14     1,279  1048.20496   {txt}Root MSE        =   {res} 32.385

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       x1hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2} 2.537794{col 26}{space 2}  5.08125{col 37}{space 1}    0.50{col 46}{space 3}0.618{col 54}{space 4}-7.430714{col 67}{space 3}  12.5063
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 43.15268{col 26}{space 2} .9204289{col 37}{space 1}   46.88{col 46}{space 3}0.000{col 54}{space 4} 41.34696{col 67}{space 3}  44.9584
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x1hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. reg x2hat nonmonr if lottery == 1

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(1, 1278)      = {res}     5.47
{txt}       Model {c |} {res} 6512.79552         1  6512.79552   {txt}Prob > F        ={res}    0.0196
{txt}    Residual {c |} {res} 1523017.59     1,278  1191.71955   {txt}R-squared       ={res}    0.0043
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0035
{txt}       Total {c |} {res} 1529530.38     1,279  1195.87989   {txt}Root MSE        =   {res} 34.521

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       x2hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2} 12.66204{col 26}{space 2} 5.416354{col 37}{space 1}    2.34{col 46}{space 3}0.020{col 54}{space 4} 2.036119{col 67}{space 3} 23.28796
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 44.71034{col 26}{space 2} .9811303{col 37}{space 1}   45.57{col 46}{space 3}0.000{col 54}{space 4} 42.78554{col 67}{space 3} 46.63514
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x2hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. reg x12hat nonmonr if lottery == 1

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(1, 1278)      = {res}     1.20
{txt}       Model {c |} {res} 1462.87035         1  1462.87035   {txt}Prob > F        ={res}    0.2745
{txt}    Residual {c |} {res} 1564018.95     1,278    1223.802   {txt}R-squared       ={res}    0.0009
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0002
{txt}       Total {c |} {res} 1565481.82     1,279  1223.98891   {txt}Root MSE        =   {res} 34.983

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2} -6.00099{col 26}{space 2} 5.488777{col 37}{space 1}   -1.09{col 46}{space 3}0.274{col 54}{space 4}-16.76899{col 67}{space 3} 4.767013
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 44.19218{col 26}{space 2} .9942492{col 37}{space 1}   44.45{col 46}{space 3}0.000{col 54}{space 4} 42.24164{col 67}{space 3} 46.14272
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x12hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. 
. 
. gen Risklott = RiskLineSwitchToB*lottery
{txt}
{com}. 
. 
. **** Table 3 ***
. 
. 
. drop if nonmonr==1
{txt}(42 observations deleted)

{com}. 
. reg x2hat RiskLineSwitchToB if alpha==0.25 , robust

{txt}Linear regression                               Number of obs     = {res}     1,253
                                                {txt}F(1, 1251)        =  {res}     0.60
                                                {txt}Prob > F          = {res}    0.4375
                                                {txt}R-squared         = {res}    0.0005
                                                {txt}Root MSE          =    {res} 34.819

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      t{col 51}   P>|t|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2}-.2038202{col 31}{space 2} .2624489{col 42}{space 1}   -0.78{col 51}{space 3}0.438{col 59}{space 4}-.7187088{col 72}{space 3} .3110683
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 44.45417{col 31}{space 2} 2.764911{col 42}{space 1}   16.08{col 51}{space 3}0.000{col 59}{space 4}  39.0298{col 72}{space 3} 49.87855
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table3.doc, replace  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. reg x2hat RiskLineSwitchToB lottery Risklott if alpha==0.25 , robust

{txt}Linear regression                               Number of obs     = {res}     1,253
                                                {txt}F(3, 1249)        =  {res}     2.25
                                                {txt}Prob > F          = {res}    0.0809
                                                {txt}R-squared         = {res}    0.0055
                                                {txt}Root MSE          =    {res}  34.76

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      t{col 51}   P>|t|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2} .3219279{col 31}{space 2} .3729486{col 42}{space 1}    0.86{col 51}{space 3}0.388{col 59}{space 4}-.4097469{col 72}{space 3} 1.053603
{txt}{space 10}lottery {c |}{col 19}{res}{space 2}  12.1291{col 31}{space 2} 5.463755{col 42}{space 1}    2.22{col 51}{space 3}0.027{col 59}{space 4} 1.409948{col 72}{space 3} 22.84825
{txt}{space 9}Risklott {c |}{col 19}{res}{space 2}-.8562261{col 31}{space 2} .5189698{col 42}{space 1}   -1.65{col 51}{space 3}0.099{col 59}{space 4}-1.874375{col 72}{space 3} .1619227
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 37.25637{col 31}{space 2} 4.069314{col 42}{space 1}    9.16{col 51}{space 3}0.000{col 59}{space 4} 29.27293{col 72}{space 3} 45.23982
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. xtreg x2hat RiskLineSwitchToB lottery Risklott if alpha==0.25,  i(subjectid) robust
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,253
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}       126

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0000                                         {txt}min = {res}         4
{txt}     Between = {res}0.0090                                         {txt}avg = {res}       9.9
{txt}     Overall = {res}0.0052                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}3{txt})      =  {res}     0.97
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.8079

{txt}{ralign 83:(Std. err. adjusted for {res:126} clusters in subjectid)}
{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2} .5034049{col 31}{space 2} .8555426{col 42}{space 1}    0.59{col 51}{space 3}0.556{col 59}{space 4}-1.173428{col 72}{space 3} 2.180238
{txt}{space 10}lottery {c |}{col 19}{res}{space 2} 12.52335{col 31}{space 2} 13.68955{col 42}{space 1}    0.91{col 51}{space 3}0.360{col 59}{space 4}-14.30767{col 72}{space 3} 39.35437
{txt}{space 9}Risklott {c |}{col 19}{res}{space 2}-.9656557{col 31}{space 2} 1.292503{col 42}{space 1}   -0.75{col 51}{space 3}0.455{col 59}{space 4}-3.498915{col 72}{space 3} 1.567604
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 35.40094{col 31}{space 2} 9.403585{col 42}{space 1}    3.76{col 51}{space 3}0.000{col 59}{space 4} 16.97025{col 72}{space 3} 53.83163
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
          sigma_u {c |} {res} 23.749987
          {txt}sigma_e {c |} {res} 25.766571
              {txt}rho {c |} {res} .45934198{txt}   (fraction of variance due to u_i)
{hline 18}{c BT}{hline 64}

{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. 
. reg x2hat RiskLineSwitchToB if alpha==0.75 , robust

{txt}Linear regression                               Number of obs     = {res}     1,265
                                                {txt}F(1, 1263)        =  {res}     0.02
                                                {txt}Prob > F          = {res}    0.8750
                                                {txt}R-squared         = {res}    0.0000
                                                {txt}Root MSE          =    {res} 37.107

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      t{col 51}   P>|t|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2} -.044896{col 31}{space 2} .2854522{col 42}{space 1}   -0.16{col 51}{space 3}0.875{col 59}{space 4}-.6049087{col 72}{space 3} .5151166
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 38.79294{col 31}{space 2}  3.00001{col 42}{space 1}   12.93{col 51}{space 3}0.000{col 59}{space 4} 32.90739{col 72}{space 3} 44.67849
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. reg x2hat RiskLineSwitchToB lottery Risklott if alpha==0.75 , robust

{txt}Linear regression                               Number of obs     = {res}     1,265
                                                {txt}F(3, 1261)        =  {res}    16.14
                                                {txt}Prob > F          = {res}    0.0000
                                                {txt}R-squared         = {res}    0.0349
                                                {txt}Root MSE          =    {res} 36.483

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      t{col 51}   P>|t|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2} .8120705{col 31}{space 2} .4087387{col 42}{space 1}    1.99{col 51}{space 3}0.047{col 59}{space 4} .0101876{col 72}{space 3} 1.613953
{txt}{space 10}lottery {c |}{col 19}{res}{space 2}  25.5196{col 31}{space 2} 5.756568{col 42}{space 1}    4.43{col 51}{space 3}0.000{col 59}{space 4} 14.22609{col 72}{space 3}  36.8131
{txt}{space 9}Risklott {c |}{col 19}{res}{space 2} -1.22823{col 31}{space 2} .5481163{col 42}{space 1}   -2.24{col 51}{space 3}0.025{col 59}{space 4}-2.303551{col 72}{space 3}-.1529098
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 23.46183{col 31}{space 2} 4.345201{col 42}{space 1}    5.40{col 51}{space 3}0.000{col 59}{space 4} 14.93721{col 72}{space 3} 31.98645
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. xtreg x2hat RiskLineSwitchToB lottery Risklott if alpha==0.75,  i(subjectid) robust
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,265
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}       126

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0000                                         {txt}min = {res}         3
{txt}     Between = {res}0.0740                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.0347                                         {txt}max = {res}        17

                                                {txt}Wald chi2({res}3{txt})      =  {res}    11.49
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0093

{txt}{ralign 83:(Std. err. adjusted for {res:126} clusters in subjectid)}
{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2} .6027904{col 31}{space 2} .8023525{col 42}{space 1}    0.75{col 51}{space 3}0.452{col 59}{space 4}-.9697917{col 72}{space 3} 2.175372
{txt}{space 10}lottery {c |}{col 19}{res}{space 2} 23.41448{col 31}{space 2} 11.54361{col 42}{space 1}    2.03{col 51}{space 3}0.043{col 59}{space 4}  .789428{col 72}{space 3} 46.03953
{txt}{space 9}Risklott {c |}{col 19}{res}{space 2}-.9635101{col 31}{space 2} 1.159676{col 42}{space 1}   -0.83{col 51}{space 3}0.406{col 59}{space 4}-3.236433{col 72}{space 3} 1.309413
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 25.53502{col 31}{space 2}  7.95289{col 42}{space 1}    3.21{col 51}{space 3}0.001{col 59}{space 4} 9.947646{col 72}{space 3}  41.1224
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
          sigma_u {c |} {res} 24.070737
          {txt}sigma_e {c |} {res} 27.378464
              {txt}rho {c |} {res} .43597352{txt}   (fraction of variance due to u_i)
{hline 18}{c BT}{hline 64}

{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. 
{txt}end of do-file

{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. do mergeriskpref.do
{txt}
{com}. clear
{txt}
{com}. *session 1
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session1_Lottery_75_25_Friday_04_08_11_30.dta"
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session1.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session1.dta{rm}
saved
{p_end}

{com}. 
. *session2
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session2_AllPay_75_25_Friday_04_08_4_30.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(1,008 observations deleted)

{com}. drop if LossLine1==. 
{txt}(24 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session2.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session2.dta{rm}
saved
{p_end}

{com}. 
. *session3
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session3_AllPay_75_25_Saturday_04_09_11_00.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(336 observations deleted)

{com}. drop if LossLine1==. 
{txt}(8 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session3.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session3.dta{rm}
saved
{p_end}

{com}. 
. *session4
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session4_Lottery_25_75_Saturday_04_09_1_15.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session4.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session4.dta{rm}
saved
{p_end}

{com}. 
. *session5
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session5_Lottery_25_75_Saturday_04_09_3_30.dta" 
{txt}
{com}. 
. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session5.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session5.dta{rm}
saved
{p_end}

{com}. 
. *session6
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session6_Lottery_75_25_Sunday_04_10_11_30.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session6.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session6.dta{rm}
saved
{p_end}

{com}. 
. *session7
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session7_AllPay_25_75_Sunday_04_10_1_45.dta" 
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session7.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session7.dta{rm}
saved
{p_end}

{com}. 
. *session8
. use "Contests with Revisions Replication files\Semi Cleaned Up Datasets\Session8_AllPay_25_75_Sunday_04_10_4_00.dta"  
{txt}
{com}. 
. drop if RiskLine1==. 
{txt}(672 observations deleted)

{com}. drop if LossLine1==. 
{txt}(16 observations deleted)

{com}. drop treatment Group Profit TotalProfit Participate Period
{txt}
{com}. 
. save "Contests with Revisions Replication files\RiskPrefdtas\Session8.dta", replace
{txt}{p 0 4 2}
file {bf}
Contests with Revisions Replication files\RiskPrefdtas\Session8.dta{rm}
saved
{p_end}

{com}. 
. **Merging with main Ds
. 
. *.do file that came with dataset
. do "Contests with Revisions Replication files\Stata do files\var_definitions.do"
{txt}
{com}. clear
{txt}
{com}. 
. *load dataset
. use "Contests with Revisions Replication files\Stata dataset to use for analysis\revisionscontestdata.dta"
{txt}
{com}. 
. gen typea=1 if Type==1
{txt}(2,936 missing values generated)

{com}. replace typea=0 if Type==2
{txt}(2,680 real changes made)

{com}. 
. drop if alpha==.
{txt}(384 observations deleted)

{com}. 
. 
. *format payoff1 payoff2 x x1hat x2hat x12hat %9.2f
. 
. *Create contest treatment variables
. gen lottery=1
{txt}
{com}. replace lottery=0 if sessionid>8
{txt}(2,560 real changes made)

{com}. gen contest="Lottery" if lottery==1
{txt}(2,560 missing values generated)

{com}. replace contest="All Pay Auction" if lottery==0
{txt}variable {bf}{res}contest{sf}{txt} was {bf}{res}str7{sf}{txt} now {bf}{res}str15{sf}
{txt}(2,560 real changes made)

{com}. 
. *Periods 1-20 and 21-40
. gen contestperiod=0
{txt}
{com}. replace contestperiod=1 if part==3
{txt}(2,560 real changes made)

{com}. replace contestperiod=1 if part==4
{txt}(2,560 real changes made)

{com}. 
. *Sessionid 1-4 = Lottery 25-75
. *Sessionid 5-8 = Lottery 75-25
. *Sessionid 9-12 =  All pay 25-75 
. *Sessionid 13-16 =  All pay 75-25
. 
. label var x1hat "Type A - Round 1"
{txt}
{com}. label var x2hat "Type B - Round 1"
{txt}
{com}. label var x12hat "Type A - Round 2"
{txt}
{com}. label var xjow "Investment for reward of $0"
{txt}
{com}. 
. *Code "guesses" as missing for Type A players?
. replace x12guess=. if x12guess==-1
{txt}(3,421 real changes made, 3,421 to missing)

{com}. 
. 
. *****Variables related to best responses
. gen br1=10*sqrt(x2hat)-x2hat if lottery==1 & x2hat>0
{txt}(2,826 missing values generated)

{com}. replace br1=0.01 if lottery==1 & x2hat==0
{txt}(266 real changes made)

{com}. gen br2=10*sqrt(x1hat)-x1hat if lottery==1 & x1hat>0
{txt}(2,754 missing values generated)

{com}. replace br2=0.01 if lottery==1 & x1hat==0
{txt}(194 real changes made)

{com}. gen notunique=runiform()
{txt}
{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat<=99.98 
{txt}(2,246 real changes made)

{com}. replace br1=x2hat+0.01 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique<=0.5
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat>99.98 & x2hat<100 & notunique>0.5 
{txt}(5 real changes made)

{com}. replace br1=0 if lottery==0 & x2hat==100
{txt}(304 real changes made)

{com}. gen diff_br_1=abs(x1hat-br1)
{txt}
{com}. gen diff_br_2=abs(x12hat-br1)
{txt}
{com}. 
. gen match2=1 if x12hat==x2hat
{txt}(4,906 missing values generated)

{com}. replace match2=0 if x12hat~=x2hat
{txt}(4,906 real changes made)

{com}. 
. gen x12guesshat=.
{txt}(5,120 missing values generated)

{com}. replace x12guesshat=x12guess if x12guess~=.
{txt}(1,699 real changes made)

{com}. replace x12guesshat=x1hat if Type==2 & x12guess==.
{txt}(861 real changes made)

{com}. 
. gen absdev=abs(x12guesshat-x12hat)
{txt}(2,560 missing values generated)

{com}. 
. *Generate equilibrium predictions
. gen x1eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x1eq=(1-alpha)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x2eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x2eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. gen x12eq=Prize/4 if lottery==1
{txt}(2,560 missing values generated)

{com}. replace x12eq=((1-alpha)^2)*(Prize/2) if lottery==0
{txt}(2,560 real changes made)

{com}. 
. gen x12eq_expost=br1
{txt}
{com}. 
. *Generate order dummies (f75=1 if the session was a 75-25 and 0 if a 25-75
. gen f25=1
{txt}
{com}. *replace f25=0 if sessionid>=5
. *replace f25=1 if sessionid>=9
. *replace f25=0 if sessionid>=13
. replace f25=0 if Period>20 & alpha==0.25
{txt}(1,280 real changes made)

{com}. 
. gen f75=1 if f25==0
{txt}(3,840 missing values generated)

{com}. replace f75=0 if f25==1
{txt}(3,840 real changes made)

{com}. 
. gen order="75-25" if f75==1
{txt}(3,840 missing values generated)

{com}. replace order="25-75" if f75==0
{txt}(3,840 real changes made)

{com}. 
. *Rescale period number
. gen periodt=Period
{txt}
{com}. replace periodt=Period-20 if Period>20
{txt}(2,560 real changes made)

{com}. 
. gen inv=1/periodt
{txt}
{com}. 
. *Define trand variable
. 
. *Generate A's winning probability in round 1
. gen probwin1=0
{txt}
{com}. replace probwin1=1 if lottery==0 & x1hat>x2hat
{txt}(1,364 real changes made)

{com}. replace probwin1=0.5 if lottery==0 & x1hat==x2hat
{txt}(110 real changes made)

{com}. replace probwin1=x1hat/(x1hat+x2hat) if x1hat+x2hat>0 & lottery==1
{txt}(2,366 real changes made)

{com}. replace probwin1=0.5 if x1hat+x2hat==0 & lottery==1
{txt}(22 real changes made)

{com}. 
. 
. *Dummy for alpha
. gen d75=0
{txt}
{com}. replace d75=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. *****Creates a dummy variable for subjects who switched only once on both RISK and LOSS 
. gen validriskloss=1
{txt}
{com}. replace validriskloss=0 if RiskLineSwitchToB==-1
{txt}(480 real changes made)

{com}. replace validriskloss=0 if LossLineSwitchToB==-1
{txt}(240 real changes made)

{com}. sum validriskloss if part==5

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
validriskl~s {c |}{res}          0
{txt}
{com}. 
. ***Variable that measures the distance to the best response**
. *In Round 1
. gen dist1=x1hat-br1
{txt}
{com}. gen adist1=abs(x1hat-br1)
{txt}
{com}. gen adist1_sq=(x1hat-br1)^2
{txt}
{com}. gen dist2=x2hat-br2
{txt}(2,560 missing values generated)

{com}. *In Round 2
. gen dist12=x12hat-br1
{txt}
{com}. *Interaction with treatment
. gen distinter=dist12*lottery
{txt}
{com}. 
. 
. *Investing the value of the prize
. gen x1100=0
{txt}
{com}. replace x1100=1 if x1hat==100
{txt}(296 real changes made)

{com}. gen x2100=0
{txt}
{com}. replace x2100=1 if x2hat==100
{txt}(570 real changes made)

{com}. gen x12100=0
{txt}
{com}. replace x12100=1 if x12hat==100
{txt}(366 real changes made)

{com}. 
. 
. *Investing zero
. gen x10=0
{txt}
{com}. replace x10=1 if x1hat==0
{txt}(484 real changes made)

{com}. gen x20=0
{txt}
{com}. replace x20=1 if x2hat==0
{txt}(864 real changes made)

{com}. gen x120=0
{txt}
{com}. replace x120=1 if x12hat==0
{txt}(470 real changes made)

{com}. 
. *Upper bound
. gen ub=(1-alpha)*100
{txt}
{com}. replace ub=25 if contest=="Lottery"
{txt}(1,280 real changes made)

{com}. 
. 
. *Dummy for >0 joy of winning
. gen joyful=1
{txt}
{com}. replace joyful=0 if xjow==0
{txt}(3,080 real changes made)

{com}. 
. *Create some alternative risk and loss aversion measures based on choices
. gen risksafechoices=20-RiskLineSwitchToB
{txt}
{com}. gen losssafechoices=20-LossLineSwitchToB 
{txt}
{com}. 
. gen riskaverse=0 
{txt}
{com}. replace riskaverse=1 if RiskLineSwitchToB<10 & risksafechoices~=.
{txt}(1,520 real changes made)

{com}. replace riskaverse=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskneutral=0 
{txt}
{com}. replace riskneutral=1 if RiskLineSwitchToB>=10 & RiskLineSwitchToB<=11
{txt}(2,040 real changes made)

{com}. replace riskneutral=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen riskloving=0 
{txt}
{com}. replace riskloving=1 if RiskLineSwitchToB>11
{txt}(1,560 real changes made)

{com}. replace riskloving=. if risksafechoices==-1
{txt}(0 real changes made)

{com}. 
. gen risk=. if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace risk=0.25-2.5 if RiskLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace risk=0.5-2.5 if RiskLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace risk=0.75-2.5 if RiskLineSwitchToB==3
{txt}(0 real changes made)

{com}. replace risk=1-2.5 if RiskLineSwitchToB==4
{txt}(80 real changes made)

{com}. replace risk=1.25-2.5 if RiskLineSwitchToB==5
{txt}(80 real changes made)

{com}. replace risk=1.5-2.5 if RiskLineSwitchToB==6
{txt}(0 real changes made)

{com}. replace risk=1.75-2.5 if RiskLineSwitchToB==7
{txt}(80 real changes made)

{com}. replace risk=2-2.5 if RiskLineSwitchToB==8
{txt}(480 real changes made)

{com}. replace risk=2.25-2.5 if RiskLineSwitchToB==9
{txt}(320 real changes made)

{com}. replace risk=2.5-2.5 if RiskLineSwitchToB==10
{txt}(960 real changes made)

{com}. replace risk=2.75-2.5 if RiskLineSwitchToB==11
{txt}(1,080 real changes made)

{com}. replace risk=3-2.5 if RiskLineSwitchToB==12
{txt}(960 real changes made)

{com}. replace risk=3.25-2.5 if RiskLineSwitchToB==13
{txt}(160 real changes made)

{com}. replace risk=3.5-2.5 if RiskLineSwitchToB==14
{txt}(120 real changes made)

{com}. replace risk=3.75-2.5 if RiskLineSwitchToB==15
{txt}(120 real changes made)

{com}. replace risk=4-2.5 if RiskLineSwitchToB==16
{txt}(200 real changes made)

{com}. replace risk=4.25-2.5 if RiskLineSwitchToB==17
{txt}(0 real changes made)

{com}. replace risk=4.5-2.5 if RiskLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace risk=4.75-2.5 if RiskLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace risk=5-2.5 if RiskLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *lambda =slope in the domain of losses
. *Use 0.5(5)+0.5*lambda*(y)=0
. *=> lambda=(2.5/(0.5*-y))
. *loss=lambda
. gen loss=.  if validriskloss==.
{txt}(5,120 missing values generated)

{com}. replace loss=5/0.5 if LossLineSwitchToB==1
{txt}(0 real changes made)

{com}. replace loss=5/1 if LossLineSwitchToB==2
{txt}(0 real changes made)

{com}. replace loss=5/1.5 if LossLineSwitchToB==3
{txt}(80 real changes made)

{com}. replace loss=5/2 if LossLineSwitchToB==4
{txt}(120 real changes made)

{com}. replace loss=5/2.5 if LossLineSwitchToB==5
{txt}(560 real changes made)

{com}. replace loss=5/3 if LossLineSwitchToB==6
{txt}(600 real changes made)

{com}. replace loss=5/3.5 if LossLineSwitchToB==7
{txt}(560 real changes made)

{com}. replace loss=5/4 if LossLineSwitchToB==8
{txt}(200 real changes made)

{com}. replace loss=5/4.5 if LossLineSwitchToB==9
{txt}(480 real changes made)

{com}. replace loss=5/5 if LossLineSwitchToB==10
{txt}(480 real changes made)

{com}. replace loss=5/5.5 if LossLineSwitchToB==11
{txt}(760 real changes made)

{com}. replace loss=5/6 if LossLineSwitchToB==12
{txt}(160 real changes made)

{com}. replace loss=5/6.5 if LossLineSwitchToB==13
{txt}(360 real changes made)

{com}. replace loss=5/7 if LossLineSwitchToB==14
{txt}(0 real changes made)

{com}. replace loss=5/7.5 if LossLineSwitchToB==15
{txt}(80 real changes made)

{com}. replace loss=5/8 if LossLineSwitchToB==16
{txt}(120 real changes made)

{com}. replace loss=5/8.5 if LossLineSwitchToB==17
{txt}(40 real changes made)

{com}. replace loss=5/9 if LossLineSwitchToB==18
{txt}(0 real changes made)

{com}. replace loss=5/9.5 if LossLineSwitchToB==19
{txt}(0 real changes made)

{com}. replace loss=5/10 if LossLineSwitchToB==20
{txt}(0 real changes made)

{com}. 
. *Loss aversion
. gen lossaverse=.
{txt}(5,120 missing values generated)

{com}. replace lossaverse=1 if LossLineSwitchToB<10
{txt}(3,120 real changes made)

{com}. replace lossaverse=0 if LossLineSwitchToB>=10
{txt}(2,000 real changes made)

{com}. replace lossaverse=. if LossLineSwitchToB==.
{txt}(0 real changes made)

{com}. 
. 
. *gender dummy
. gen female=1 if gender==2
{txt}(2,960 missing values generated)

{com}. replace female=0 if gender==1
{txt}(2,960 real changes made)

{com}. 
. *1 = "Business Administration"; 2 = "Economics"; 3 = "Social Sciences"; 
. *4 = "Humanities"; 5 = "Natural Sciences"; *6 = "Math / Statistics"; 
. *7 = "Engineering / Computer Science"; 8 = "Other";
. gen engineer=1 if major==7
{txt}(3,200 missing values generated)

{com}. replace engineer=0 if major~=7
{txt}(3,200 real changes made)

{com}. gen economics=0
{txt}
{com}. replace economics=1 if major==2
{txt}(320 real changes made)

{com}. *1 = "White"; 2 = "African-American"; 3 = "Hispanic"; 4 = "Asian";
. *5 = "American Indian"; 6 = "Pacific Islander";
. gen asian=1 if race==4
{txt}(2,560 missing values generated)

{com}. replace asian=0 if race~=4
{txt}(2,560 real changes made)

{com}. *1  = "Freshman"; 2 = "Sophomore"; 3 = "Junior"; 
. *4 = "Senior"; 5 = "Graduate Student";
. gen graduate=1 if class==5
{txt}(4,920 missing values generated)

{com}. replace graduate=0 if class~=5
{txt}(4,920 real changes made)

{com}. 
. *REGRET variables*
. 
. sort contest
{txt}
{com}. by contest: egen medreg1=median(regret1)
{txt}
{com}. by contest: egen medreg2=median(regret2)
{txt}
{com}. by contest: egen medreg3=median(regret3)
{txt}
{com}. by contest: egen medreg4=median(regret4)
{txt}
{com}. 
. by contest: egen medhapp1=median(happiness1)
{txt}
{com}. by contest: egen medhapp2=median(happiness2)
{txt}
{com}. by contest: egen medhapp3=median(happiness3)
{txt}
{com}. by contest: egen medhapp4=median(happiness4)
{txt}
{com}. 
. *Dummies
. *3.5=mid point of the scale"
. gen dreg1=0
{txt}
{com}. replace dreg1=1 if regret1>3
{txt}(960 real changes made)

{com}. gen dreg2=0
{txt}
{com}. replace dreg2=1 if regret2>3
{txt}(880 real changes made)

{com}. gen dreg3=0
{txt}
{com}. replace dreg3=1 if regret3>3
{txt}(1,960 real changes made)

{com}. gen dreg4=0
{txt}
{com}. replace dreg4=1 if regret4>3
{txt}(2,040 real changes made)

{com}. 
. gen dhapp1=0
{txt}
{com}. replace dhapp1=1 if happiness1>3
{txt}(4,200 real changes made)

{com}. gen dhapp2=0
{txt}
{com}. replace dhapp2=1 if happiness2>3
{txt}(3,760 real changes made)

{com}. gen dhapp3=0
{txt}
{com}. replace dhapp3=1 if happiness3>3
{txt}(840 real changes made)

{com}. gen dhapp4=0
{txt}
{com}. replace dhapp4=1 if happiness4>3
{txt}(800 real changes made)

{com}. 
. gen denvy1=0
{txt}
{com}. replace denvy1=1 if envy1>3
{txt}(680 real changes made)

{com}. gen denvy2=0
{txt}
{com}. replace denvy2=1 if envy2>3
{txt}(520 real changes made)

{com}. gen denvy3=0
{txt}
{com}. replace denvy3=1 if envy3>3
{txt}(2,160 real changes made)

{com}. gen denvy4=0
{txt}
{com}. replace denvy4=1 if envy4>3
{txt}(1,840 real changes made)

{com}. 
. gen block_x2=5
{txt}
{com}. replace block_x2=4 if x2hat<80
{txt}(4,042 real changes made)

{com}. replace block_x2=3 if x2hat<60
{txt}(3,344 real changes made)

{com}. replace block_x2=2 if x2hat<40
{txt}(2,656 real changes made)

{com}. replace block_x2=1 if x2hat<20
{txt}(1,924 real changes made)

{com}. 
. 
. gen won_contest1=0
{txt}
{com}. replace won_contest1=1 if payoff1==200-x
{txt}(2,336 real changes made)

{com}. replace won_contest1=1 if payoff1>100 & x>0
{txt}(224 real changes made)

{com}. replace won_contest1=1 if x>otherx & Type==1 & lottery==0
{txt}(0 real changes made)

{com}. replace won_contest1=1 if x<otherx & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. 
. gen won_contest2=0
{txt}
{com}. replace won_contest2=1 if payoff2==200-x12hat & Type==1
{txt}(971 real changes made)

{com}. replace won_contest2=1 if payoff2==200-x2hat & Type==2
{txt}(879 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x12hat>0 & Type==1
{txt}(660 real changes made)

{com}. replace won_contest2=1 if payoff2>100 & x2hat>0 & Type==2
{txt}(50 real changes made)

{com}. replace won_contest2=1 if x12>otherx & Type==1 & lottery==0
{txt}(247 real changes made)

{com}. replace won_contest2=1 if x12<otherx & Type==2 & lottery==0
{txt}(0 real changes made)

{com}. 
. 
. gen payoff_round1=0
{txt}
{com}. replace payoff_round1=200-x1hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=200-x1hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round1=100-x1hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(19 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round1=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round1=payoff1 if lottery==1
{txt}(2,517 real changes made)

{com}. 
. 
. gen payoff_round2=0
{txt}
{com}. replace payoff_round2=200-x12hat if x1hat>x2hat & Type==1 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=200-x12hat if x1hat==x2hat & win>=0.5 & Type==1 & lottery==0
{txt}(33 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat<x2hat & Type==2 & lottery==0
{txt}(543 real changes made)

{com}. replace payoff_round2=200-x2hat if x1hat==x2hat & win<0.5 &  Type==2 & lottery==0
{txt}(22 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat<x2hat & Type==1 & lottery==0
{txt}(496 real changes made)

{com}. replace payoff_round2=100-x12hat if x1hat==x2hat & win<0.5 & Type==1 & lottery==0
{txt}(21 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat>x2hat & Type==2 & lottery==0
{txt}(682 real changes made)

{com}. replace payoff_round2=100-x2hat if x1hat==x2hat & win>=0.5 &  Type==2 & lottery==0
{txt}(28 real changes made)

{com}. replace payoff_round2=payoff2 if lottery==1
{txt}(2,502 real changes made)

{com}. 
. ***Equilibrium flexibility***
. gen eq_flexibility=0
{txt}
{com}. replace eq_flexibility=36.72 if alpha==0.25 & lottery==0
{txt}(1,280 real changes made)

{com}. replace eq_flexibility=91.41 if alpha==0.75 & lottery==0
{txt}(1,280 real changes made)

{com}. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Contests with Revisions Replication files\RiskPrefdtas
{txt}
{com}. 
. merge m:1 session Subject using Session1.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session2.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKProfitIfTwoStagesOK} was {bf:byte}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:EarningsPayingPeriod2} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:TotalEarnings34} was {bf:int}, now {bf:float} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,160
{txt}{col 9}from master{col 30}{res}           4,160{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             960{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session3.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,800
{txt}{col 9}from master{col 30}{res}           4,800{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             320{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session4.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session5.dta
{res}{txt}{p 0 7 2}
(variable
{bf:TimeOKRiskAversionScreenOK} was {bf:byte}, now {bf:int} to accommodate using data's values)
{p_end}

{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session6.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session7.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. merge m:1 session Subject using Session8.dta
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}           4,480
{txt}{col 9}from master{col 30}{res}           4,480{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             640{txt}  (_merge==3)
{col 5}{hline 41}

{com}. drop _merge
{txt}
{com}. 
. 
. 
. 
{txt}end of do-file

{com}. 
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
. *label changes
. label var xjow "Joy of winning"
{txt}
{com}. label var alpha "$\alpha$"
{txt}
{com}. label var risk "Risk aversion"
{txt}
{com}. label var loss "Loss aversion"
{txt}
{com}. *label var LossLineSwitchToB "Loss aversion"
. label var inv "$1/Period$"
{txt}
{com}. 
. *generate sd,median variables
. gen x_sd=x
{txt}
{com}. gen x_med=x
{txt}
{com}. 
. *alpha .75 dummy variable 
. gen dalpha=0
{txt}
{com}. replace dalpha=1 if alpha==0.75
{txt}(2,560 real changes made)

{com}. 
. gen first20=0
{txt}
{com}. replace first20=1 if part==3
{txt}(2,560 real changes made)

{com}. 
. 
. gen reduce=0
{txt}
{com}. replace reduce=1 if Type==1 & x12hat<x1hat
{txt}(1,065 real changes made)

{com}. 
. gen raise=0
{txt}
{com}. replace raise=1 if Type==1 & x12hat>x1hat
{txt}(965 real changes made)

{com}. 
. gen rationalrev=0
{txt}
{com}. replace rationalrev=1 if x1hat~=br1
{txt}(4,999 real changes made)

{com}. *replace rationalrev=1 if x2hat & lottery==1
. 
. gen overbid=1
{txt}
{com}. replace overbid=0 if x1hat<=br1  
{txt}(1,540 real changes made)

{com}. 
. gen underbid=0
{txt}
{com}. replace underbid=1 if x1hat<br1 
{txt}(1,419 real changes made)

{com}. 
. gen ahead=0
{txt}
{com}. replace ahead=1 if x1hat>x2hat
{txt}(2,544 real changes made)

{com}. 
. gen onedisttoother=x1hat-x2hat
{txt}
{com}. gen twodisttoother=x12hat-x2hat
{txt}
{com}. 
. gen irr_nochange=0 
{txt}
{com}. replace irr_nochange=1 if changehat==0 & rationalrev==1
{txt}(956 real changes made)

{com}. 
. gen irr_rev_dec=0
{txt}
{com}. replace irr_rev_dec=1 if irr_nochange==1
{txt}(956 real changes made)

{com}. replace irr_rev_dec=1 if changehat==1 & x1hat==br1
{txt}(17 real changes made)

{com}. 
. label var rationalrev "Revising is rational"
{txt}
{com}. label var changehat "Subject revised"
{txt}
{com}. label var irr_nochange "No change even though was rational"
{txt}
{com}. 
. ** Non-monotonic risk preferences
. 
. gen nonmonr= 0
{txt}
{com}. replace nonmonr = 1 if RiskLine1>RiskLine2 | RiskLine2>RiskLine3 | RiskLine3>RiskLine4 | RiskLine4>RiskLine5 | RiskLine5>RiskLine6
{txt}(0 real changes made)

{com}. replace nonmonr = 1 if RiskLine6>RiskLine7 | RiskLine7>RiskLine8 | RiskLine8>RiskLine9 | RiskLine9>RiskLine10 | RiskLine10>RiskLine11
{txt}(40 real changes made)

{com}. replace nonmonr = 1 if RiskLine11>RiskLine12 | RiskLine12>RiskLine13 | RiskLine13>RiskLine14 | RiskLine14>RiskLine15 | RiskLine15>RiskLine16
{txt}(40 real changes made)

{com}. replace nonmonr = 1 if RiskLine16>RiskLine17 | RiskLine17>RiskLine18 | RiskLine18>RiskLine19 | RiskLine19>RiskLine20
{txt}(0 real changes made)

{com}. 
. **Table 2
. keep if Type ==2
{txt}(2,560 observations deleted)

{com}. 
{txt}end of do-file

{com}. tab nonmonr

    {txt}nonmonr {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          0 {c |}{res}      2,518       98.36       98.36
{txt}          1 {c |}{res}         42        1.64      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,560      100.00

{com}. sum x1hat

{txt}    Variable {c |}        Obs        Mean    Std. dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 7}x1hat {c |}{res}      2,560    39.97543    32.33115          0        100

{com}. reg x1hat nonmonr

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     2,560
{txt}{hline 13}{c +}{hline 34}   F(1, 2558)      = {res}     1.33
{txt}       Model {c |} {res} 1394.67516         1  1394.67516   {txt}Prob > F        ={res}    0.2481
{txt}    Residual {c |} {res} 2673537.01     2,558  1045.16693   {txt}R-squared       ={res}    0.0005
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0001
{txt}       Total {c |} {res} 2674931.68     2,559  1045.30351   {txt}Root MSE        =   {res} 32.329

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       x1hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2} 5.810373{col 26}{space 2} 5.029911{col 37}{space 1}    1.16{col 46}{space 3}0.248{col 54}{space 4}-4.052738{col 67}{space 3} 15.67348
{txt}{space 7}_cons {c |}{col 14}{res}{space 2}  39.8801{col 26}{space 2} .6442656{col 37}{space 1}   61.90{col 46}{space 3}0.000{col 54}{space 4} 38.61677{col 67}{space 3} 41.14344
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{com}. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. reg x1hat nonmonr if lottery == 0
{txt}{p 0 6 2}note: {bf:nonmonr} omitted because of collinearity.{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(0, 1279)      = {res}     0.00
{txt}       Model {c |} {res}          0         0           .   {txt}Prob > F        ={res}         .
{txt}    Residual {c |} {res} 1307062.15     1,279  1021.94069   {txt}R-squared       ={res}    0.0000
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0000
{txt}       Total {c |} {res} 1307062.15     1,279  1021.94069   {txt}Root MSE        =   {res} 31.968

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       x1hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 7}_cons {c |}{col 14}{res}{space 2} 36.71491{col 26}{space 2} .8935274{col 37}{space 1}   41.09{col 46}{space 3}0.000{col 54}{space 4} 34.96197{col 67}{space 3} 38.46785
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, replace ctitle(x1hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. reg x2hat nonmonr if lottery == 0
{txt}{p 0 6 2}note: {bf:nonmonr} omitted because of collinearity.{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(0, 1279)      = {res}     0.00
{txt}       Model {c |} {res}          0         0           .   {txt}Prob > F        ={res}         .
{txt}    Residual {c |} {res} 1776929.64     1,279  1389.31168   {txt}R-squared       ={res}    0.0000
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0000
{txt}       Total {c |} {res} 1776929.64     1,279  1389.31168   {txt}Root MSE        =   {res} 37.273

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       x2hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 7}_cons {c |}{col 14}{res}{space 2} 36.21762{col 26}{space 2} 1.041825{col 37}{space 1}   34.76{col 46}{space 3}0.000{col 54}{space 4} 34.17375{col 67}{space 3}  38.2615
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x2hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. reg x12hat nonmonr if lottery == 0
{txt}{p 0 6 2}note: {bf:nonmonr} omitted because of collinearity.{p_end}

      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(0, 1279)      = {res}     0.00
{txt}       Model {c |} {res}          0         0           .   {txt}Prob > F        ={res}         .
{txt}    Residual {c |} {res} 1500173.37     1,279  1172.92679   {txt}R-squared       ={res}    0.0000
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0000
{txt}       Total {c |} {res} 1500173.37     1,279  1172.92679   {txt}Root MSE        =   {res} 34.248

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2}        0{col 26}{txt}  (omitted)
{space 7}_cons {c |}{col 14}{res}{space 2} 32.45077{col 26}{space 2} .9572612{col 37}{space 1}   33.90{col 46}{space 3}0.000{col 54}{space 4} 30.57279{col 67}{space 3} 34.32874
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x12hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. 
. 
. 
. reg x1hat nonmonr if lottery == 1

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(1, 1278)      = {res}     0.25
{txt}       Model {c |} {res}  261.62115         1   261.62115   {txt}Prob > F        ={res}    0.6176
{txt}    Residual {c |} {res} 1340392.52     1,278  1048.82044   {txt}R-squared       ={res}    0.0002
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}   -0.0006
{txt}       Total {c |} {res} 1340654.14     1,279  1048.20496   {txt}Root MSE        =   {res} 32.385

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       x1hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2} 2.537794{col 26}{space 2}  5.08125{col 37}{space 1}    0.50{col 46}{space 3}0.618{col 54}{space 4}-7.430714{col 67}{space 3}  12.5063
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 43.15268{col 26}{space 2} .9204289{col 37}{space 1}   46.88{col 46}{space 3}0.000{col 54}{space 4} 41.34696{col 67}{space 3}  44.9584
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x1hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. reg x2hat nonmonr if lottery == 1

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(1, 1278)      = {res}     5.47
{txt}       Model {c |} {res} 6512.79552         1  6512.79552   {txt}Prob > F        ={res}    0.0196
{txt}    Residual {c |} {res} 1523017.59     1,278  1191.71955   {txt}R-squared       ={res}    0.0043
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0035
{txt}       Total {c |} {res} 1529530.38     1,279  1195.87989   {txt}Root MSE        =   {res} 34.521

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       x2hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2} 12.66204{col 26}{space 2} 5.416354{col 37}{space 1}    2.34{col 46}{space 3}0.020{col 54}{space 4} 2.036119{col 67}{space 3} 23.28796
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 44.71034{col 26}{space 2} .9811303{col 37}{space 1}   45.57{col 46}{space 3}0.000{col 54}{space 4} 42.78554{col 67}{space 3} 46.63514
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x2hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. reg x12hat nonmonr if lottery == 1

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}     1,280
{txt}{hline 13}{c +}{hline 34}   F(1, 1278)      = {res}     1.20
{txt}       Model {c |} {res} 1462.87035         1  1462.87035   {txt}Prob > F        ={res}    0.2745
{txt}    Residual {c |} {res} 1564018.95     1,278    1223.802   {txt}R-squared       ={res}    0.0009
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0002
{txt}       Total {c |} {res} 1565481.82     1,279  1223.98891   {txt}Root MSE        =   {res} 34.983

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}      x12hat{col 14}{c |} Coefficient{col 26}  Std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}nonmonr {c |}{col 14}{res}{space 2} -6.00099{col 26}{space 2} 5.488777{col 37}{space 1}   -1.09{col 46}{space 3}0.274{col 54}{space 4}-16.76899{col 67}{space 3} 4.767013
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 44.19218{col 26}{space 2} .9942492{col 37}{space 1}   44.45{col 46}{space 3}0.000{col 54}{space 4} 42.24164{col 67}{space 3} 46.14272
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table2.doc, append ctitle(x12hat)
{txt}{stata `"shellout using `"Table2.doc"'"':Table2.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table2.txt""':seeout}

{com}. 
{txt}end of do-file

{com}. shellout using `"Table2.doc"'

. do "C:\Users\joshu\AppData\Local\Temp\STD5ff4_000000.tmp"
{txt}
{com}. gen Risklott = RiskLineSwitchToB*lottery
{txt}
{com}. 
. 
. **** Table 3 ***
. 
. 
. drop if nonmonr==1
{txt}(42 observations deleted)

{com}. 
. reg x2hat RiskLineSwitchToB if alpha==0.25 , robust

{txt}Linear regression                               Number of obs     = {res}     1,253
                                                {txt}F(1, 1251)        =  {res}     0.60
                                                {txt}Prob > F          = {res}    0.4375
                                                {txt}R-squared         = {res}    0.0005
                                                {txt}Root MSE          =    {res} 34.819

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      t{col 51}   P>|t|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2}-.2038202{col 31}{space 2} .2624489{col 42}{space 1}   -0.78{col 51}{space 3}0.438{col 59}{space 4}-.7187088{col 72}{space 3} .3110683
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 44.45417{col 31}{space 2} 2.764911{col 42}{space 1}   16.08{col 51}{space 3}0.000{col 59}{space 4}  39.0298{col 72}{space 3} 49.87855
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table3.doc, replace  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. reg x2hat RiskLineSwitchToB lottery Risklott if alpha==0.25 , robust

{txt}Linear regression                               Number of obs     = {res}     1,253
                                                {txt}F(3, 1249)        =  {res}     2.25
                                                {txt}Prob > F          = {res}    0.0809
                                                {txt}R-squared         = {res}    0.0055
                                                {txt}Root MSE          =    {res}  34.76

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      t{col 51}   P>|t|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2} .3219279{col 31}{space 2} .3729486{col 42}{space 1}    0.86{col 51}{space 3}0.388{col 59}{space 4}-.4097469{col 72}{space 3} 1.053603
{txt}{space 10}lottery {c |}{col 19}{res}{space 2}  12.1291{col 31}{space 2} 5.463755{col 42}{space 1}    2.22{col 51}{space 3}0.027{col 59}{space 4} 1.409948{col 72}{space 3} 22.84825
{txt}{space 9}Risklott {c |}{col 19}{res}{space 2}-.8562261{col 31}{space 2} .5189698{col 42}{space 1}   -1.65{col 51}{space 3}0.099{col 59}{space 4}-1.874375{col 72}{space 3} .1619227
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 37.25637{col 31}{space 2} 4.069314{col 42}{space 1}    9.16{col 51}{space 3}0.000{col 59}{space 4} 29.27293{col 72}{space 3} 45.23982
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. xtreg x2hat RiskLineSwitchToB lottery Risklott if alpha==0.25,  i(subjectid) robust
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,253
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}       126

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0000                                         {txt}min = {res}         4
{txt}     Between = {res}0.0090                                         {txt}avg = {res}       9.9
{txt}     Overall = {res}0.0052                                         {txt}max = {res}        15

                                                {txt}Wald chi2({res}3{txt})      =  {res}     0.97
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.8079

{txt}{ralign 83:(Std. err. adjusted for {res:126} clusters in subjectid)}
{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2} .5034049{col 31}{space 2} .8555426{col 42}{space 1}    0.59{col 51}{space 3}0.556{col 59}{space 4}-1.173428{col 72}{space 3} 2.180238
{txt}{space 10}lottery {c |}{col 19}{res}{space 2} 12.52335{col 31}{space 2} 13.68955{col 42}{space 1}    0.91{col 51}{space 3}0.360{col 59}{space 4}-14.30767{col 72}{space 3} 39.35437
{txt}{space 9}Risklott {c |}{col 19}{res}{space 2}-.9656557{col 31}{space 2} 1.292503{col 42}{space 1}   -0.75{col 51}{space 3}0.455{col 59}{space 4}-3.498915{col 72}{space 3} 1.567604
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 35.40094{col 31}{space 2} 9.403585{col 42}{space 1}    3.76{col 51}{space 3}0.000{col 59}{space 4} 16.97025{col 72}{space 3} 53.83163
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
          sigma_u {c |} {res} 23.749987
          {txt}sigma_e {c |} {res} 25.766571
              {txt}rho {c |} {res} .45934198{txt}   (fraction of variance due to u_i)
{hline 18}{c BT}{hline 64}

{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. 
. reg x2hat RiskLineSwitchToB if alpha==0.75 , robust

{txt}Linear regression                               Number of obs     = {res}     1,265
                                                {txt}F(1, 1263)        =  {res}     0.02
                                                {txt}Prob > F          = {res}    0.8750
                                                {txt}R-squared         = {res}    0.0000
                                                {txt}Root MSE          =    {res} 37.107

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      t{col 51}   P>|t|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2} -.044896{col 31}{space 2} .2854522{col 42}{space 1}   -0.16{col 51}{space 3}0.875{col 59}{space 4}-.6049087{col 72}{space 3} .5151166
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 38.79294{col 31}{space 2}  3.00001{col 42}{space 1}   12.93{col 51}{space 3}0.000{col 59}{space 4} 32.90739{col 72}{space 3} 44.67849
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. reg x2hat RiskLineSwitchToB lottery Risklott if alpha==0.75 , robust

{txt}Linear regression                               Number of obs     = {res}     1,265
                                                {txt}F(3, 1261)        =  {res}    16.14
                                                {txt}Prob > F          = {res}    0.0000
                                                {txt}R-squared         = {res}    0.0349
                                                {txt}Root MSE          =    {res} 36.483

{txt}{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      t{col 51}   P>|t|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2} .8120705{col 31}{space 2} .4087387{col 42}{space 1}    1.99{col 51}{space 3}0.047{col 59}{space 4} .0101876{col 72}{space 3} 1.613953
{txt}{space 10}lottery {c |}{col 19}{res}{space 2}  25.5196{col 31}{space 2} 5.756568{col 42}{space 1}    4.43{col 51}{space 3}0.000{col 59}{space 4} 14.22609{col 72}{space 3}  36.8131
{txt}{space 9}Risklott {c |}{col 19}{res}{space 2} -1.22823{col 31}{space 2} .5481163{col 42}{space 1}   -2.24{col 51}{space 3}0.025{col 59}{space 4}-2.303551{col 72}{space 3}-.1529098
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 23.46183{col 31}{space 2} 4.345201{col 42}{space 1}    5.40{col 51}{space 3}0.000{col 59}{space 4} 14.93721{col 72}{space 3} 31.98645
{txt}{hline 18}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. xtreg x2hat RiskLineSwitchToB lottery Risklott if alpha==0.75,  i(subjectid) robust
{res}
{txt}Random-effects GLS regression                   Number of obs     = {res}     1,265
{txt}Group variable: {res}subjectid                       {txt}Number of groups  = {res}       126

{txt}R-squared:                                      Obs per group:
     Within  = {res}0.0000                                         {txt}min = {res}         3
{txt}     Between = {res}0.0740                                         {txt}avg = {res}      10.0
{txt}     Overall = {res}0.0347                                         {txt}max = {res}        17

                                                {txt}Wald chi2({res}3{txt})      =  {res}    11.49
{txt}corr(u_i, X) = {res}0{txt} (assumed)                      Prob > chi2       =     {res}0.0093

{txt}{ralign 83:(Std. err. adjusted for {res:126} clusters in subjectid)}
{hline 18}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 19}{c |}{col 31}    Robust
{col 1}            x2hat{col 19}{c |} Coefficient{col 31}  std. err.{col 43}      z{col 51}   P>|z|{col 59}     [95% con{col 72}f. interval]
{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
RiskLineSwitchToB {c |}{col 19}{res}{space 2} .6027904{col 31}{space 2} .8023525{col 42}{space 1}    0.75{col 51}{space 3}0.452{col 59}{space 4}-.9697917{col 72}{space 3} 2.175372
{txt}{space 10}lottery {c |}{col 19}{res}{space 2} 23.41448{col 31}{space 2} 11.54361{col 42}{space 1}    2.03{col 51}{space 3}0.043{col 59}{space 4}  .789428{col 72}{space 3} 46.03953
{txt}{space 9}Risklott {c |}{col 19}{res}{space 2}-.9635101{col 31}{space 2} 1.159676{col 42}{space 1}   -0.83{col 51}{space 3}0.406{col 59}{space 4}-3.236433{col 72}{space 3} 1.309413
{txt}{space 12}_cons {c |}{col 19}{res}{space 2} 25.53502{col 31}{space 2}  7.95289{col 42}{space 1}    3.21{col 51}{space 3}0.001{col 59}{space 4} 9.947646{col 72}{space 3}  41.1224
{txt}{hline 18}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
          sigma_u {c |} {res} 24.070737
          {txt}sigma_e {c |} {res} 27.378464
              {txt}rho {c |} {res} .43597352{txt}   (fraction of variance due to u_i)
{hline 18}{c BT}{hline 64}

{com}. outreg2 using Table3.doc, append  addtext(Subject RE, NO) 
{txt}{stata `"shellout using `"Table3.doc"'"':Table3.doc}
{browse `"C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"' :dir}{com} : {txt}{stata `"seeout using "Table3.txt""':seeout}

{com}. 
{txt}end of do-file

{com}. shellout using `"Table3.doc"'

. shellout using `"Table3.doc"'

. shellout using `"Table3.doc"'

. do "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\Soloproj.do"
{txt}
{com}. clear all 
{res}{txt}
{com}. 
. /*desktop directory
> cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
> */
. *laptop directory
. cd "C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2"
{res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2
{txt}
{com}. 
. *school computer directory
. 
. 
. *start log
. log using Replication.log, replace
{err}log file already open
{txt}{search r(604), local:r(604);}

end of do-file

{search r(604), local:r(604);}

{com}. log cl
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\joshu\OneDrive\Documents\GitHub\ExperimentalEcon\proj2\nonpara.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res} 8 Dec 2023, 07:36:58
{txt}{.-}
{smcl}
{txt}{sf}{ul off}